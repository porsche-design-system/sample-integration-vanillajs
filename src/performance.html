<p-grid>
  <p-grid-item size="12">
    <p-heading size="medium">Choose Element and Count</p-heading>
  </p-grid-item>

  <p-grid-item size="4">
    <p-select id="selectElement" de></p-select>
  </p-grid-item>

  <p-grid-item size="4"
    ><p-select id="selectCount"></p-select>
  </p-grid-item>

  <p-grid-item size="4">
    <p-checkbox label="Render" id="shouldRender" checked></p-checkbox>
  </p-grid-item>

</p-grid>
<p-grid style="margin-top: 2rem">
  <p-grid-item id="content" size="12"></p-grid-item>
</p-grid>

<script>
  const SELECTABLE_ELEMENTS = ['text', 'checkbox', 'button'];
  const SELECTABLE_COUNTS = [25, 50, 100];

  const content = document.getElementById('content');
  const shouldRender = document.getElementById('shouldRender');
  const selectElement = document.getElementById('selectElement');
  const selectCount = document.getElementById('selectCount');

  const createOption = (value) => {
    const optionElement = document.createElement('p-select-option');
    optionElement.value = value;
    optionElement.innerHTML = value;
    return optionElement;
  };

  SELECTABLE_ELEMENTS.forEach((value) => {
    selectElement.appendChild(createOption(value));
  });

  SELECTABLE_COUNTS.forEach((value) => {
    selectCount.appendChild(createOption(value));
  });

  const onSelectUpdate = () => renderContent(selectElement.value, +selectCount.value);

  selectElement.addEventListener('update', onSelectUpdate);
  selectCount.addEventListener('update', onSelectUpdate);

  shouldRender.addEventListener('update', (event) => {
    if (!event.target.checked) {
      renderContent(undefined, 0);
    } else {
      onSelectUpdate();
    }
  });

  const createElement = (element, idx) => {
    const children = 'Lorem Ipsum ' + idx;
    switch (element) {
      case 'text':
        const text = document.createElement('p-text');
        text.innerHTML = children;
        return text;
      case 'checkbox':
        const checkbox = document.createElement('p-checkbox');
        checkbox.setAttribute('label', children);
        return checkbox;
      case 'button':
        const button = document.createElement('p-button');
        button.setAttribute('variant', 'primary');
        button.innerHTML = children;
        return button;
    }
  };

  const renderContent = (element, count) => {
    content.innerHTML = '';
    Array.from(Array(count)).forEach((val, i) => {
      content.appendChild(createElement(element, i));
    });
  };

  selectElement.value = 'text';
  selectCount.value = 25;
  renderContent('text', 25);
</script>
