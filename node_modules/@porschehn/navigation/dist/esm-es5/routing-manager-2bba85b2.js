var __spreadArray=this&&this.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++){if(i||!(n in e)){if(!i)i=Array.prototype.slice.call(e,0,n);i[n]=e[n]}}return t.concat(i||Array.prototype.slice.call(e))};import{r as routerStore}from"./router-store-26b5bff5.js";import{R as RoutingKeyPointers,f as findTopLevelRoutingKey,a as RoutingKeys,c as constructRoutingKey}from"./routing-key-808e9d26.js";import{l as isDesktop,E as dispatchEvent}from"./helper-76937d0b.js";import{w as windowService}from"./feature-toggles-f5a05f06.js";import{d as dealerSearchResultsStore}from"./dealer-search-results-store-f00291b6.js";import{a as animationManager}from"./animation-manager-2e28abcf.js";import{A as AnimationSequences}from"./animations-8383aa25.js";var handleAnimationRouting=function(){var t={OPENING:openingAction,CLOSING:closingAction,FORWARD:forwardAction,BACKWARDS:backwardAction,UNCHANGED:unchangedAction};var e=getSingleDrawerAction();return t[e]()};function getSingleDrawerAction(){if(isOpening()){return"OPENING"}if(isClosing()){return"CLOSING"}if(isAnimatingForward()){return"FORWARD"}if(isAnimatingBackward()){return"BACKWARDS"}return"UNCHANGED"}var openingAction=function(){animationManager.play(AnimationSequences.OPEN_SINGLE_DRAWER);return{nextRoute:"",currentRoute:getCurrentRoute()}};var closingAction=function(){animationManager.play(AnimationSequences.CLOSE_SINGLE_DRAWER).then((function(){}));return{nextRoute:getCurrentRoute()||"",currentRoute:getAnimatedRoute()||""}};var forwardAction=function(){var t,e;setTimeout((function(){animationManager.play(AnimationSequences.TRANSITION_NEXT_LEVEL_SINGLE_DRAWER)}));return{nextRoute:(t=getCurrentRoute())!==null&&t!==void 0?t:"",currentRoute:(e=getAnimatedRoute())!==null&&e!==void 0?e:""}};var backwardAction=function(){var t,e;if(getCurrentRoute()!==""){setTimeout((function(){animationManager.play(AnimationSequences.TRANSITION_PREVIOUS_LEVEL_SINGLE_DRAWER)}))}return{nextRoute:(t=getAnimatedRoute())!==null&&t!==void 0?t:"",currentRoute:(e=getCurrentRoute())!==null&&e!==void 0?e:""}};var unchangedAction=function(){return{nextRoute:"",currentRoute:getCurrentRoute()}};var isPlayingSingleDrawerAnimation=function(){try{var t=[AnimationSequences.OPEN_SINGLE_DRAWER,AnimationSequences.CLOSE_SINGLE_DRAWER,AnimationSequences.TRANSITION_NEXT_LEVEL_SINGLE_DRAWER,AnimationSequences.TRANSITION_PREVIOUS_LEVEL_SINGLE_DRAWER];return t.some((function(t){try{return animationManager.isPlaying(t)}catch(t){return false}}))}catch(t){return false}};var getCurrentRoute=function(){var t=routerStore.state,e=t.routingKeyHistory,r=t.routingKeyPointer;return e[r]||""};var getAnimatedRoute=function(){var t=routerStore.state,e=t.routingKeyHistory,r=t.animatingPointer;return e[r]||""};var goTo=function(){var t=[];for(var e=0;e<arguments.length;e++){t[e]=arguments[e]}var r=__spreadArray([RoutingKeys.MAIN_MENU],t,true);routerStore.state.routingKeyPointer=t.length;routerStore.state.routingKeyHistory=r};var back=function(){if(!isPlayingSingleDrawerAnimation()){if(findTopLevelRoutingKey(getCurrentRoute())===RoutingKeys.DEALER_SEARCH){dealerSearchResultsStore.state.savedDealerCookie=null}routerStore.state.routingKeyPointer=routerStore.state.routingKeyPointer-1}};var pop=function(){if(isNavigatingBackwards())routerStore.state.routingKeyHistory.pop()};var addRoute=function(t){if(isDesktop(windowService.getBreakpoint())){dispatchEvent("phn-router","mobileMenuItemClick",{bubbles:true,cancelable:false,detail:[constructRoutingKey.apply(void 0,__spreadArray([getCurrentRoute()],t,false))]})}else{var e=__spreadArray(__spreadArray([],routerStore.state.routingKeyHistory,true),[constructRoutingKey.apply(void 0,__spreadArray([getCurrentRoute()],t,false))],false);routerStore.state.routingKeyPointer=e.length-1;routerStore.state.routingKeyHistory=e}};var reset=function(){routerStore.state.routingKeyPointer=-1};var isNavigatingBackwards=function(){return routerStore.state.routingKeyPointer<routerStore.state.routingKeyHistory.length-1};var isAnimatingForward=function(){return routerStore.state.routingKeyPointer>routerStore.state.animatingPointer};var isAnimatingBackward=function(){return routerStore.state.routingKeyPointer<routerStore.state.animatingPointer};var isOpening=function(){return routerStore.state.animatingPointer===RoutingKeyPointers.LEVEL_ZERO&&routerStore.state.routingKeyPointer>=0};var isOpened=function(){return!isClosed()};var isClosed=function(){return routerStore.state.routingKeyPointer===RoutingKeyPointers.LEVEL_ZERO&&routerStore.state.animatingPointer===RoutingKeyPointers.LEVEL_ZERO};var isClosing=function(){return routerStore.state.routingKeyPointer===-1&&routerStore.state.animatingPointer>=0};var syncAnimation=function(){routerStore.state.animatingPointer=routerStore.state.routingKeyPointer};var showBackButton=function(t){var e=routerStore.state.routingKeyHistory.indexOf(t);return e>=RoutingKeyPointers.LEVEL_TWO};export{isClosed as a,isOpening as b,goTo as c,syncAnimation as d,isAnimatingForward as e,back as f,getCurrentRoute as g,handleAnimationRouting as h,isOpened as i,addRoute as j,pop as p,reset as r,showBackButton as s};
//# sourceMappingURL=routing-manager-2bba85b2.js.map