var __awaiter=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function a(e){try{u(i.next(e))}catch(e){o(e)}}function c(e){try{u(i["throw"](e))}catch(e){o(e)}}function u(e){e.done?n(e.value):r(e.value).then(a,c)}u((i=i.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,r,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return u([e,t])}}function u(c){if(i)throw new TypeError("Generator is already executing.");while(a&&(a=0,c[0]&&(n=0)),n)try{if(i=1,r&&(o=c[0]&2?r["return"]:c[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;if(r=0,o)c=[c[0]&2,o.value];switch(c[0]){case 0:case 1:o=c;break;case 4:n.label++;return{value:c[1],done:false};case 5:n.label++;r=c[1];c=[0];continue;case 7:c=n.ops.pop();n.trys.pop();continue;default:if(!(o=n.trys,o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1];o=c;break}if(o&&n.label<o[2]){n.label=o[2];n.ops.push(c);break}if(o[2])n.ops.pop();n.trys.pop();continue}c=t.call(e,n)}catch(e){c=[6,e];r=0}finally{i=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:true}}};import{t as isPromise}from"./navi-error-d2e07707.js";import{w as windowService}from"./window-service-890948e7.js";var shrinkElement=function(e,t,n){var i=n.to,r=i===void 0?100:i;e.style.width="".concat((1-t)*r,"%")};var growElement=function(e,t,n){var i=n.to,r=i===void 0?100:i;e.style.width="".concat(t*r,"%")};var slideOutToRightRelative=function(e,t,n){var i=n.from,r=i===void 0?0:i,o=n.to,a=o===void 0?-100:o;e.style.right="calc(".concat(t*a+r,"%)");e.style.position="relative"};var slideOutToLeftRelative=function(e,t,n){var i=n.from,r=i===void 0?0:i,o=n.to,a=o===void 0?-100:o;e.style.left="calc(".concat(t*a+r,"%)");e.style.position="relative"};var slideInFromLeftRelative=function(e,t,n){var i=n.from,r=i===void 0?-100:i,o=n.to,a=o===void 0?0:o;e.style.left="calc(".concat((1-t)*r+a,"%)");e.style.position="relative"};var slideInFromRightRelative=function(e,t,n){var i=n.from,r=i===void 0?-100:i,o=n.to,a=o===void 0?0:o;e.style.right="calc(".concat((1-t)*r+a,"%)");e.style.position="relative"};var slideInFromRight=function(e,t,n){var i=n.from,r=i===void 0?-100:i,o=n.to,a=o===void 0?0:o;e.style.right="".concat((1-t)*r+a,"px")};var slideInFromLeft=function(e,t,n){var i=n.from,r=i===void 0?-100:i,o=n.to,a=o===void 0?0:o;e.style.left="".concat((1-t)*r+a,"px")};var slideOutToRight=function(e,t,n){var i=n.from,r=i===void 0?0:i,o=n.to,a=o===void 0?-100:o;e.style.right="".concat(t*a+r,"px")};var slideOutToLeft=function(e,t,n){var i=n.from,r=i===void 0?0:i,o=n.to,a=o===void 0?-100:o;e.style.left="".concat(t*a+r,"px")};var slideInFromRightFixed=function(e,t,n){var i=n.from,r=i===void 0?-100:i,o=n.to,a=o===void 0?0:o;e.style.right="calc(".concat((1-t)*r+a,"%)");e.style.position="fixed"};var slideOutToRightFixed=function(e,t,n){var i=n.from,r=i===void 0?0:i,o=n.to,a=o===void 0?-100:o;e.style.right="calc(".concat(t*a+r,"%)");e.style.position="fixed"};var slideInFromLeftFixed=function(e,t,n){var i=n.from,r=i===void 0?-100:i,o=n.to,a=o===void 0?0:o;e.style.left="calc(".concat((1-t)*r+a,"%)");e.style.position="fixed"};var slideOutToLeftFixed=function(e,t,n){var i=n.from,r=i===void 0?0:i,o=n.to,a=o===void 0?-100:o;e.style.left="calc(".concat(t*a+r,"%)");e.style.position="fixed"};var fadeOut=function(e,t,n){var i=n.from,r=i===void 0?1:i,o=n.to,a=o===void 0?0:o;e.style.opacity="".concat((1-t)*r+t*a)};var fadeIn=function(e,t,n){var i=n.from,r=i===void 0?0:i,o=n.to,a=o===void 0?1:o;e.style.opacity="".concat(t*a+(t-1)*r)};var fadeOutBackdrop=function(e,t,n){var i=n.from,r=i===void 0?1:i,o=n.to,a=o===void 0?0:o;e.style.backgroundColor="rgba(0, 0, 0, ".concat((1-t)*r+t*a,")");e.style.opacity="".concat(1-t+t*a)};var fadeInBackdrop=function(e,t,n){var i=n.from,r=i===void 0?0:i,o=n.to,a=o===void 0?1:o;e.style.backgroundColor="rgba(0, 0, 0, ".concat(t*a+(t-1)*r,")");e.style.opacity="".concat(t+(t-1)*r)};var AnimationsAction={slideOutToLeftRelative:slideOutToLeftRelative,slideInFromRightRelative:slideInFromRightRelative,slideInFromLeftRelative:slideInFromLeftRelative,slideOutToRightRelative:slideOutToRightRelative,shrinkElement:shrinkElement,growElement:growElement,slideInFromRight:slideInFromRight,slideInFromLeft:slideInFromLeft,slideOutToRight:slideOutToRight,slideOutToLeft:slideOutToLeft,fadeOut:fadeOut,fadeIn:fadeIn,fadeInBackdrop:fadeInBackdrop,fadeOutBackdrop:fadeOutBackdrop,slideInFromRightFixed:slideInFromRightFixed,slideOutToRightFixed:slideOutToRightFixed,slideInFromLeftFixed:slideInFromLeftFixed,slideOutToLeftFixed:slideOutToLeftFixed};var __rest=undefined&&undefined.__rest||function(e,t){var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0)n[i]=e[i];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++){if(t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r]))n[i[r]]=e[i[r]]}return n};var resetStyle=function(e){e.removeAttribute("style")};var getAnimationEffect=function(e){return AnimationsAction[e]};var timingFunctions={easeInOutSin:function(e){return-(Math.cos(Math.PI*e)-1)/2},easeInOutQuad:function(e){if(e<.5){return 2*e/2}else{return(2-2*(1-e))/2}},linear:function(e){return e<0||e>1?Math.round(e):e},cubicBezierStart:function(e){return cubicBezier(e,.1,0,0,100)},cubicBezierEnd:function(e){return cubicBezier(e,.3,0,1,.8)}};function animationPromiseGenerator(e,t){var n=t.duration,i=n===void 0?300:n,r=t.cleanUpAfterAnimation,o=r===void 0?false:r,a=__rest(t,["duration","cleanUpAfterAnimation"]);return new Promise((function(t){var n;var r=setTimeout((function(){cancelAnimationFrame(n);c()}),i+50);function c(){s(e,1,a);clearTimeout(r);if(typeof o==="function"){var n=o(e);if(isPromise(n)){n.then((function(){return t()}));return}}else if(o===true){resetStyle(e)}t()}var u=performance.now();var s=getAnimationEffect(a.name);function l(t){var r=timingFunctions[a.timingFunction||"linear"];var o=r((t-u)/i);o=Math.round((o+Number.EPSILON)*1e3)/1e3;var f=o>=1;var d=o<1;if(f){return c()}s(e,o,a);if(d){n=windowService.requestAnimationFrame(l)}}n=windowService.requestAnimationFrame(l)}))}function cubicBezier(e,t,n,i,r){return(1-e)*(1-e)*(1-e)*t+3*(1-e)*(1-e)*e*n+3*(1-e)*e*e*i+e*e*e*r}var sequences={};var rootElement=null;function initialize(e){rootElement=e}function register(e,t){sequences[e]=t}function reset(){Object.keys(sequences).forEach((function(e){return delete sequences[e]}))}function play(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){t=sequences[e];if(t===undefined){return[2,new Promise((function(t,n){return n(new Error("Sequence ".concat(e," has not been registered")))}))]}if(!t.running){t.promise=new Promise((function(e,n){t.resolve=function(){t.running=false;e()};t.reject=function(e){t.running=false;n(e)};t.running=true;applyCurrentAnimationSequenceStep(t)}))}return[2,t.promise]}))}))}function finishAnimationSequence(e){var t;e.currentStepIndex=0;(t=e.resolve)===null||t===void 0?void 0:t.call(e,null);e.promise=undefined}function applyCurrentAnimationSequenceStep(e){return __awaiter(this,void 0,void 0,(function(){var t,n,i,r,o,a,c;return __generator(this,(function(u){switch(u.label){case 0:if(e.currentStepIndex>=e.steps.length){finishAnimationSequence(e);return[2]}n=e.steps[e.currentStepIndex];i=[];for(r=0,o=n;r<o.length;r++){a=o[r];i.push(executeAnimation(a))}u.label=1;case 1:u.trys.push([1,3,,4]);return[4,Promise.all(i)];case 2:u.sent();return[3,4];case 3:c=u.sent();(t=e.reject)===null||t===void 0?void 0:t.call(e,c);return[2];case 4:e.currentStepIndex+=1;setTimeout((function(){return applyCurrentAnimationSequenceStep(e)}),0);return[2]}}))}))}function executeAnimation(e){var t=e.onStart,n=e.onEnd,i=e.animation,r=e.elementSelector;return __awaiter(this,void 0,void 0,(function(){var e,o,a,c,u,s,l,e;return __generator(this,(function(f){switch(f.label){case 0:if(rootElement===null){throw new Error("No root element present")}if(!t)return[3,2];e=t();if(!isPromise(e))return[3,2];return[4,e];case 1:f.sent();f.label=2;case 2:o=Array.from(rootElement.querySelectorAll(r));a=[];for(c=0,u=o;c<u.length;c++){s=u[c];l=animationPromiseGenerator(s,i);a.push(l)}return[4,Promise.all(a)];case 3:f.sent();if(!n)return[3,5];e=n();if(!isPromise(e))return[3,5];return[4,e];case 4:f.sent();f.label=5;case 5:return[2]}}))}))}function isPlaying(e){var t=sequences[e];if(t===undefined){throw new Error("Sequence ".concat(e," has not been registered"))}return t.promise!==undefined}function makeSequence(e,t){return{steps:e.map((function(e){return e.map((function(e){return Object.assign(Object.assign({},t),e)}))})),currentStepIndex:0,running:false}}var animationManager={initialize:initialize,play:play,isPlaying:isPlaying,register:register,reset:reset};export{animationManager as a,makeSequence as m};
//# sourceMappingURL=animation-manager-137f1cb8.js.map