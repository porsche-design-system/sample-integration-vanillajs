import{s as splitLocale,E as EventActions,k as findMenuItemById,i as isCountryInOneOfRegions,b as navContentStore,n as navStateStore}from"./nav-content-store-238e6137.js";import{e as getDealerDetailsRoutingKey,a as RoutingKeys,f as findTopLevelRoutingKey,r as removeLastRoutingSegment,c as constructRoutingKey,h as getModelsRoutingKey,g as getLastRoutingSegment}from"./routing-key-808e9d26.js";import{d as dealerSearchResultsStore}from"./dealer-search-results-store-f00291b6.js";import{i as isString,z as getUsername,A as Application,I as IsLoggedIn}from"./helper-76937d0b.js";import{f as featureToggles}from"./feature-toggles-f5a05f06.js";import{a as abTestingService}from"./ab-testing-constructor-service-d4355ec8.js";function getLevel1Items(e,t,n,i,s,a){var r,o;var u=e.dealer,g=e.models,l=e.myPorsche,d=e.vehiclePurchase,R=e.shop,c=e.experience,E=e.services;var y=t.savedDealerCookie,v=t.ppnDealers;var S=navStateStore.state.app;var K=y!==null?v[y.id]:undefined;var I;if(n==="en-SG"&&u.search.outboundLink){I=(r=u.search.outboundLink)===null||r===void 0?void 0:r.link}var f=[RoutingKeys.DEALER_SEARCH];if(K!==undefined&&((o=dealerSearchResultsStore.state.results)===null||o===void 0?void 0:o.length)!=1){f.push(getDealerDetailsRoutingKey(K.ppnDealer.id))}var m=[{elementId:RoutingKeys.MODELS,routingKeys:[RoutingKeys.MODELS],analyticsId:g.id,text:g.text},{elementId:RoutingKeys.VEHICLE_PURCHASE,routingKeys:[RoutingKeys.VEHICLE_PURCHASE],analyticsId:d.id,text:d.text},{elementId:RoutingKeys.SERVICES,routingKeys:[RoutingKeys.SERVICES],analyticsId:E.id,text:E.text},{elementId:RoutingKeys.EXPERIENCE,routingKeys:[RoutingKeys.EXPERIENCE],analyticsId:c.id,text:c.text}];var C={elementId:RoutingKeys.DEALER_SEARCH,routingKeys:f,analyticsId:u.id,text:u.text,link:I,iconRight:n==="en-SG"&&u.search.outboundLink?"none":"arrow-head-right"};if(R!==null&&R.text!==""){var p={elementId:RoutingKeys.SHOP,routingKeys:[RoutingKeys.SHOP],analyticsId:R.id,text:R.text,link:S!==Application.shop?R.link:undefined,datalayerEventAction:EventActions.NAVIGATION_LINK_CLICK,iconRight:"none"};m.splice(2,0,p)}if(isDealerSearchEnabled(n,a)){var L=splitLocale(n).language==="en"?K===null||K===void 0?void 0:K.ppnDealer.name:isString(K===null||K===void 0?void 0:K.ppnDealer.nameLocalized)?K===null||K===void 0?void 0:K.ppnDealer.nameLocalized:K===null||K===void 0?void 0:K.ppnDealer.name;if(isString(L)){C.subtext=L}}else{C.link=u.search.map.link;C.onClick=undefined}m.push(C);if(l!==null){var h=IsLoggedIn(i);var x=h?getUsername(i,l.loggedInFallback):undefined;m.push({elementId:RoutingKeys.MY_PORSCHE,routingKeys:[RoutingKeys.MY_PORSCHE],analyticsId:l.id,text:l.text,subtext:x,showIconModifier:h&&s>0})}return m}function getSideDrawerItems(e,t,n,i,s,a,r){var o=findTopLevelRoutingKey(a);switch(o){case a:break;case RoutingKeys.MODELS:return e.models.series.map((function(e){return{elementId:getModelsRoutingKey(e.id),routingKeys:[getModelsRoutingKey(e.id)],analyticsId:e.id,text:e.name,subtext:e.tags.map((function(e){return e.text})).join(" | "),renderSignatures:true,datalayerEventAction:EventActions.MODEL_RANGE_CLICK}}));case RoutingKeys.SHOP:case RoutingKeys.VEHICLE_PURCHASE:case RoutingKeys.SERVICES:case RoutingKeys.EXPERIENCE:{var u=removeLastRoutingSegment(a);var g=getMenuContent(e,u,o);if(g!==null){return g.children.map((function(e){return{elementId:constructRoutingKey(u,e.id),routingKeys:[constructRoutingKey(u,e.id)],analyticsId:e.id,text:e.text,link:e.link}}))}break}}return getLevel1Items(e,t,n,i,s,r)}function getSideDrawerRoutingKey(e){var t=findTopLevelRoutingKey(e);switch(t){case e:{break}case RoutingKeys.DEALER_SEARCH:{return RoutingKeys.DEALER_SEARCH}case RoutingKeys.MODELS:{return RoutingKeys.MODELS}case RoutingKeys.SHOP:case RoutingKeys.VEHICLE_PURCHASE:case RoutingKeys.SERVICES:case RoutingKeys.EXPERIENCE:{var n=removeLastRoutingSegment(e);return getLastRoutingSegment(n)}}return RoutingKeys.MAIN_MENU}function getMenuContent(e,t,n){var i;var s=e.vehiclePurchase,a=e.experience,r=e.shop,o=e.legacyMore,u=e.services;var g=(i={},i[RoutingKeys.VEHICLE_PURCHASE]=s,i[RoutingKeys.EXPERIENCE]=a,i[RoutingKeys.SHOP]=r,i[RoutingKeys.MORE]=o,i[RoutingKeys.SERVICES]=u,i)[n];if(g===undefined||g===null){return null}if(isString(g.experienceName)){g.children=abTestingService().executeContentChange(g)}var l=getLastRoutingSegment(t);return l===n?g:findMenuItemById(g,l)}function isDealerSearchEnabled(e,t){try{var n=splitLocale(e).country;var i=!isCountryInOneOfRegions(n)&&t;return(featureToggles.isDealerSearchChinaEnabled()||n!=="CN")&&i}catch(e){}return true}function getBackButtonText(e,t){if(!isString(t)){return""}var n=findTopLevelRoutingKey(t);switch(n){case RoutingKeys.MODELS:{return e.models.text}case RoutingKeys.DEALER_SEARCH:if(e.dealer.numberOfDealers===1){return""}return e.dealer.details.backToSearch;case RoutingKeys.SHOP:case RoutingKeys.VEHICLE_PURCHASE:case RoutingKeys.MORE:case RoutingKeys.EXPERIENCE:{var i=getMenuContent(navContentStore.state,t,n);if(i!==null){return i.text}break}}return""}function getHeadlineText(e,t,n){var i;var s;var a=e.dealer,r=e.myPorsche,o=e.models,u=e.vehiclePurchase,g=e.experience,l=e.shop,d=e.legacyMore,R=e.services;var c;switch(n){case RoutingKeys.MORE:case RoutingKeys.SHOP:case RoutingKeys.EXPERIENCE:case RoutingKeys.SERVICES:case RoutingKeys.VEHICLE_PURCHASE:{c=(i={},i[RoutingKeys.VEHICLE_PURCHASE]=u,i[RoutingKeys.EXPERIENCE]=g,i[RoutingKeys.SHOP]=l,i[RoutingKeys.MORE]=d,i[RoutingKeys.SERVICES]=R,i)[n];if(c===undefined){return""}var E=getLastRoutingSegment(t);return E===n?c===null||c===void 0?void 0:c.text:(s=findMenuItemById(c,E))===null||s===void 0?void 0:s.text}case RoutingKeys.SERIES:case RoutingKeys.MODELS:{var y=getLastRoutingSegment(t);c=o.series.find((function(e){return y===e.id}));return c===undefined?o.text:c===null||c===void 0?void 0:c.id}case RoutingKeys.DEALER_SEARCH:{return a.search.text}case RoutingKeys.MY_PORSCHE:{return r===null||r===void 0?void 0:r.text}}return""}function getSubtext(e,t,n){var i=navContentStore.state,s=i.myPorsche,a=i.models;var r=navStateStore.state.loggedInState;if(e===RoutingKeys.MY_PORSCHE){var o=IsLoggedIn(r);return o?getUsername(r,(s===null||s===void 0?void 0:s.loggedInFallback)||""):""}if(e===RoutingKeys.DEALER_SEARCH){var u=dealerSearchResultsStore.state,g=u.savedDealerCookie,l=u.ppnDealers;var d=g!==null?l[g.id]:undefined;var R=n&&splitLocale(n).language==="en"?d===null||d===void 0?void 0:d.ppnDealer.name:isString(d===null||d===void 0?void 0:d.ppnDealer.nameLocalized)?d===null||d===void 0?void 0:d.ppnDealer.nameLocalized:d===null||d===void 0?void 0:d.ppnDealer.name;return g?R:""}if(e===RoutingKeys.MODELS){if(isString(t)){var c=getLastRoutingSegment(t);var E=a.series.find((function(e){return c===e.id}));if(E){return E.tags.map((function(e){return e.text})).join(" | ")}}}return""}export{getBackButtonText as a,getHeadlineText as b,getSubtext as c,getSideDrawerItems as d,getLevel1Items as e,getMenuContent as f,getSideDrawerRoutingKey as g};
//# sourceMappingURL=menu-items-service-0969229a.js.map