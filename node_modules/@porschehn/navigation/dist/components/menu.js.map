{"file":"menu.js","mappings":"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","names":[],"sources":["src/components/menu/saved-vehicles/menu-item-count-indicator.tsx","src/components/menu/saved-vehicles/menu-item-link.tsx","src/components/menu/menu.scss?tag=phn-menu&encapsulation=scoped","src/components/menu/menu.tsx"],"sourcesContent":["import { h, JSX } from '@stencil/core';\n\nexport default function MenuItemCountIndicator({ count }: { count: number }): JSX.Element | null {\n  if (count <= 0) return null;\n\n  return (\n    <phn-p-tag slot=\"suffix\" class=\"menu-item-count\" color=\"notification-info-soft\">\n      {count}\n    </phn-p-tag>\n  );\n}\n","import { Fragment, JSX, h } from '@stencil/core';\nimport { getVehiclePurchaseRoutingKey } from '../../../entities/routing-key';\nimport { TLink } from '../../../components';\nimport { EventActions } from '../../../utility/constants';\nimport MenuItemCountIndicator from './menu-item-count-indicator';\n\nexport default function MenuItemLink({\n  content,\n  count,\n  showSkeleton\n}: {\n  content: TLink | null;\n  count: number;\n  showSkeleton: boolean;\n}): JSX.Element | null {\n  return content ? (\n    <Fragment>\n      <phn-menu-item\n        elementId={getVehiclePurchaseRoutingKey(content.id)}\n        key={content.id}\n        class={`${showSkeleton ? 'skeleton' : 'vehiclepurchase-link'}`}\n        analyticsId={content.id}\n        text={content.text}\n        link={content.link}\n        datalayerEventAction={EventActions.NAVIGATION_LINK_CLICK}\n        role=\"listitem\"\n      >\n        <MenuItemCountIndicator count={count} />\n      </phn-menu-item>\n    </Fragment>\n  ) : null;\n}\n","@import '../../scss';\n\n:host {\n  display: block;\n\n  .skeleton {\n    width: auto;\n    height: p-px-to-rem(24px);\n    background: $pds-theme-light-contrast-low;\n    border-radius: 4px;\n  }\n\n  .skeleton-headline {\n    width: auto;\n    height: p-px-to-rem(50px);\n    background: $pds-theme-light-contrast-low;\n    border-radius: 4px;\n  }\n\n  ul {\n    padding: 0;\n    margin: 0;\n  }\n\n  phn-headline {\n    margin-bottom: p-px-to-rem(36px);\n  }\n\n  phn-menu-item {\n    margin-top: p-px-to-rem(24px);\n\n    @include pds-media-query-min('xs') {\n      margin-top: p-px-to-rem(20px);\n\n      &:first-of-type {\n        margin: 0;\n      }\n    }\n\n    @include pds-media-query-min('l') {\n      margin-top: p-px-to-rem(32px);\n    }\n\n    .vehiclepurchase-link {\n      margin-top: p-px-to-rem(24px);\n\n      @include pds-media-query-min('xs') {\n        margin-top: p-px-to-rem(20px);\n      }\n\n      @include pds-media-query-min('l') {\n        margin-top: p-px-to-rem(30px);\n      }\n\n      .menu-item-count {\n        margin-left: p-px-to-rem(16px);\n      }\n    }\n  }\n}\n","import { Component, Element, Event, EventEmitter, h, Host, JSX, Prop, State } from '@stencil/core';\nimport { TLink, TMenu, TVehiclePurchaseMenu } from '../../entities/content';\nimport { constructRoutingKey } from '../../entities/routing-key';\nimport { EventActions } from '../../utility/constants';\nimport { isString } from '../../utility/helper';\nimport { componentsOnReady } from '../../utility/ready';\nimport { Timeout } from '../../utility/timeout';\nimport { finderStateStore } from '../../state/finder-state-store';\nimport MenuItemLink from './saved-vehicles/menu-item-link';\nimport { addRoute, getCurrentRoute } from '../../services/routing-manager';\n\n@Component({\n  tag: 'phn-menu',\n  styleUrl: 'menu.scss',\n  scoped: true\n})\nexport class Menu {\n  @Prop() item!: TMenu | TVehiclePurchaseMenu;\n  @Prop() showHeadline = true;\n  @Prop() receivedContent = false;\n\n  @State() showSkeleton = true;\n\n  @Element() el!: HTMLPhnMenuElement;\n\n  @Event({ bubbles: true, cancelable: false }) mobileMenuItemClick!: EventEmitter<string[]>;\n\n  componentWillLoad(): void {\n    this.waitForComponentsToLoad();\n  }\n\n  private savedVehiclesPosition = 3;\n\n  private async waitForComponentsToLoad() {\n    await componentsOnReady(this.el, new Timeout(5000));\n    this.showSkeleton = !this.receivedContent;\n  }\n\n  // TODO: fix this\n  private showMenu(childItem: TMenu): void {\n    if (!isString(childItem.link)) {\n      addRoute([childItem.id]);\n    }\n  }\n\n  private getSavedVehiclesContent(content: TMenu | TVehiclePurchaseMenu): TLink | null {\n    const savedVehicles = (content as TVehiclePurchaseMenu).savedVehicles;\n    if (savedVehicles !== undefined) {\n      return savedVehicles;\n    }\n    return null;\n  }\n\n  render(): JSX.Element {\n    const displayedItem = this.item.children.length === 1 ? this.item.children[0] : this.item;\n    const savedVehicles = this.getSavedVehiclesContent(this.item);\n    const { savedVehiclesCount } = finderStateStore.state;\n\n    const menuItems = displayedItem.children.map((childItem) => (\n      <phn-menu-item\n        key={childItem.id}\n        class={`${this.showSkeleton ? 'skeleton' : ''}`}\n        elementId={constructRoutingKey(getCurrentRoute(), childItem.id)}\n        iconRight={childItem.children.length > 0 && !this.showSkeleton ? 'arrow-head-right' : ''}\n        analyticsId={childItem.id}\n        text={childItem.text}\n        link={childItem.link}\n        datalayerEventAction={\n          isString(childItem.link) ? EventActions.NAVIGATION_LINK_CLICK : EventActions.NAVIGATION_CLICK\n        }\n        onClick={() => this.showMenu(childItem)}\n        role=\"listitem\"\n      />\n    ));\n\n    return (\n      <Host role=\"list\">\n        <ul>\n          {menuItems}\n\n          {savedVehicles\n            ? menuItems.splice(\n                this.savedVehiclesPosition,\n                0,\n                <MenuItemLink content={savedVehicles} count={savedVehiclesCount} showSkeleton={this.showSkeleton} />\n              )\n            : null}\n        </ul>\n      </Host>\n    );\n  }\n}\n"],"version":3}