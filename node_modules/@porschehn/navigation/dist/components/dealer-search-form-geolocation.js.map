{"file":"dealer-search-form-geolocation.js","mappings":"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","names":[],"sources":["src/services/maps-service.ts","src/components/dealer-search-form-geolocation/dealer-search-form-geolocation.scss?tag=phn-dealer-search-form-geolocation&encapsulation=scoped","src/components/dealer-search-form-geolocation/dealer-search-form-geolocation.tsx"],"sourcesContent":["/* istanbul ignore file */\nimport { splitLocale } from '../entities/locale';\nimport { LatLong, Prediction } from '../entities/places';\nimport { isString } from '../utility/helper';\nimport windowService from './window-service';\nimport { NaviErrorTypes, NaviError, NaviErrorType } from '../utility/navi-error';\nimport { getRegionSpecificCountry } from '../utility/helpers/dealer-search-helper';\n\nexport class MapsService {\n  private autocompleteService: google.maps.places.AutocompleteService | null = null;\n  private placesService: google.maps.places.PlacesService | null = null;\n  private geocoderService: google.maps.Geocoder | null = null;\n  private getLocation: ((latLong: LatLong) => google.maps.LatLng) | null = null;\n\n  async init(apiKey: string): Promise<void> {\n    try {\n      const google = await windowService.fetchGoogleMapsApi(apiKey);\n      this.autocompleteService = new google.maps.places.AutocompleteService();\n      this.placesService = new google.maps.places.PlacesService(new google.maps.Map(windowService.createDiv()));\n      this.geocoderService = new google.maps.Geocoder();\n      this.getLocation = (latLong: LatLong) => new google.maps.LatLng(latLong.latitude, latLong.longitude);\n    } catch (err) {\n      throw new NaviError(`windowService.fetchGoogleMapsApi failed with error: ${err}`, NaviErrorTypes.GENERAL);\n    }\n  }\n\n  async getPredictions(input: string, locale: string): Promise<Prediction[]> {\n    if (input.length === 0) {\n      return [];\n    }\n    //ToDo: Check what todo if country is no valid iso-code\n    const predictions = await new Promise<google.maps.places.AutocompletePrediction[] | null>((resolve, reject) => {\n      if (this.autocompleteService === null) {\n        reject(new NaviError('autocompleteService is not initialised', NaviErrorTypes.GENERAL));\n        return;\n      }\n\n      this.autocompleteService.getPlacePredictions(\n        {\n          input,\n          componentRestrictions: { country: getRegionSpecificCountry(splitLocale(locale).country) }\n        },\n        (predictions, status) =>\n          status === 'OK'\n            ? resolve(predictions)\n            : reject(\n                new NaviError(`autocompleteService.getPlacePredictions failed with ${status}`, getErrorType(status))\n              )\n      );\n    });\n\n    return (\n      predictions\n        ?.filter(({ place_id, description }) => isString(place_id) && isString(description))\n        .map(({ place_id: id, description: text }) => ({ id, text })) ?? []\n    );\n  }\n\n  async getPlaceCoordinates(placeId: string): Promise<LatLong> {\n    const response = await new Promise<google.maps.places.PlaceResult | null>((resolve, reject) => {\n      if (this.placesService === null) {\n        reject(new NaviError('placesService is not initialised', NaviErrorTypes.GENERAL));\n        return;\n      }\n\n      this.placesService.getDetails(\n        {\n          placeId\n        },\n        (response, status) =>\n          status === 'OK'\n            ? resolve(response)\n            : reject(new NaviError(`placeService.getDetails failed with ${status}`, getErrorType(status)))\n      );\n    });\n\n    const latitude = response?.geometry?.location?.lat();\n    const longitude = response?.geometry?.location?.lng();\n\n    if (typeof latitude !== 'number' || typeof longitude !== 'number') {\n      throw new NaviError(\n        `placesService.getDetails did not find latitude or longitude for placeId: ${placeId}`,\n        NaviErrorTypes.NO_RESULTS\n      );\n    }\n\n    return { latitude, longitude };\n  }\n\n  async getFormattedAddressFromCoordinates(latLong: LatLong): Promise<string> {\n    if (this.getLocation === null) {\n      throw new NaviError('getLocation is not initialised', NaviErrorTypes.GENERAL);\n    }\n\n    const location = this.getLocation(latLong);\n\n    const response = await new Promise<google.maps.GeocoderResult[] | null>((resolve, reject) => {\n      if (this.geocoderService === null) {\n        reject(new NaviError('geocoderService is not initialised', NaviErrorTypes.GENERAL));\n        return;\n      }\n\n      this.geocoderService.geocode({ location }, (response, status) => {\n        status === 'OK'\n          ? resolve(response)\n          : reject(new NaviError(`geocoderService.geocode failed with status ${status}`, getErrorType(status)));\n      });\n    });\n\n    if (response === null || response.length === 0) {\n      throw new NaviError(\n        'geocoderService.geocode did not find the location based on coordinates.',\n        NaviErrorTypes.NO_RESULTS\n      );\n    }\n\n    return response[0].formatted_address;\n  }\n}\n\nexport function getErrorType(status: string): NaviErrorType {\n  switch (status) {\n    case 'INVALID_REQUEST': {\n      return NaviErrorTypes.INVALID_INPUT;\n    }\n    case 'NOT_FOUND':\n    case 'ZERO_RESULTS': {\n      return NaviErrorTypes.NO_RESULTS;\n    }\n    case 'OVER_QUERY_LIMIT':\n    case 'UNKNOWN_ERROR': {\n      return NaviErrorTypes.RETRY;\n    }\n    case 'ERROR':\n    case 'REQUEST_DENIED':\n    default: {\n      return NaviErrorTypes.GENERAL;\n    }\n  }\n}\n\nexport default new MapsService();\n","@import '../../scss/index';\n\n:host {\n  display: block;\n\n  &.skeleton {\n    pointer-events: none;\n    user-select: none;\n\n    & .skeleton-autocomplete-search-field {\n      width: auto;\n      height: p-px-to-rem(50px);\n      background: $pds-theme-light-contrast-low;\n      border-radius: 4px;\n    }\n\n    & .skeleton-or-text {\n      width: auto;\n      height: p-px-to-rem(20px);\n      background: $pds-theme-light-contrast-low;\n      border-radius: 4px 4px 0 0;\n    }\n\n    & .skeleton-geolocation-button {\n      width: auto;\n      height: p-px-to-rem(50px);\n      background: $pds-theme-light-contrast-low;\n      border-radius: 0 0 4px 4px;\n    }\n  }\n\n  .or-container {\n    position: relative;\n    width: 100%;\n    margin-top: p-px-to-rem(20px);\n\n    .geolocation {\n      width: 100%;\n      padding-bottom: 24px;\n    }\n\n    phn-p-text {\n      margin-bottom: p-px-to-rem(4px);\n      color: $pds-theme-light-primary;\n    }\n  }\n\n  .animate-out {\n    animation: fadeOutToTop 0.75s ease-in-out 0s;\n  }\n\n  .input-container {\n    width: 100%;\n  }\n\n  .spinner {\n    display: flex;\n    position: relative;\n    justify-content: center;\n    width: 100%;\n    margin-top: p-px-to-rem(24px);\n  }\n}\n","import { Component, Element, Event, EventEmitter, Fragment, h, Host, Listen, Prop, State } from '@stencil/core';\nimport { LatLong, Prediction } from '../../entities/places';\nimport { splitLocale } from '../../entities/locale';\nimport { navStateStore } from '../../state/nav-state-store';\nimport { getPPNDealers } from '../../services/dealer-service';\nimport { getConfig, getString, isString } from '../../utility/helper';\nimport { dealerSearchResultsStore } from '../../state/dealer-search-results-store';\nimport logger from '../../services/logger';\nimport { getErrorMessage, NaviError, NaviErrorTypes } from '../../utility/navi-error';\nimport globalDataLayerService from '../../services/analytics/global-data-layer-service';\nimport {\n  ClickElementTypes,\n  DEALER_SEARCH_DISPLAY_ELEMENT_ID,\n  DEALER_SEARCH_RESULT_DISPLAY_ELEMENT_ID_DOUBLE_DRAWER,\n  DEALER_SEARCH_TARGET_ELEMENT,\n  ElementTypes,\n  EventActions,\n  GEOLOCATION_BUTTON_SEARCH_TERM\n} from '../../utility/constants';\nimport analyticsManager from '../../services/analytics/analytics-manager';\nimport { RoutingKeys } from '../../entities/routing-key';\nimport mapsService from '../../services/maps-service';\nimport windowService from '../../services/window-service';\nimport { Timeout } from '../../utility/timeout';\nimport { navContentStore } from '../../state/nav-content-store';\nimport ErrorMessage from '../dealer-search-form/error-message';\nimport { componentsOnReady } from '../../utility/ready';\nimport { getRegionSpecificCountry } from '../../utility/helpers/dealer-search-helper';\n\n@Component({\n  tag: 'phn-dealer-search-form-geolocation',\n  styleUrl: 'dealer-search-form-geolocation.scss',\n  scoped: true\n})\nexport class DealerSearchFormGeolocation {\n  @Prop() locale!: string;\n\n  @State() predictions: Prediction[] = [];\n  @State() errorMessage: string | null = null;\n  @State() formErrorMessage: string | null = null;\n  @State() isLoading = false;\n  @State() showGeolocationButton = dealerSearchResultsStore.state.results === null;\n  @State() animateResults = false;\n  @State() searchTerm = dealerSearchResultsStore.state.searchTerm;\n  @State() showSkeleton = true;\n\n  @Event() dealerSearchFormEvent!: EventEmitter;\n  @Event() clearSearchEvent!: EventEmitter;\n  @Event() removeSkeletonOnDealerSearchForm!: EventEmitter;\n\n  @Element() el!: HTMLPhnDealerSearchFormGeolocationElement;\n\n  private debounceTimeout = new Timeout(100);\n\n  @Listen('autoCompleteLoaded')\n  loadedAutoCompleteListener(): void {\n    this.showSkeleton = false;\n  }\n\n  private async waitForComponentsToLoad() {\n    await componentsOnReady(this.el, new Timeout(5000));\n    this.removeSkeletonOnDealerSearchForm.emit();\n  }\n\n  disconnectedCallback(): void {\n    dealerSearchResultsStore.state.searchTerm = this.searchTerm;\n    this.debounceTimeout.cancel();\n  }\n\n  componentWillLoad(): void {\n    this.waitForComponentsToLoad().then(() => {\n      const { error: errorContent } = navContentStore.state;\n\n      mapsService.init('GOOGLE_API_KEY').catch((err: Error) => {\n        logger.error('INIT_MAPS_SERVICE', err);\n        this.formErrorMessage = getErrorMessage(errorContent, err);\n        this.errorMessage = null;\n      });\n    });\n  }\n\n  componentDidLoad(): void {\n    this.emitPageLoadEvent();\n  }\n\n  private emitPageLoadEvent() {\n    const { dealer } = navContentStore.state;\n    globalDataLayerService.pushDataLayerEvent(EventActions.DEALER_SEARCH_SCREEN_LOAD, {\n      componentDisplay: {\n        displayElementId: analyticsManager.calculateDisplayElementId(),\n        displayElementType: analyticsManager.calculateDisplayElementType('', ElementTypes.dealerSearchForm, true),\n        displayElementName: dealer.text\n      }\n    });\n  }\n\n  private emitResultsLoadEvent(searchTerm: string) {\n    const { results } = dealerSearchResultsStore.state;\n    const { dealer: dealerContent } = navContentStore.state;\n\n    const componentSearchSearchTerm = isString(searchTerm) ? searchTerm : GEOLOCATION_BUTTON_SEARCH_TERM;\n    const numberOfResults = results?.length || 0;\n\n    globalDataLayerService.pushDataLayerEvent(EventActions.DEALER_RESULTS_SCREEN_LOAD, {\n      componentDisplay: {\n        displayElementId: analyticsManager.getDealerResultsLoadDisplayElementId(\n          DEALER_SEARCH_RESULT_DISPLAY_ELEMENT_ID_DOUBLE_DRAWER\n        ),\n        displayElementType: analyticsManager.getDealerResultsLoadDisplayElementType(),\n        displayElementName: dealerContent.text\n      },\n      componentSearch: {\n        searchTerm: componentSearchSearchTerm,\n        numberOfResults: numberOfResults\n      }\n    });\n  }\n\n  private async fetchDealers(getSearchTerms: () => Promise<[string, LatLong]>) {\n    const { error: errorContent } = navContentStore.state;\n    try {\n      this.reset();\n      this.isLoading = true;\n\n      const [searchTerm, placeCoordinates] = await getSearchTerms();\n      const { env } = navStateStore.state;\n\n      const ppnDealerSearchResults = await getPPNDealers(\n        env,\n        getConfig(env).DEALER_API_URL,\n        placeCoordinates,\n        getRegionSpecificCountry(splitLocale(this.locale).country)\n      );\n\n      dealerSearchResultsStore.state.searchTerm = searchTerm;\n      dealerSearchResultsStore.state.results = ppnDealerSearchResults.map(({ ppnDealer: dealer }) => dealer.id);\n      dealerSearchResultsStore.state.ppnDealers = ppnDealerSearchResults.reduce(\n        (dealers, dealerSearchResult) => ({\n          ...dealers,\n          [dealerSearchResult.ppnDealer.id]: dealerSearchResult\n        }),\n        dealerSearchResultsStore.state.ppnDealers\n      );\n      this.showGeolocationButton = false;\n    } catch (err) {\n      logger.error('FETCH_DEALERS', err as Error);\n      this.formErrorMessage = getErrorMessage(errorContent, err as Error);\n      this.errorMessage = null;\n    } finally {\n      this.isLoading = false;\n      this.animateResults = true;\n    }\n  }\n\n  private async onSubmit(prediction: Prediction | null) {\n    const { dealer: dealerContent, error: errorContent } = navContentStore.state;\n\n    if (!isString(this.searchTerm)) {\n      this.errorMessage = errorContent.noInput;\n      this.formErrorMessage = '';\n      return;\n    }\n\n    await this.fetchDealers(async () => {\n      if (prediction === null) {\n        throw new NaviError('Dealer search form submitted without prediction', NaviErrorTypes.INVALID_INPUT);\n      }\n\n      this.searchTerm = prediction.text;\n\n      globalDataLayerService.pushDataLayerEvent(EventActions.DEALER_SEARCH_CLICK, {\n        componentClick: {\n          clickElementId: prediction.id,\n          clickElementName: prediction.text,\n          clickElementType: ClickElementTypes.Button,\n          targetElement: DEALER_SEARCH_TARGET_ELEMENT\n        },\n        componentDisplay: {\n          displayElementId: DEALER_SEARCH_DISPLAY_ELEMENT_ID,\n          displayElementType: analyticsManager.calculateDisplayElementType(\n            RoutingKeys.DEALER_SEARCH,\n            ElementTypes.dealerSearchForm\n          ),\n          displayElementName: dealerContent.text\n        },\n        componentSearch: {\n          searchTerm: prediction.text\n        }\n      });\n\n      const placeCoordinates = await mapsService.getPlaceCoordinates(prediction.id);\n\n      return [prediction.text, placeCoordinates];\n    });\n\n    this.emitResultsLoadEvent(this.searchTerm);\n  }\n\n  private async getCurrentLocation(): Promise<void> {\n    const { dealer: dealerContent } = navContentStore.state;\n\n    await this.fetchDealers(async () => {\n      const placeCoordinates = await windowService.getNavigatorLatLong();\n      const formattedAddress = await mapsService.getFormattedAddressFromCoordinates(placeCoordinates);\n\n      this.searchTerm = '';\n\n      globalDataLayerService.pushDataLayerEvent(EventActions.DEALER_GEOLOCATION_CLICK, {\n        componentClick: {\n          clickElementId: dealerContent.search.geolocation.id,\n          clickElementName: dealerContent.search.geolocation.text,\n          clickElementType: ClickElementTypes.Button,\n          targetElement: DEALER_SEARCH_TARGET_ELEMENT\n        },\n        componentDisplay: {\n          displayElementId: DEALER_SEARCH_DISPLAY_ELEMENT_ID,\n          displayElementType: analyticsManager.calculateDisplayElementType(\n            RoutingKeys.DEALER_SEARCH,\n            ElementTypes.dealerSearchForm\n          ),\n          displayElementName: dealerContent.text\n        },\n        componentSearch: {\n          searchTerm: GEOLOCATION_BUTTON_SEARCH_TERM\n        }\n      });\n\n      return [formattedAddress, placeCoordinates];\n    });\n\n    this.emitResultsLoadEvent(GEOLOCATION_BUTTON_SEARCH_TERM);\n  }\n\n  private async onDealerSearchEntry(searchTerm: string): Promise<void> {\n    const { error } = navContentStore.state;\n    try {\n      this.searchTerm = searchTerm;\n      this.errorMessage = null;\n      this.formErrorMessage = null;\n      this.showGeolocationButton = dealerSearchResultsStore.state.results === null;\n      this.predictions = await mapsService.getPredictions(searchTerm, this.locale);\n    } catch (err) {\n      logger.error('GET_PREDICTIONS', err as Error);\n      this.errorMessage = getErrorMessage(error, err as Error);\n      this.predictions = [];\n    }\n  }\n\n  private reset() {\n    this.errorMessage = null;\n    this.formErrorMessage = null;\n    this.animateResults = false;\n    this.showGeolocationButton = true;\n    this.isLoading = false;\n\n    dealerSearchResultsStore.state.results = null;\n  }\n\n  render(): HTMLPhnDealerSearchFormElement {\n    const { dealer: dealerContent } = navContentStore.state;\n    const { results } = dealerSearchResultsStore.state;\n\n    return (\n      <Host class={this.showSkeleton ? 'skeleton' : ''}>\n        <div class=\"input-container\">\n          {this.showSkeleton ? <div class=\"skeleton-autocomplete-search-field\" /> : null}\n          <phn-autocomplete-search-field\n            placeholder={dealerContent.search.form.inputPlaceholder}\n            initialValue={dealerSearchResultsStore.state.searchTerm}\n            predictions={this.predictions}\n            onSearchInput={(e) => this.debounceTimeout.set(() => this.onDealerSearchEntry(e.detail))}\n            onClearSearch={() => {\n              this.predictions = [];\n              dealerSearchResultsStore.state.searchTerm = '';\n              this.searchTerm = '';\n              this.reset();\n              this.clearSearchEvent.emit();\n              this.showGeolocationButton = true;\n            }}\n            onSubmitSearch={(e) => this.onSubmit(e.detail)}\n            errorMessage={getString(this.errorMessage)}\n            style={{ display: this.showSkeleton ? 'none' : '' }}\n          />\n        </div>\n\n        {this.isLoading && (\n          <div class=\"spinner\">\n            <phn-p-spinner size=\"medium\" aria={{ 'aria-label': 'Loading page content' }} />\n          </div>\n        )}\n\n        {this.showGeolocationButton && results === null ? (\n          <Fragment>\n            <div\n              class={`or-container ${this.isLoading ? 'animate-out' : ''}`}\n              onAnimationEnd={() => {\n                this.showGeolocationButton = false;\n              }}\n            >\n              {this.showSkeleton ? <div class=\"skeleton-or-text\" /> : null}\n              <phn-p-text\n                color=\"inherit\"\n                size=\"inherit\"\n                tag=\"div\"\n                data-test-id=\"dealer-search-or-label\"\n                style={{ display: this.showSkeleton ? 'none' : '' }}\n              >\n                {dealerContent.search.or}\n              </phn-p-text>\n              {this.showSkeleton ? <div class=\"skeleton-geolocation-button\" /> : null}\n              <phn-p-button\n                class={'geolocation'}\n                onClick={() => this.getCurrentLocation()}\n                variant=\"tertiary\"\n                icon=\"locate\"\n                style={{ display: this.showSkeleton ? 'none' : '' }}\n              >\n                {dealerContent.search.geolocation.text}\n              </phn-p-button>\n            </div>\n          </Fragment>\n        ) : null}\n\n        {isString(this.formErrorMessage) ? (\n          <ErrorMessage errorMessage={this.formErrorMessage} onDismiss={() => this.reset()} />\n        ) : null}\n      </Host>\n    );\n  }\n}\n"],"version":3}