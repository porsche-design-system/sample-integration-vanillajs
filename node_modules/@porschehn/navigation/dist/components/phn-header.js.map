{"file":"phn-header.js","mappings":"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","names":["uuidv4","contentService.fetchContent"],"sources":["node_modules/uuid/dist/esm-browser/rng.js","node_modules/uuid/dist/esm-browser/stringify.js","node_modules/uuid/dist/esm-browser/native.js","node_modules/uuid/dist/esm-browser/v4.js","src/services/user-information-service.ts","src/services/user-service.ts","src/components/header/header.scss?tag=phn-header&encapsulation=shadow","src/components/header/header.tsx"],"sourcesContent":["// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","import { UserInformation } from '../entities/user-information';\nimport { navStateStore } from '../state/nav-state-store';\nimport { getConfig, getString } from '../utility/helper';\nimport { NaviError, NaviErrorTypes } from '../utility/navi-error';\n\nimport { v4 as uuidv4 } from 'uuid';\n\nexport async function getUserInformation(accessToken: string, locale: string): Promise<UserInformation> {\n  const config = getConfig(navStateStore.state.env);\n  const init = {\n    method: 'GET',\n    headers: {\n      'X-Trace-Id': uuidv4(),\n      Authorization: `${accessToken}`,\n      Accept: 'application/json',\n      Env: navStateStore.state.env\n    }\n  };\n\n  try {\n    const response = await fetch(getString(`${config?.BFF_ENDPOINT}/user-information?locale=${locale}`), init);\n\n    if (!response.ok) {\n      const text = await response.text();\n      throw new Error(text);\n    }\n\n    return await response.json();\n  } catch (error) {\n    throw new NaviError(`Get User information request failed in Frontend with error: ${error}`, NaviErrorTypes.GENERAL);\n  }\n}\n","import { v4 as uuidv4 } from 'uuid';\nimport { Config } from '../entities/config';\nimport { RegionLocales, splitLocale } from '../entities/locale';\nimport { navStateStore } from '../state/nav-state-store';\nimport {\n  DEFAULT_UNREAD_MESSAGES_COUNT,\n  IFRAME_ID,\n  LOGGED_IN_USER_NO_NAME_STATUS,\n  LOGGED_OUT_USER_STATUS\n} from '../utility/constants';\nimport { constructCacheKey, IsLoggedIn, getQueryString, getString, isString } from '../utility/helper';\nimport { NaviError, NaviErrorTypes } from '../utility/navi-error';\nimport globalDataLayerService from './analytics/global-data-layer-service';\nimport windowService from './window-service';\nimport { getUserInformation } from './user-information-service';\nimport { finderStateStore } from '../state/finder-state-store';\n\ntype UserData = {\n  firstName?: string;\n  lastName?: string;\n  porscheId?: string;\n};\n\nexport function getUserNameFromUserData(userData: UserData): string {\n  let status = '';\n\n  const firstName = getString(userData.firstName);\n  const lastName = getString(userData.lastName);\n\n  if (isString(firstName)) {\n    status = firstName;\n\n    if (isString(lastName)) {\n      status += ` ${lastName}`;\n    }\n  } else {\n    if (isString(lastName)) {\n      status = lastName;\n    }\n  }\n  return status;\n}\n\nexport async function getUserIdFromUserData(userData: UserData): Promise<string> {\n  return await windowService.hashString(getString(userData.porscheId));\n}\n\nexport const userDataCache = new Map<string, UserData>();\n\nasync function getUserData(accessToken: string, locale: string, config: Config): Promise<UserData> {\n  const cacheKey = constructCacheKey(accessToken, locale, config.PROFILE_API_URL);\n\n  const cachedUserData = userDataCache.get(cacheKey);\n  if (cachedUserData !== undefined) {\n    return cachedUserData;\n  }\n\n  let userProfileResponse: Response;\n\n  const { language, country } = splitLocale(locale);\n\n  const init = {\n    method: 'GET',\n    headers: {\n      'Accept-Language': `${language}_${country}`,\n      'x-trace-id': uuidv4(),\n      apikey: getString(config.CLIENT_ID),\n      Authorization: `Bearer ${accessToken}`,\n      Accept: 'application/json'\n    }\n  };\n\n  const query = country !== RegionLocales.INTERNATIONAL ? `?country=${country}` : '';\n\n  try {\n    userProfileResponse = await fetch(`${getString(config.PROFILE_API_URL)}${query}`, init);\n  } catch (err) {\n    const errorMessage = `Exception occurred while fetching user info: ${JSON.stringify((err as Error).message)}`;\n    throw new NaviError(errorMessage, NaviErrorTypes.GENERAL);\n  }\n\n  if (userProfileResponse.status === 401) {\n    throw new NaviError('AccessToken has expired', NaviErrorTypes.UNAUTHORIZED);\n  }\n\n  if (!userProfileResponse.ok) {\n    const errorMessage = `Error occurred: ${userProfileResponse.status} ${userProfileResponse.statusText}`;\n    throw new NaviError(errorMessage, NaviErrorTypes.GENERAL);\n  }\n\n  let userData: UserData;\n\n  try {\n    userData = await userProfileResponse.json();\n  } catch (err) {\n    throw new NaviError(`Could not extract json from user profile response: ${err}`, NaviErrorTypes.GENERAL);\n  }\n\n  if (typeof userData !== 'object' || userData === null) {\n    throw new NaviError('Invalid user data object extracted from user profile response', NaviErrorTypes.NO_RESULTS);\n  }\n\n  userDataCache.set(cacheKey, userData);\n\n  return userData;\n}\n\nexport async function initializeUserData(accessToken: string, locale: string, config: Config): Promise<void> {\n  let loggedInState = LOGGED_OUT_USER_STATUS;\n  let userId: string;\n\n  try {\n    const userData = await getUserData(accessToken, locale, config);\n    loggedInState = getUserNameFromUserData(userData) || LOGGED_IN_USER_NO_NAME_STATUS;\n    userId = await getUserIdFromUserData(userData);\n  } catch (err) {\n    if (!(err instanceof NaviError) || err.type !== NaviErrorTypes.UNAUTHORIZED) {\n      loggedInState = LOGGED_IN_USER_NO_NAME_STATUS;\n    }\n\n    navStateStore.state.unreadMessagesCount = DEFAULT_UNREAD_MESSAGES_COUNT;\n    navStateStore.state.loggedInState = loggedInState;\n    throw err;\n  }\n\n  navStateStore.state.loggedInState = loggedInState;\n  globalDataLayerService.setUser(userId, IsLoggedIn(loggedInState));\n\n  const { savedSearches, savedVehicles, unreadMessages } = await getUserInformation(accessToken, locale);\n\n  finderStateStore.state.savedSearchesCount = savedSearches;\n  finderStateStore.state.savedVehiclesCount = savedVehicles;\n  navStateStore.state.unreadMessagesCount = unreadMessages;\n}\n\nexport function initAuthIframe(config: Config): void {\n  const queryString = getQueryString({\n    domain: config.IDENTITY_PROVIDER_URL,\n    clientId: config.IDENTITY_CLIENT_ID,\n    redirect_uri: config.LOGIN_REDIRECT_URL,\n    audience: config.IDENTITY_AUDIENCE\n  });\n\n  windowService.removeElement(IFRAME_ID);\n  windowService.createIframe(IFRAME_ID, `${config.LOGIN_REDIRECT_URL}?${queryString}`);\n}\n","@import '../../scss';\n\n:host {\n  display: block;\n  position: relative;\n  visibility: visible;\n  height: auto !important; // this is here to override the styles from app.scss\n  z-index: $phn-z-index-header;\n\n  .header {\n    min-height: $phn-header-height-base;\n\n    @include pds-media-query-min('xs') {\n      min-height: $phn-header-height-xs;\n    }\n\n    @include pds-media-query-min('s') {\n      min-height: $phn-header-height-s;\n    }\n\n    @include pds-media-query-min('m') {\n      min-height: $phn-header-height-m;\n    }\n\n    @include pds-media-query-min('l') {\n      min-height: $phn-header-height-l;\n    }\n  }\n\n  .limited-width {\n    @include pds-media-query-min('xxl') {\n      max-width: p-px-to-rem(2560px);\n      margin: 0 auto;\n    }\n  }\n\n}\n","import { Component, Event, EventEmitter, h, Listen, Prop, State, Watch } from '@stencil/core';\nimport { TMenu } from '../../components';\nimport { Message } from '../../entities/auth';\nimport { Content } from '../../entities/content';\nimport { getEnvironment } from '../../entities/environment';\nimport { splitLocale } from '../../entities/locale';\nimport globalDataLayerService from '../../services/analytics/global-data-layer-service';\nimport * as contentService from '../../services/content-service';\nimport { getPPNDealer, getPPNDealerByRegion } from '../../services/dealer-service';\nimport featureToggles from '../../services/feature-toggles';\nimport logger from '../../services/logger';\nimport { initAuthIframe, initializeUserData } from '../../services/user-service';\nimport windowService from '../../services/window-service';\nimport { dealerSearchResultsStore } from '../../state/dealer-search-results-store';\nimport { navContentStore } from '../../state/nav-content-store';\nimport { navStateStore } from '../../state/nav-state-store';\nimport { shopStateStore, ShopStateStoreTypes } from '../../state/shop-state-store';\nimport { routerStore } from '../../state/router-store';\nimport {\n  EventActions,\n  IFRAME_ID,\n  NavigationMode,\n  NavigationModeType,\n  NavigationTheme,\n  NavigationThemeType,\n  VERSION\n} from '../../utility/constants';\nimport {\n  buildRoutingKeyHistoryFromContentPath,\n  getConfig,\n  getRootMenuItem,\n  getValidContentPathSegments,\n  isString,\n  sanitizeApp\n} from '../../utility/helper';\nimport { isShopAvailable, loadsShopPropsOnStore } from '../../utility/helpers/shop-helper';\nimport { Timeout } from '../../utility/timeout';\nimport { ApplicationType, Application } from '../../utility/constants/app';\nimport { showDealerSearchDropdown } from '../../utility/helpers/dealer-search-helper';\nimport abTestingService from '../../services/ab-testing/ab-testing-constructor-service';\nimport { initMonitoringSystem } from '../../services/monitoring';\n\n@Component({\n  tag: 'phn-header',\n  styleUrl: 'header.scss',\n  shadow: true,\n  assetsDirs: ['auth']\n})\nexport class Header {\n  @Prop() locale = '';\n  @Prop() env = '';\n  @Prop() clientId = '';\n  @Prop() pageName = '';\n  @Prop() theme: NavigationThemeType = NavigationTheme.light;\n  @Prop() mode: NavigationModeType = NavigationMode.navbar;\n  @Prop() limitedWidth = 'true';\n  @Prop() app: ApplicationType = Application.default;\n  @Prop() initialRoutingPath = '';\n  @Prop() displayLogoOnly = false;\n  @Prop() numberOfShoppingItems = 0;\n  @Prop() wishlistItemsNumber = 0;\n  @Prop() shopInformation = '{ \"wishlistItemsNumber\": 0, \"numberOfShoppingItems\": 0, \"subTotal\": \"0\" }';\n\n  @State() loadingContent = false;\n  @State() receivedContent = false;\n  @State() breakpoint = windowService.getBreakpoint();\n\n  private eventPreventedTimeout = new Timeout(0);\n  private checkedMarketingConsent = false;\n  private loadedToggles = false;\n\n  @Event({ composed: true }) navigationDidLoad!: EventEmitter<void>;\n  @Event({ composed: true, bubbles: true, cancelable: true }) phnLogout!: EventEmitter<void>;\n  @Event({ composed: true, bubbles: true, cancelable: true }) phnLogin!: EventEmitter<void>;\n\n  @Watch('locale')\n  async localeWatchHandler(): Promise<void> {\n    await this.initNavContentStore();\n    globalDataLayerService.setLocale(this.locale);\n    logger.init(this.breakpoint, this.locale);\n  }\n\n  @Watch('pageName')\n  pageNameWatchHandler(): void {\n    globalDataLayerService.setPageName(this.pageName);\n  }\n\n  @Watch('env')\n  async newEnvReceived(): Promise<void> {\n    await this.initEnvironment();\n    await this.initNavContentStore();\n\n    initAuthIframe(getConfig(navStateStore.state.env));\n  }\n\n  @Watch('app')\n  async appWatcher(newValue: string): Promise<void> {\n    navStateStore.state.app = sanitizeApp(newValue);\n  }\n\n  @Watch('breakpoint')\n  breakpointWatcher(): void {\n    logger.init(this.breakpoint, this.locale);\n  }\n\n  @Watch('numberOfShoppingItems')\n  @Watch('wishlistItemsNumber')\n  watchShopVariables(newValue: number, _: string, propName: keyof ShopStateStoreTypes): void {\n    shopStateStore.set(propName, newValue);\n  }\n\n  @Watch('shopInformation')\n  watchShopVariable(information: string, _: string, propName: keyof ShopStateStoreTypes): void {\n    const shopInformation = JSON.parse(information);\n    shopStateStore.set(propName, shopInformation);\n  }\n\n  @Watch('initialRoutingPath')\n  initialRoutingPathWatcher(): void {\n    this.handleInitialRoutingKeyPath();\n  }\n\n  @Listen('resize', { target: 'window', passive: true })\n  resizeHandler(): void {\n    this.breakpoint = windowService.getBreakpoint();\n  }\n\n  @Listen('message', { target: 'window', passive: true })\n  async newAuthMessageReceived(event: Message): Promise<void> {\n    const config = getConfig(navStateStore.state.env);\n\n    if (new URL(config.LOGIN_REDIRECT_URL).origin !== new URL(event.origin).origin) {\n      return;\n    }\n\n    if (isString(event.data.token)) {\n      try {\n        windowService.removeElement(IFRAME_ID);\n        await initializeUserData(event.data.token, this.locale, config);\n      } catch (err) {\n        logger.error('INIT_USER_DATA', err as Error);\n      }\n    }\n  }\n\n  @Listen('loginEvent')\n  async handleLogin(): Promise<void> {\n    const phnLogin = this.phnLogin.emit();\n\n    this.eventPreventedTimeout.set(async () => {\n      if (phnLogin.defaultPrevented) {\n        return;\n      }\n\n      const loginLink = navContentStore.state.myPorsche?.link;\n      if (isString(loginLink)) {\n        windowService.redirectToUrl(loginLink);\n        return;\n      }\n    });\n  }\n\n  @Listen('logoutEvent')\n  async handleLogout(): Promise<void> {\n    const config = getConfig(navStateStore.state.env);\n\n    const phnLogout = this.phnLogout.emit();\n\n    this.eventPreventedTimeout.set(async () => {\n      if (phnLogout.defaultPrevented) {\n        return;\n      }\n\n      // TODO which logout url to use? myporsche? auth0?\n      windowService.redirectToUrl(`${config.IDENTITY_PROVIDER_URL}/v2/logout`);\n      return;\n    });\n  }\n\n  @Listen('ucReady', { target: 'window', passive: true })\n  handleUserCentricsReady(): void {\n    this.checkMarketingConsent();\n  }\n\n  @Listen('ucInit', { target: 'window', passive: true })\n  handleUserCentricsInitalization(): void {\n    this.checkMarketingConsent();\n  }\n\n  @Listen('navigationLoaded')\n  navigationLoadedHandler({ detail: navigationLoaded }: CustomEvent<boolean>): void {\n    windowService.navigationLoaded = navigationLoaded;\n\n    if (navigationLoaded) {\n      this.navigationDidLoad.emit();\n    }\n  }\n\n  private checkMarketingConsent() {\n    if (!this.checkedMarketingConsent) {\n      navStateStore.state.userConsent = false;\n      this.checkedMarketingConsent = windowService.maybeCheckMarketingConsent(() => {\n        navStateStore.state.userConsent = true;\n      });\n    }\n  }\n\n  private async initEnvironment() {\n    navStateStore.state.env = getEnvironment(this.env);\n    navStateStore.state.app = sanitizeApp(this.app);\n    globalDataLayerService.setEnvironment(navStateStore.state.env);\n\n    const config = getConfig(navStateStore.state.env);\n    initAuthIframe(config);\n\n    this.loadedToggles = false;\n    await featureToggles.setFeatures(navStateStore.state.env);\n    this.loadedToggles = true;\n    initMonitoringSystem();\n\n    logger.init(this.breakpoint, this.locale);\n    const shopInformation = JSON.parse(this.shopInformation);\n\n    loadsShopPropsOnStore({\n      wishlistItemsNumber: this.wishlistItemsNumber,\n      numberOfShoppingItems: this.numberOfShoppingItems,\n      shopInformation: shopInformation\n    });\n\n    await abTestingService().init();\n  }\n\n  private async initNavContentStore() {\n    const previouslyReceivedContent = this.receivedContent;\n    this.receivedContent = false;\n    this.loadingContent = true;\n    try {\n      const fetchedLocale = this.locale;\n      const fetchedEnv = navStateStore.state.env;\n\n      const contentForLocale = await contentService.fetchContent(fetchedLocale, this.app);\n\n      // This is to make sure that the response is valid for the current locale and environment\n      // and wasn't made with another locale or enironment\n      if (this.locale === fetchedLocale && navStateStore.state.env === fetchedEnv) {\n        Object.assign(navContentStore.state, contentForLocale);\n        this.receivedContent = true;\n      }\n    } catch (err) {\n      logger.error('FETCH_CONTENT', err as Error);\n\n      if (previouslyReceivedContent) {\n        this.receivedContent = true;\n      }\n    }\n\n    this.loadingContent = false;\n  }\n\n  private async setDealerSearchResultsStore(): Promise<void> {\n    const { savedDealerCookie, ppnDealers } = dealerSearchResultsStore.state;\n\n    if (savedDealerCookie === null || ppnDealers[savedDealerCookie.id] !== undefined) {\n      return;\n    }\n\n    const coordinates = { latitude: savedDealerCookie.latitude, longitude: savedDealerCookie.longitude };\n    const { env } = navStateStore.state;\n\n    try {\n      const { country } = splitLocale(this.locale);\n      const { id: dealerId } = savedDealerCookie;\n\n      const ppnDealer = showDealerSearchDropdown(country)\n        ? await getPPNDealerByRegion(dealerId, country)\n        : await getPPNDealer(env, getConfig(env).DEALER_API_URL, dealerId, coordinates, country);\n\n      dealerSearchResultsStore.state.ppnDealers[savedDealerCookie.id] = ppnDealer;\n    } catch (err) {\n      logger.error('GET_DEALER', err as Error);\n      dealerSearchResultsStore.state.savedDealerCookie = null;\n    }\n  }\n\n  private handleInitialRoutingKeyPath(): void {\n    const [topLevelRoutingKey, ...segments] = this.initialRoutingPath.split('>');\n    const rootContentItem: TMenu | null = getRootMenuItem(navContentStore.state, topLevelRoutingKey as keyof Content);\n\n    if (rootContentItem === null) {\n      return;\n    }\n\n    const validSegments = getValidContentPathSegments(rootContentItem, segments);\n    const routingKeyHistory = buildRoutingKeyHistoryFromContentPath([topLevelRoutingKey, ...validSegments]);\n\n    routerStore.state.initialRoutingKeyHistory = routingKeyHistory;\n    routerStore.state.initialRoutingKeyPointer = routingKeyHistory.length - 1;\n  }\n\n  componentWillLoad(): void {\n    globalDataLayerService.setDefaultProperties(this.locale, this.pageName);\n    (window as any).ncs = navContentStore;\n\n    this.checkMarketingConsent();\n\n    this.initEnvironment()\n      .then(() => Promise.all([this.initNavContentStore(), this.setDealerSearchResultsStore()]))\n      .then(() => Promise.all([abTestingService().loadContentGeneratorExperiments()]))\n      .then(() => {\n        this.handleInitialRoutingKeyPath();\n      });\n  }\n\n  async componentDidLoad(): Promise<void> {\n    windowService.version = VERSION;\n    globalDataLayerService.pushDataLayerEvent(EventActions.GENERAL_LOAD);\n    logger.info('NAVIGATION_LOAD');\n  }\n\n  disconnectedCallback(): void {\n    this.eventPreventedTimeout.cancel();\n  }\n\n  private hasLimitedWidth(): boolean {\n    return this.mode === NavigationMode.hero && this.limitedWidth === 'true' ? true : false;\n  }\n\n  render(): HTMLPhnHeaderElement {\n    if (!this.loadedToggles) {\n      return <div></div>;\n    }\n\n    return (\n      // div needed because conditional styling does not work on Host of shadow component for some unknown reason\n      <div class={this.hasLimitedWidth() ? 'header limited-width' : 'header'}>\n        <phn-wrapper\n          theme={this.theme}\n          mode={this.mode}\n          locale={this.locale}\n          loadingContent={this.loadingContent}\n          receivedContent={this.receivedContent}\n          breakpoint={this.breakpoint}\n          app={sanitizeApp(this.app)}\n          displayLogoOnly={this.displayLogoOnly}\n          limitedWidth={this.hasLimitedWidth()}\n        >\n          {isShopAvailable(this.locale, sanitizeApp(this.app)) ? (\n            <div slot=\"contextual_drawer_header\">\n              <slot name=\"contextual_drawer_header\"></slot>\n            </div>\n          ) : null}\n        </phn-wrapper>\n      </div>\n    );\n  }\n}\n"],"version":3}