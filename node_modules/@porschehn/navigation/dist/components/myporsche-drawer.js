import { h, Fragment, proxyCustomElement, HTMLElement, createEvent, Host } from '@stencil/core/internal/client';
import { c as componentsOnReady, T as Timeout } from './timeout.js';
import { j as getMyPorscheRoutingKey } from './routing-key.js';
import { E as EventActions } from './global-data-layer-service.js';
import { I as IsLoggedIn } from './helper.js';
import { f as finderStateStore } from './finder-state-store.js';
import { n as navStateStore } from './nav-state-store.js';
import { i as isShopAvailable, s as shopStateStore } from './shop-helper.js';
import { n as navContentStore } from './nav-content-store.js';
import { f as featureToggles } from './feature-toggles.js';
import { d as defineCustomElement$2 } from './menu-item.js';
import { d as defineCustomElement$1 } from './myporsche-login.js';

function Links({ content, onLogoutClick, showSkeleton }) {
  const messagesPosition = 1, savedSearchesPosition = 2, savedVehiclesPosition = 3, wishlistPosition = 4;
  const { loggedInState, unreadMessagesCount, app, locale } = navStateStore.state;
  const isLoggedIn = IsLoggedIn(loggedInState);
  const { links, messages, savedSearches, savedVehicles } = content;
  const { savedSearchesCount, savedVehiclesCount } = finderStateStore.state;
  const { wishlistItemsNumber } = shopStateStore.state.shopInformation;
  const { shop } = navContentStore.state;
  const convertedLinks = links.map((link) => (h("div", { class: "myporsche-link-item", key: link.id },
    h("phn-menu-item", { elementId: getMyPorscheRoutingKey(link.id), class: `${showSkeleton ? 'skeleton' : ''}`, analyticsId: link.id, text: link.text, link: link.link, datalayerEventAction: EventActions.NAVIGATION_LINK_CLICK }))));
  convertedLinks.splice(messagesPosition, 0, h(MenuItemCountLink, { content: messages, count: unreadMessagesCount, showSkeleton: showSkeleton }));
  if (savedSearches && savedSearches.text !== '') {
    convertedLinks.splice(savedSearchesPosition, 0, h(MenuItemCountLink, { content: savedSearches, count: savedSearchesCount, showSkeleton: showSkeleton }));
  }
  if (savedVehicles && savedVehicles.text !== '') {
    convertedLinks.splice(savedVehiclesPosition, 0, h(MenuItemCountLink, { content: savedVehicles, count: savedVehiclesCount, showSkeleton: showSkeleton }));
  }
  if (isShopAvailable(locale, app) && (shop === null || shop === void 0 ? void 0 : shop.wishlist) && featureToggles.isShopWishlistToggleActive()) {
    convertedLinks.splice(wishlistPosition, 0, h(MenuItemCountLink, { content: shop.wishlist, count: wishlistItemsNumber, showSkeleton: showSkeleton }));
  }
  if (isLoggedIn) {
    convertedLinks.push(h(LogoutLink, { content: content, onLogoutClick: onLogoutClick, showSkeleton: showSkeleton }));
  }
  return (h("div", { class: "myporsche-links" },
    showSkeleton ? (h("div", { class: "skeleton-menu" }, convertedLinks.map(() => (h("div", { class: "skeleton-menu-item" }))))) : null,
    h("div", { style: { display: showSkeleton ? 'none' : '', width: '100%' } },
      h("div", { class: `${isLoggedIn ? 'logged-in' : ''} myporsche-links-container` }, convertedLinks))));
}
function MenuItemCountLink({ content, count, showSkeleton }) {
  return content ? (h("div", { class: "myporsche-link-item", key: content.id },
    h("phn-menu-item", { elementId: getMyPorscheRoutingKey(content.id), class: `${showSkeleton ? 'skeleton' : ''}`, analyticsId: content.id, text: content.text, link: content.link, datalayerEventAction: EventActions.NAVIGATION_LINK_CLICK },
      h(MenuItemCountIndicator, { count: count })))) : null;
}
function LogoutLink({ content, onLogoutClick, showSkeleton }) {
  const { logout } = content;
  return (h("div", { class: "myporsche-link-item", key: logout.id },
    h("phn-menu-item", { elementId: getMyPorscheRoutingKey(logout.id), class: `myporsche-menu-item logout${showSkeleton ? 'skeleton' : ''}`, analyticsId: logout.id, text: logout.text, onClick: onLogoutClick, datalayerEventAction: EventActions.NAVIGATION_LINK_CLICK })));
}
function MenuItemCountIndicator({ count }) {
  if (count <= 0)
    return null;
  return (h("phn-p-tag", { slot: "suffix", class: "menu-item-count", color: "notification-info-soft" }, count));
}

function Login({ content, showSkeleton }) {
  const { login, more, signup, signupText } = content;
  const { loggedInState } = navStateStore.state;
  const isLoggedIn = IsLoggedIn(loggedInState);
  if (isLoggedIn) {
    return null;
  }
  return (h("div", { class: "myporsche-login" },
    showSkeleton ? (h(Fragment, null,
      h("div", { class: "skeleton-login-container" },
        h("div", { class: "skeleton-login" }),
        h("div", { class: "skeleton-more" })),
      h("div", { class: "skeleton-signup-container" },
        h("div", { class: "skeleton-signup" }, content.signupText)))) : null,
    h("phn-myporsche-login", { login: login, more: more, signup: signup, signupText: signupText, style: { display: showSkeleton ? 'none' : '' } })));
}

const myporscheDrawerCss = "@-webkit-keyframes transition-forward-in-animation{from{left:150%}to{left:0%}}@keyframes transition-forward-in-animation{from{left:150%}to{left:0%}}@-webkit-keyframes transition-backward-in-animation{from{left:-150%}to{left:0%}}@keyframes transition-backward-in-animation{from{left:-150%}to{left:0%}}@-webkit-keyframes single-drawer-transition-forward-in-animation{from{left:100%}to{left:0%}}@keyframes single-drawer-transition-forward-in-animation{from{left:100%}to{left:0%}}@-webkit-keyframes fade-in-animation{from{opacity:0;background-color:rgba(0, 0, 0, 0)}to{opacity:1;background-color:rgba(0, 0, 0, 0.6)}}@keyframes fade-in-animation{from{opacity:0;background-color:rgba(0, 0, 0, 0)}to{opacity:1;background-color:rgba(0, 0, 0, 0.6)}}@-webkit-keyframes slide-in-from-left-absolute{from{left:-1000px}to{left:0px}}@keyframes slide-in-from-left-absolute{from{left:-1000px}to{left:0px}}@-webkit-keyframes slideDown{from{max-height:0}to{max-height:1000px}}@keyframes slideDown{from{max-height:0}to{max-height:1000px}}@-webkit-keyframes slideUp{from{max-height:1000px}to{max-height:0}}@keyframes slideUp{from{max-height:1000px}to{max-height:0}}@-webkit-keyframes slideLeft{from{max-width:0}to{max-width:1000px}}@keyframes slideLeft{from{max-width:0}to{max-width:1000px}}@-webkit-keyframes slideRight{from{max-width:1000px}to{max-width:0}}@keyframes slideRight{from{max-width:1000px}to{max-width:0}}@-webkit-keyframes darken{from{background-color:rgba(0, 0, 0, 0)}to{background-color:rgba(0, 0, 0, 0.8)}}@keyframes darken{from{background-color:rgba(0, 0, 0, 0)}to{background-color:rgba(0, 0, 0, 0.8)}}@-webkit-keyframes lighten{from{background-color:rgba(0, 0, 0, 0.8)}to{background-color:rgba(0, 0, 0, 0)}}@keyframes lighten{from{background-color:rgba(0, 0, 0, 0.8)}to{background-color:rgba(0, 0, 0, 0)}}@-webkit-keyframes fadeInFromBottom{0%{opacity:0;top:36px}100%{opacity:1;top:0px}}@keyframes fadeInFromBottom{0%{opacity:0;top:36px}100%{opacity:1;top:0px}}@-webkit-keyframes fadeOutToTop{0%{opacity:1;bottom:0px}100%{opacity:0;bottom:16px}}@keyframes fadeOutToTop{0%{opacity:1;bottom:0px}100%{opacity:0;bottom:16px}}@-webkit-keyframes slideLeftDoubleDrawer{from{right:-1000px}to{right:0px}}@keyframes slideLeftDoubleDrawer{from{right:-1000px}to{right:0px}}@-webkit-keyframes slideRightDoubleDrawer{from{right:0px}to{right:-1000px}}@keyframes slideRightDoubleDrawer{from{right:0px}to{right:-1000px}}@-webkit-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes fadeOut{0%{opacity:1}100%{opacity:0}}@keyframes fadeOut{0%{opacity:1}100%{opacity:0}}.transition-forward-animation-out.sc-phn-myporsche-drawer{-webkit-transition:left 250ms;transition:left 250ms;position:relative !important;left:-150% !important}.transition-forward-animation-in.sc-phn-myporsche-drawer{position:relative;-webkit-animation:transition-forward-in-animation 250ms;animation:transition-forward-in-animation 250ms}.transition-backward-animation-out.sc-phn-myporsche-drawer{-webkit-transition:left 250ms;transition:left 250ms;position:relative !important;left:150% !important}.transition-backward-animation-in.sc-phn-myporsche-drawer{position:relative !important;-webkit-animation:transition-backward-in-animation 250ms;animation:transition-backward-in-animation 250ms}.slide-out-to-right-fixed.sc-phn-myporsche-drawer{-webkit-transition:left 400ms;transition:left 400ms;position:fixed;left:100% !important}.slide-in-from-right-fixed.sc-phn-myporsche-drawer{position:fixed;-webkit-animation:single-drawer-transition-forward-in-animation 400ms;animation:single-drawer-transition-forward-in-animation 400ms}.phn-flex-col.sc-phn-myporsche-drawer{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.phn-flex-row.sc-phn-myporsche-drawer{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row}.phn-align-center.sc-phn-myporsche-drawer{-ms-flex-align:center;align-items:center}.phn-justify-around.sc-phn-myporsche-drawer{-ms-flex-pack:distribute;justify-content:space-around}.phn-justify-between.sc-phn-myporsche-drawer{-ms-flex-pack:justify;justify-content:space-between}.phn-flex-wrap.sc-phn-myporsche-drawer{-ms-flex-wrap:wrap;flex-wrap:wrap}.sc-phn-myporsche-drawer-h{display:block;margin-top:0}.skeleton.sc-phn-myporsche-drawer-h{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.skeleton.sc-phn-myporsche-drawer-h .skeleton-headline.sc-phn-myporsche-drawer{width:100%;height:2.5rem;background:#d8d8db;border-radius:4px;font-size:1.75rem;line-height:2.5rem;margin-bottom:0.5rem}@media (min-width: 760px){.skeleton.sc-phn-myporsche-drawer-h .skeleton-headline.sc-phn-myporsche-drawer{margin-bottom:0;font-size:1.875rem;line-height:2.5rem}}@media (min-width: 1000px){.skeleton.sc-phn-myporsche-drawer-h .skeleton-headline.sc-phn-myporsche-drawer{font-size:1.75rem;line-height:2.5rem}}@media (min-width: 1300px){.skeleton.sc-phn-myporsche-drawer-h .skeleton-headline.sc-phn-myporsche-drawer{font:normal normal 600 clamp(1.13rem, 0.21vw + 1.08rem, 1.33rem)/calc(6px + 2.125ex) \"Porsche Next\", \"Arial Narrow\", Arial, \"Heiti SC\", SimHei, sans-serif}}.skeleton.sc-phn-myporsche-drawer-h .skeleton-login-container.sc-phn-myporsche-drawer{width:100%;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-direction:column;flex-direction:column;border-radius:4px}@media (min-width: 480px){.skeleton.sc-phn-myporsche-drawer-h .skeleton-login-container.sc-phn-myporsche-drawer{-ms-flex-direction:row;flex-direction:row}}@media (min-width: 760px){.skeleton.sc-phn-myporsche-drawer-h .skeleton-login-container.sc-phn-myporsche-drawer{-ms-flex-direction:column;flex-direction:column}}@media (min-width: 1920px){.skeleton.sc-phn-myporsche-drawer-h .skeleton-login-container.sc-phn-myporsche-drawer{-ms-flex-direction:row;flex-direction:row}}.skeleton.sc-phn-myporsche-drawer-h .skeleton-login-container.sc-phn-myporsche-drawer .skeleton-login.sc-phn-myporsche-drawer{height:3rem;width:100%;margin:2.25rem 0 1rem 0;border-radius:4px;background:#d8d8db}@media (min-width: 480px){.skeleton.sc-phn-myporsche-drawer-h .skeleton-login-container.sc-phn-myporsche-drawer .skeleton-login.sc-phn-myporsche-drawer{margin:2.25rem 0.5rem 1rem 0}}@media (min-width: 760px){.skeleton.sc-phn-myporsche-drawer-h .skeleton-login-container.sc-phn-myporsche-drawer .skeleton-login.sc-phn-myporsche-drawer{margin:0 1rem 1rem 0}}@media (min-width: 1760px){.skeleton.sc-phn-myporsche-drawer-h .skeleton-login-container.sc-phn-myporsche-drawer .skeleton-login.sc-phn-myporsche-drawer{margin:0 1rem 1.4375rem 0}}.skeleton.sc-phn-myporsche-drawer-h .skeleton-login-container.sc-phn-myporsche-drawer .skeleton-more.sc-phn-myporsche-drawer{height:3rem;margin:0 0 1rem 0;width:100%;background:#d8d8db;border-radius:4px}@media (min-width: 480px){.skeleton.sc-phn-myporsche-drawer-h .skeleton-login-container.sc-phn-myporsche-drawer .skeleton-more.sc-phn-myporsche-drawer{margin:2.25rem 0 1rem 0.5rem}}@media (min-width: 760px){.skeleton.sc-phn-myporsche-drawer-h .skeleton-login-container.sc-phn-myporsche-drawer .skeleton-more.sc-phn-myporsche-drawer{margin:0 0 1.4375rem 0}}@media (min-width: 1760px){.skeleton.sc-phn-myporsche-drawer-h .skeleton-login-container.sc-phn-myporsche-drawer .skeleton-more.sc-phn-myporsche-drawer{margin:0 1rem 1.4375rem 0}}.skeleton.sc-phn-myporsche-drawer-h .skeleton-signup-container.sc-phn-myporsche-drawer{padding-bottom:1.5rem;border-radius:4px}.skeleton.sc-phn-myporsche-drawer-h .skeleton-signup.sc-phn-myporsche-drawer{color:transparent;background:#d8d8db;border-radius:4px}.skeleton.sc-phn-myporsche-drawer-h .skeleton-menu.sc-phn-myporsche-drawer{width:100%;height:3rem;border-radius:4px}.skeleton.sc-phn-myporsche-drawer-h .skeleton-menu-item.sc-phn-myporsche-drawer{width:100%;height:1.5rem;background:#d8d8db;margin-top:1.5rem;border-radius:4px}.skeleton.sc-phn-myporsche-drawer-h .skeleton-menu-item.sc-phn-myporsche-drawer:first-of-type{margin-top:0.75rem}.sc-phn-myporsche-drawer-h .myporsche-links.sc-phn-myporsche-drawer{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:center;justify-content:center}.sc-phn-myporsche-drawer-h .myporsche-links.sc-phn-myporsche-drawer .myporsche-links-container.logged-in.sc-phn-myporsche-drawer>.myporsche-link-item.sc-phn-myporsche-drawer:first-child>phn-menu-item.sc-phn-myporsche-drawer{padding-top:0}.sc-phn-myporsche-drawer-h .myporsche-links.sc-phn-myporsche-drawer .myporsche-links-container.sc-phn-myporsche-drawer .myporsche-link-item.sc-phn-myporsche-drawer>phn-menu-item.sc-phn-myporsche-drawer{padding:0.625rem 0 0.625rem 0}@media (min-width: 1920px){.sc-phn-myporsche-drawer-h .myporsche-links.sc-phn-myporsche-drawer .myporsche-links-container.sc-phn-myporsche-drawer .myporsche-link-item.sc-phn-myporsche-drawer>phn-menu-item.sc-phn-myporsche-drawer{padding:1rem 0 1rem 0}}.sc-phn-myporsche-drawer-h .myporsche-links.sc-phn-myporsche-drawer .menu-item-count.sc-phn-myporsche-drawer{margin-left:1rem}.sc-phn-myporsche-drawer-h .headline-container.sc-phn-myporsche-drawer{border-bottom:2px solid #0e0e12}@media (min-width: 480px){.sc-phn-myporsche-drawer-h .headline-container.sc-phn-myporsche-drawer{padding-bottom:0.125rem;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}}@media (min-width: 760px){.sc-phn-myporsche-drawer-h .headline-container.sc-phn-myporsche-drawer{padding-bottom:1rem}}@media (min-width: 1920px){.sc-phn-myporsche-drawer-h .headline-container.sc-phn-myporsche-drawer{padding-bottom:1.5rem}}.sc-phn-myporsche-drawer-h .headline-container.sc-phn-myporsche-drawer .myporsche-headline.sc-phn-myporsche-drawer{font-size:1.75rem;line-height:2.5rem;padding-bottom:0.5rem}@media (min-width: 760px){.sc-phn-myporsche-drawer-h .headline-container.sc-phn-myporsche-drawer .myporsche-headline.sc-phn-myporsche-drawer{padding-bottom:0;font-size:1.875rem;line-height:2.5rem}}@media (min-width: 1000px){.sc-phn-myporsche-drawer-h .headline-container.sc-phn-myporsche-drawer .myporsche-headline.sc-phn-myporsche-drawer{font-size:1.75rem;line-height:2.5rem}}@media (min-width: 1300px){.sc-phn-myporsche-drawer-h .headline-container.sc-phn-myporsche-drawer .myporsche-headline.sc-phn-myporsche-drawer{font:normal normal 600 clamp(1.13rem, 0.21vw + 1.08rem, 1.33rem)/calc(6px + 2.125ex) \"Porsche Next\", \"Arial Narrow\", Arial, \"Heiti SC\", SimHei, sans-serif}}.sc-phn-myporsche-drawer-h .headline-container.sc-phn-myporsche-drawer .headline-divider.sc-phn-myporsche-drawer{padding:0 1.125rem 0 1rem;height:2rem}.sc-phn-myporsche-drawer-h .headline-container.sc-phn-myporsche-drawer .user-container.sc-phn-myporsche-drawer{padding-bottom:1.0625rem;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center}@media (min-width: 480px){.sc-phn-myporsche-drawer-h .headline-container.sc-phn-myporsche-drawer .user-container.sc-phn-myporsche-drawer{padding-bottom:0}}.sc-phn-myporsche-drawer-h .headline-container.sc-phn-myporsche-drawer .user-container.sc-phn-myporsche-drawer phn-p-icon.sc-phn-myporsche-drawer{padding-right:0.4375rem;width:1.25rem;height:1.25rem}.sc-phn-myporsche-drawer-h .headline-container.sc-phn-myporsche-drawer .user-container.sc-phn-myporsche-drawer phn-p-text.sc-phn-myporsche-drawer{font-size:0.75rem}@media (min-width: 480px){.sc-phn-myporsche-drawer-h .headline-container.sc-phn-myporsche-drawer .user-container.sc-phn-myporsche-drawer phn-p-text.sc-phn-myporsche-drawer{padding:0}}.sc-phn-myporsche-drawer-h phn-p-divider.sc-phn-myporsche-drawer{display:block;height:100%;-ms-flex-item-align:center;align-self:center;padding:0 7.4375rem}@media (min-width: 1760px){.sc-phn-myporsche-drawer-h phn-p-divider.sc-phn-myporsche-drawer{padding:0 9.375rem}}";

const MyPorscheDrawer = /*@__PURE__*/ proxyCustomElement(class MyPorscheDrawer extends HTMLElement {
  constructor() {
    super();
    this.__registerHost();
    this.logoutEvent = createEvent(this, "logoutEvent", 7);
    this.showSkeleton = true;
  }
  async waitForComponentsToLoad() {
    await componentsOnReady(this.el, new Timeout(5000));
    this.showSkeleton = false;
  }
  componentWillLoad() {
    this.waitForComponentsToLoad();
  }
  render() {
    const { myPorsche } = navContentStore.state;
    if (!myPorsche)
      return null;
    return (h(Host, { class: this.showSkeleton ? 'skeleton' : '' }, h("div", { class: "phn-flex-col phn-justify-around" }, h(Login, { content: myPorsche, showSkeleton: this.showSkeleton }), h(Links, { content: myPorsche, onLogoutClick: () => this.logoutEvent.emit(), showSkeleton: this.showSkeleton }))));
  }
  get el() { return this; }
  static get style() { return myporscheDrawerCss; }
}, [2, "phn-myporsche-drawer", {
    "showSkeleton": [32]
  }]);
function defineCustomElement() {
  if (typeof customElements === "undefined") {
    return;
  }
  const components = ["phn-myporsche-drawer", "phn-menu-item", "phn-myporsche-login"];
  components.forEach(tagName => { switch (tagName) {
    case "phn-myporsche-drawer":
      if (!customElements.get(tagName)) {
        customElements.define(tagName, MyPorscheDrawer);
      }
      break;
    case "phn-menu-item":
      if (!customElements.get(tagName)) {
        defineCustomElement$2();
      }
      break;
    case "phn-myporsche-login":
      if (!customElements.get(tagName)) {
        defineCustomElement$1();
      }
      break;
  } });
}
defineCustomElement();

export { MyPorscheDrawer as M, defineCustomElement as d };

//# sourceMappingURL=myporsche-drawer.js.map