import { h, proxyCustomElement, HTMLElement, createEvent } from '@stencil/core/internal/client';
import { R as RoutingKeys } from './routing-key.js';
import { A as Application, o as getRightTheme, m as NavigationMode, N as NavigationTheme, b as breakpoint, P as IsKeyboardClick } from './helper.js';
import { g as globalDataLayerService, E as EventActions } from './global-data-layer-service.js';
import { f as featureToggles } from './feature-toggles.js';
import { i as isShopAvailable, s as shopStateStore } from './shop-helper.js';
import { a as animationManager } from './animation-manager.js';
import { n as navContentStore } from './nav-content-store.js';
import { d as defineCustomElement$2 } from './burger-button.js';
import { d as defineCustomElement$1 } from './my-porsche-icon-button.js';

function isPcomSearchAvailable(locale, app) {
  const countryList = ['de-DE', 'en-US', 'en-CN', 'zh-CN'];
  return featureToggles.isPcomSearchToggleActive() && countryList.includes(locale) && app === Application.pcom;
}
function getSearchLink(locale) {
  switch (locale) {
    case 'de-DE':
      return 'https://www.porsche.com/germany/search/';
    case 'en-US':
      return 'https://www.porsche.com/usa/search/';
    case 'en-CN':
      return 'https://www.porsche.com/china/en/search/';
    case 'zh-CN':
      return 'https://www.porsche.com/china/zh/search/';
    default:
      return '';
  }
}

function pureButtonSkeleton() {
  return (h("div", { class: "skeleton-container" },
    h("div", { class: "pure-button-skeleton" })));
}
function burgerButtonSkeleton() {
  return (h("div", { class: "skeleton-container" },
    h("div", { class: "burger-button-skeleton" })));
}

function pcomIcons({ locale, app, mode, theme, isNavigationLoaded }) {
  function sendDataLayerEvent(url) {
    globalDataLayerService.pushDataLayerEvent(EventActions.PCOM_SEARCH_CLICK, {
      componentClick: {
        clickElementId: 'mainmenu.pcom.search',
        clickElementName: 'Pcom Search',
        targetUrl: url
      }
    });
  }
  return {
    leftIcons: isPcomSearchAvailable(locale, app) ? (h("div", { class: "icon" },
      h("phn-p-link-pure", { icon: "search", "hide-label": "true", stretch: "true", aria: "{ 'aria-haspopup': 'dialog', 'aria-label' : 'open the Porsche.com search' }", "data-test-id": "pcom-search-button", target: '_self', href: getSearchLink(locale), onClick: () => {
          sendDataLayerEvent(getSearchLink(locale));
        }, theme: getRightTheme(theme, mode), style: isNavigationLoaded ? {} : { display: 'none' } }),
      !isNavigationLoaded ? pureButtonSkeleton() : null)) : null,
    rightIcons: null
  };
}

function shopIcons({ locale, app, mode, theme, isNavigationLoaded }) {
  function getShoppingCartLink() {
    var _a;
    const shopLink = (_a = navContentStore.state.shop) === null || _a === void 0 ? void 0 : _a.cart;
    if (shopLink !== undefined && shopLink !== '') {
      return `${shopLink}`;
    }
    return '';
  }
  function showShoppingCart() {
    const { numberOfShoppingItems, shopInformation } = shopStateStore.state;
    let numberOfItems = shopInformation.numberOfShoppingItems;
    if (numberOfItems === 0) {
      numberOfItems = numberOfShoppingItems;
    }
    switch (true) {
      case numberOfItems === 0:
        return 'shopping-bag';
      case numberOfItems > 0:
        return 'shopping-bag-filled';
      default:
        return 'shopping-bag';
    }
  }
  function getAriaLabelForShoppingCart() {
    const { shopInformation } = shopStateStore.state;
    return `My shopping bag, ${shopInformation.numberOfShoppingItems} items, estimated subtotal ${shopInformation.subTotal}`;
  }
  return {
    leftIcons: isShopAvailable(locale, app) ? (h("div", { class: "icon" },
      h("phn-p-button-pure", { icon: "search", "hide-label": "true", stretch: "true", aria: "{ 'aria-haspopup': 'dialog', 'aria-label' : 'open the shop search field' }", "data-test-id": "search-button", onClick: () => {
          animationManager.play('openContextualDrawer');
          sendDataLayerEventContextualDrawer();
        }, style: isNavigationLoaded ? {} : { display: 'none' }, theme: getRightTheme(theme, mode) }),
      !isNavigationLoaded ? pureButtonSkeleton() : null)) : null,
    rightIcons: isShopAvailable(locale, app) ? (h("div", { class: "icon" },
      h("phn-p-link-pure", { target: '_self', "hide-label": "true", icon: "none", theme: getRightTheme(theme, mode), style: isNavigationLoaded ? {} : { display: 'none' }, class: "shopping-cart-link", "data-test-id": "shopping-cart-link", onClick: () => {
          sendDataLayerEventShoppingCart(getShoppingCartLink());
        } },
        h("a", { href: getShoppingCartLink(), "aria-label": getAriaLabelForShoppingCart() },
          h("div", { class: "icon-flex" },
            h(ShoppingCartCount, { styleClass: "shopping-item-count", theme: theme, mode: mode }),
            h("phn-p-icon", { theme: getRightTheme(theme, mode), name: showShoppingCart(), "data-test-id": "shopping-cart-link-icon" })))),
      !isNavigationLoaded ? pureButtonSkeleton() : null)) : null
  };
}
const ShoppingCartCount = ({ styleClass, theme, mode }) => {
  const shoppingItemCountOver99 = '+99';
  const { numberOfShoppingItems, shopInformation } = shopStateStore.state;
  let numberOfItems = shopInformation.numberOfShoppingItems;
  if (numberOfItems === 0) {
    numberOfItems = numberOfShoppingItems;
  }
  const displayedCount = numberOfItems < 99 ? numberOfItems : shoppingItemCountOver99;
  if (numberOfItems <= 0)
    return '';
  return (h("span", { class: styleClass, style: mode === NavigationMode.hero && theme === NavigationTheme.dark ? { color: 'black' } : { color: 'white' } }, displayedCount));
};
function sendDataLayerEventContextualDrawer() {
  globalDataLayerService.pushDataLayerEvent(EventActions.CONTEXTUAL_BUTTON_CLICK, {
    componentClick: {
      clickElementId: 'mainmenu.shop.search',
      clickElementName: 'Shop search'
    }
  });
}
function sendDataLayerEventShoppingCart(url) {
  globalDataLayerService.pushDataLayerEvent(EventActions.CONTEXTUAL_BUTTON_CLICK, {
    componentClick: {
      clickElementId: 'mainmenu.shop.shoppingbag',
      clickElementName: 'Shopping cart',
      targetUrl: url
    }
  });
}

const level0IconsCss = "@-webkit-keyframes slideDown{from{max-height:0}to{max-height:1000px}}@keyframes slideDown{from{max-height:0}to{max-height:1000px}}@-webkit-keyframes slideUp{from{max-height:1000px}to{max-height:0}}@keyframes slideUp{from{max-height:1000px}to{max-height:0}}@-webkit-keyframes slideLeft{from{max-width:0}to{max-width:1000px}}@keyframes slideLeft{from{max-width:0}to{max-width:1000px}}@-webkit-keyframes slideRight{from{max-width:1000px}to{max-width:0}}@keyframes slideRight{from{max-width:1000px}to{max-width:0}}@-webkit-keyframes darken{from{background-color:rgba(0, 0, 0, 0)}to{background-color:rgba(0, 0, 0, 0.8)}}@keyframes darken{from{background-color:rgba(0, 0, 0, 0)}to{background-color:rgba(0, 0, 0, 0.8)}}@-webkit-keyframes lighten{from{background-color:rgba(0, 0, 0, 0.8)}to{background-color:rgba(0, 0, 0, 0)}}@keyframes lighten{from{background-color:rgba(0, 0, 0, 0.8)}to{background-color:rgba(0, 0, 0, 0)}}@-webkit-keyframes fadeInFromBottom{0%{opacity:0;top:36px}100%{opacity:1;top:0px}}@keyframes fadeInFromBottom{0%{opacity:0;top:36px}100%{opacity:1;top:0px}}@-webkit-keyframes fadeOutToTop{0%{opacity:1;bottom:0px}100%{opacity:0;bottom:16px}}@keyframes fadeOutToTop{0%{opacity:1;bottom:0px}100%{opacity:0;bottom:16px}}@-webkit-keyframes slideLeftDoubleDrawer{from{right:-1000px}to{right:0px}}@keyframes slideLeftDoubleDrawer{from{right:-1000px}to{right:0px}}@-webkit-keyframes slideRightDoubleDrawer{from{right:0px}to{right:-1000px}}@keyframes slideRightDoubleDrawer{from{right:0px}to{right:-1000px}}@-webkit-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes fadeOut{0%{opacity:1}100%{opacity:0}}@keyframes fadeOut{0%{opacity:1}100%{opacity:0}}.phn-flex-col.sc-phn-level-0-icons{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.phn-flex-row.sc-phn-level-0-icons{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row}.phn-align-center.sc-phn-level-0-icons{-ms-flex-align:center;align-items:center}.phn-justify-around.sc-phn-level-0-icons{-ms-flex-pack:distribute;justify-content:space-around}.phn-justify-between.sc-phn-level-0-icons{-ms-flex-pack:justify;justify-content:space-between}.phn-flex-wrap.sc-phn-level-0-icons{-ms-flex-wrap:wrap;flex-wrap:wrap}.contextual-icons.sc-phn-level-0-icons{display:grid;grid-template-columns:1fr auto 1fr;grid-template-rows:1fr;gap:0px 0px;grid-template-areas:\"left center right\";width:100%}.contextual-icons.sc-phn-level-0-icons div.left-icons.sc-phn-level-0-icons,.contextual-icons.sc-phn-level-0-icons div.right-icons.sc-phn-level-0-icons{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center}.contextual-icons.sc-phn-level-0-icons div.left-icons.sc-phn-level-0-icons{grid-area:left;justify-self:start}.contextual-icons.sc-phn-level-0-icons-s>*,.contextual-icons .sc-phn-level-0-icons-s>*{grid-area:center;justify-self:center}.contextual-icons.sc-phn-level-0-icons div.right-icons.sc-phn-level-0-icons{grid-area:right;justify-self:end}.contextual-icons.sc-phn-level-0-icons .icon-flex.sc-phn-level-0-icons{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center}.contextual-icons.sc-phn-level-0-icons div.icon.sc-phn-level-0-icons{position:relative;overflow:hidden;padding:0.375rem}.contextual-icons.sc-phn-level-0-icons div.icon.sc-phn-level-0-icons .shopping-cart-link.sc-phn-level-0-icons{position:relative;z-index:2}.contextual-icons.sc-phn-level-0-icons div.icon.sc-phn-level-0-icons .shopping-item-count.sc-phn-level-0-icons{position:absolute;z-index:12;font-size:7px;font-weight:600;line-height:28px;-ms-flex-pack:center;justify-content:center}@media (min-width: 1000px){.contextual-icons.sc-phn-level-0-icons div.icon.sc-phn-level-0-icons{padding:0.5rem}}@media (min-width: 1760px){.contextual-icons.sc-phn-level-0-icons div.icon.sc-phn-level-0-icons{padding:0.75rem}}.skeleton-container.sc-phn-level-0-icons{-ms-flex:1;flex:1;display:-ms-flexbox;display:flex;height:28px}.skeleton-container.sc-phn-level-0-icons .burger-button-skeleton.sc-phn-level-0-icons{margin-right:0.375rem;width:1.5rem;height:1.5rem;border-radius:4px;background:#d8d8db}@media (min-width: 760px){.skeleton-container.sc-phn-level-0-icons .burger-button-skeleton.sc-phn-level-0-icons{width:4.75rem;height:1.5rem}}.skeleton-container.sc-phn-level-0-icons .pure-button-skeleton.sc-phn-level-0-icons{width:1.5rem;height:1.5rem;border-radius:4px;background:#d8d8db}";

const Level0Icons = /*@__PURE__*/ proxyCustomElement(class Level0Icons extends HTMLElement {
  constructor() {
    super();
    this.__registerHost();
    this.openDrawer = createEvent(this, "openDrawer", 7);
    this.locale = undefined;
    this.theme = NavigationTheme.light;
    this.mode = NavigationMode.navbar;
    this.app = Application.default;
    this.breakpoint = undefined;
    this.isLoading = undefined;
    this.isNavigationLoaded = undefined;
  }
  render() {
    const contextualIconsProps = {
      locale: this.locale,
      app: this.app,
      mode: this.mode,
      theme: this.theme,
      isNavigationLoaded: this.isNavigationLoaded
    };
    const IconsStrategies = {
      pcom: () => pcomIcons(contextualIconsProps),
      shop: () => shopIcons(contextualIconsProps),
      default: () => ({ leftIcons: null, rightIcons: null })
    };
    const iconsStrategy = IconsStrategies[this.app];
    const contextualIcons = iconsStrategy();
    const hasMarketPorscheID = navContentStore.state.myPorsche;
    return (h("div", { class: "contextual-icons" }, h("div", { class: "left-icons" }, h("phn-burger-button", { theme: this.theme, mode: this.mode, hideLabel: isPcomSearchAvailable(this.locale, this.app) || isShopAvailable(this.locale, this.app)
        ? this.breakpoint <= breakpoint.xs
        : this.breakpoint < breakpoint.xs, alignLabel: 'right', isLoading: this.isLoading, onClick: (e) => {
        this.openDrawer.emit({ initialRoutingKey: '', isKeyboardClick: IsKeyboardClick(e) });
      }, style: this.isNavigationLoaded ? {} : { display: 'none' } }), !this.isNavigationLoaded ? burgerButtonSkeleton() : null, this.breakpoint <= breakpoint.xs ? contextualIcons.leftIcons : null), h("slot", null), h("div", { class: "right-icons" }, this.breakpoint > breakpoint.xs ? contextualIcons.leftIcons : null, contextualIcons.rightIcons, hasMarketPorscheID ? (h("div", { class: "icon" }, h("phn-my-porsche-icon-button", { mode: this.mode, theme: this.theme, onClick: (e) => {
        this.openDrawer.emit({
          initialRoutingKey: RoutingKeys.MY_PORSCHE,
          isKeyboardClick: IsKeyboardClick(e)
        });
      }, style: this.isNavigationLoaded ? {} : { display: 'none' } }), !this.isNavigationLoaded ? pureButtonSkeleton() : null)) : null)));
  }
  static get style() { return level0IconsCss; }
}, [6, "phn-level-0-icons", {
    "locale": [1],
    "theme": [1],
    "mode": [1],
    "app": [1],
    "breakpoint": [2],
    "isLoading": [4, "is-loading"],
    "isNavigationLoaded": [4, "is-navigation-loaded"]
  }]);
function defineCustomElement() {
  if (typeof customElements === "undefined") {
    return;
  }
  const components = ["phn-level-0-icons", "phn-burger-button", "phn-my-porsche-icon-button"];
  components.forEach(tagName => { switch (tagName) {
    case "phn-level-0-icons":
      if (!customElements.get(tagName)) {
        customElements.define(tagName, Level0Icons);
      }
      break;
    case "phn-burger-button":
      if (!customElements.get(tagName)) {
        defineCustomElement$2();
      }
      break;
    case "phn-my-porsche-icon-button":
      if (!customElements.get(tagName)) {
        defineCustomElement$1();
      }
      break;
  } });
}
defineCustomElement();

export { Level0Icons as L, defineCustomElement as d };

//# sourceMappingURL=level-0-icons.js.map