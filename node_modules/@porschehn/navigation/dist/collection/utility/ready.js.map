{"version":3,"file":"ready.js","sourceRoot":"","sources":["../../../src/utility/ready.ts"],"names":[],"mappings":"AACA,OAAO,aAAa,MAAM,4BAA4B,CAAC;AAGvD,MAAM,CAAC,KAAK,UAAU,iBAAiB,CACrC,MAA0B,EAC1B,OAAgB,EAChB,GAAG,SAAmB;EAEtB,IAAI,MAAM,KAAK,IAAI,EAAE;IACnB,OAAO,IAAI,CAAC;GACb;EACD,MAAM,cAAc,GAAG,KAAK,EAAE,QAAiB,EAAE,EAAE;IACjD,MAAM,EAAE,GAAG,MAAM,aAAa,CAAC,cAAc,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;IAEhE,IAAI,OAAO,CAAC,EAAyB,aAAzB,EAAE,uBAAF,EAAE,CAAyB,gBAAgB,CAAA,KAAK,UAAU,EAAE;MACtE,MAAO,EAAyB,CAAC,gBAAgB,EAAE,CAAC;KACrD;IAED,OAAO,EAAE,CAAC;EACZ,CAAC,CAAC;EAEF,MAAM,eAAe,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,cAAc,EAAE,CAAC,CAAC;EAElG,MAAM,KAAK,GAAG,IAAI,OAAO,CAAO,CAAC,OAAO,EAAE,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,IAAI,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;EACrF,OAAO,OAAO,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC;AAC7D,CAAC","sourcesContent":["import { HTMLStencilElement } from '@stencil/core/internal';\nimport windowService from '../services/window-service';\nimport { Timeout } from './timeout';\n\nexport async function componentsOnReady(\n  parent: HTMLElement | null,\n  timeout: Timeout,\n  ...selectors: string[]\n): Promise<HTMLElement[] | null> {\n  if (parent === null) {\n    return null;\n  }\n  const waitForElement = async (selector?: string) => {\n    const el = await windowService.waitForElement(parent, selector);\n\n    if (typeof (el as HTMLStencilElement)?.componentOnReady === 'function') {\n      await (el as HTMLStencilElement).componentOnReady();\n    }\n\n    return el;\n  };\n\n  const waitForElements = selectors.length > 0 ? selectors.map(waitForElement) : [waitForElement()];\n\n  const timer = new Promise<null>((resolve) => timeout.set(async () => resolve(null)));\n  return Promise.race([Promise.all(waitForElements), timer]);\n}\n"]}