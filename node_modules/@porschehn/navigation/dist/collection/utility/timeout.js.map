{"version":3,"file":"timeout.js","sourceRoot":"","sources":["../../../src/utility/timeout.ts"],"names":[],"mappings":"AAAA,MAAM,OAAO,OAAO;EAGlB,YAAoB,KAAa;IAAb,UAAK,GAAL,KAAK,CAAQ;IAFzB,UAAK,GAA0B,IAAI,CAAC;EAER,CAAC;EAErC,GAAG,CAAI,EAAoB;IACzB,IAAI,CAAC,MAAM,EAAE,CAAC;IAEd,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC,KAAK,IAAI,EAAE;MACjC,MAAM,EAAE,EAAE,CAAC;MACX,IAAI,CAAC,MAAM,EAAE,CAAC;IAChB,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;EACjB,CAAC;EAED,MAAM;IACJ,IAAI,IAAI,CAAC,KAAK,KAAK,IAAI,EAAE;MACvB,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;MAEzB,IAAI,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,KAAK,UAAU,EAAE;QAC1C,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;OACpB;MAED,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;KACnB;EACH,CAAC;CACF","sourcesContent":["export class Timeout {\n  private timer: NodeJS.Timeout | null = null;\n\n  constructor(private delay: number) {}\n\n  set<T>(cb: () => Promise<T>): void {\n    this.cancel();\n\n    this.timer = setTimeout(async () => {\n      await cb();\n      this.cancel();\n    }, this.delay);\n  }\n\n  cancel(): void {\n    if (this.timer !== null) {\n      clearTimeout(this.timer);\n\n      if (typeof this.timer.unref === 'function') {\n        this.timer.unref();\n      }\n\n      this.timer = null;\n    }\n  }\n}\n"]}