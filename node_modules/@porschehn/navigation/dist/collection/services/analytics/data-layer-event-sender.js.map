{"version":3,"file":"data-layer-event-sender.js","sourceRoot":"","sources":["../../../../src/services/analytics/data-layer-event-sender.ts"],"names":[],"mappings":"AAAA,OAAO,EAAoB,iBAAiB,EAAE,YAAY,EAAe,YAAY,EAAE,MAAM,yBAAyB,CAAC;AACvH,OAAO,sBAAsB,MAAM,6BAA6B,CAAC;AACjE,OAAO,gBAAgB,MAAM,qBAAqB,CAAC;AACnD,OAAO,EAAE,wBAAwB,EAAE,MAAM,4BAA4B,CAAC;AAYtE,MAAM,UAAU,kBAAkB,CAAC,EACjC,oBAAoB,GAAG,YAAY,CAAC,gBAAgB,EACpD,WAAW,EACX,IAAI,EACJ,IAAI,EACJ,SAAS,EACT,gBAAgB,EAChB,yBAAyB,GAAG,EAAE,EACL;EACzB,sBAAsB,CAAC,kBAAkB,CAAC,oBAAoB,gCAC5D,cAAc,kBACZ,cAAc,EAAE,WAAW,EAC3B,gBAAgB,EAAE,IAAI,EACtB,aAAa,EAAE,gBAAgB,CAAC,qBAAqB,CAAC,SAAS,EAAE,IAAI,CAAC,EACtE,gBAAgB,IACb,CAAC,gBAAgB,KAAK,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,GAE7E,gBAAgB,EAAE;MAChB,gBAAgB,EAAE,gBAAgB,CAAC,yBAAyB,CAAC,SAAS,CAAC;MACvE,kBAAkB,EAAE,gBAAgB,CAAC,2BAA2B,CAC9D,wBAAwB,CAAC,SAAS,CAAC,EACnC,YAAY,CAAC,QAAQ,CACtB;MACD,kBAAkB,EAAE,IAAI;KACzB,IACE,yBAAyB,GACzB,CAAC,oBAAoB,KAAK,YAAY,CAAC,iBAAiB;IACzD,CAAC,CAAC;MACE,GAAG,EAAE;QACH,cAAc,EAAE,IAAI,CAAC,WAAW,EAAE;OACnC;KACF;IACH,CAAC,CAAC,EAAE,CAAC,EACP,CAAC;AACL,CAAC","sourcesContent":["import { ClickElementType, ClickElementTypes, ElementTypes, EventAction, EventActions } from '../../utility/constants';\nimport globalDataLayerService from './global-data-layer-service';\nimport analyticsManager from './analytics-manager';\nimport { removeLastRoutingSegment } from '../../entities/routing-key';\nimport { TDataLayer } from '@porsche/globaldatalayer-events/projects/pcom/all/types';\n\ntype DataLayerEventSenderType = {\n  datalayerEventAction: EventAction;\n  analyticsId: string;\n  text: string;\n  link: string;\n  elementId: string;\n  clickElementType: ClickElementType;\n  customDatalayerProperties: TDataLayer;\n};\nexport function sendDataLayerEvent({\n  datalayerEventAction = EventActions.NAVIGATION_CLICK,\n  analyticsId,\n  text,\n  link,\n  elementId,\n  clickElementType,\n  customDatalayerProperties = {}\n}: DataLayerEventSenderType): void {\n  globalDataLayerService.pushDataLayerEvent(datalayerEventAction, {\n    componentClick: {\n      clickElementId: analyticsId,\n      clickElementName: text,\n      targetElement: analyticsManager.getModelTargetElement(elementId, text),\n      clickElementType,\n      ...(clickElementType === ClickElementTypes.Link ? { targetUrl: link } : {})\n    },\n    componentDisplay: {\n      displayElementId: analyticsManager.calculateDisplayElementId(elementId),\n      displayElementType: analyticsManager.calculateDisplayElementType(\n        removeLastRoutingSegment(elementId),\n        ElementTypes.menuItem\n      ),\n      displayElementName: text\n    },\n    ...customDatalayerProperties,\n    ...(datalayerEventAction === EventActions.MODEL_RANGE_CLICK\n      ? {\n          car: {\n            modelRangeName: text.toLowerCase()\n          }\n        }\n      : {})\n  });\n}\n"]}