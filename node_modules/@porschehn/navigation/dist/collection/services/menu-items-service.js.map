{"version":3,"file":"menu-items-service.js","sourceRoot":"","sources":["../../../src/services/menu-items-service.ts"],"names":[],"mappings":"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","sourcesContent":["import { Content, findMenuItemById, Series, TMenu, TShopMenu } from '../entities/content';\nimport { isCountryInOneOfRegions, splitLocale } from '../entities/locale';\nimport {\n  constructRoutingKey,\n  findTopLevelRoutingKey,\n  getDealerDetailsRoutingKey,\n  getLastRoutingSegment,\n  getModelsRoutingKey,\n  removeLastRoutingSegment,\n  RoutingKey,\n  RoutingKeys\n} from '../entities/routing-key';\nimport { DealerSearchResults, dealerSearchResultsStore } from '../state/dealer-search-results-store';\nimport { navContentStore } from '../state/nav-content-store';\nimport { navStateStore } from '../state/nav-state-store';\nimport { EventAction, EventActions } from '../utility/constants';\nimport { Application } from '../utility/constants/app';\nimport { getUsername, IsLoggedIn, isString } from '../utility/helper';\nimport featureToggles from './feature-toggles';\nimport abTestingService from './ab-testing/ab-testing-constructor-service';\n\nexport type MenuItemProps = {\n  elementId: string;\n  routingKeys: string[];\n  analyticsId: string;\n  text: string;\n  link?: string;\n  subtext?: string;\n  iconRight?: string;\n  showIconModifier?: boolean;\n  datalayerEventAction?: EventAction;\n  onClick?: () => void;\n};\n\nexport function getLevel1Items(\n  content: Content,\n  dealerSearchResults: DealerSearchResults,\n  locale: string,\n  loggedInState: string,\n  unreadMessagesCount: number,\n  userConsentGiven: boolean\n): MenuItemProps[] {\n  const { dealer, models, myPorsche, vehiclePurchase, shop, experience, services } = content;\n  const { savedDealerCookie, ppnDealers } = dealerSearchResults;\n  const { app } = navStateStore.state;\n  const savedDealer = savedDealerCookie !== null ? ppnDealers[savedDealerCookie.id] : undefined;\n\n  // outbound link needed for Singapore market\n  let outboundLink;\n  if (locale === 'en-SG' && dealer.search.outboundLink) {\n    outboundLink = dealer.search.outboundLink?.link;\n  }\n\n  const dealerRoutingKeys: string[] = [RoutingKeys.DEALER_SEARCH];\n\n  if (savedDealer !== undefined && dealerSearchResultsStore.state.results?.length != 1) {\n    dealerRoutingKeys.push(getDealerDetailsRoutingKey(savedDealer.ppnDealer.id));\n  }\n\n  const menu: MenuItemProps[] = [\n    {\n      elementId: RoutingKeys.MODELS,\n      routingKeys: [RoutingKeys.MODELS],\n      analyticsId: models.id,\n      text: models.text\n    },\n    {\n      elementId: RoutingKeys.VEHICLE_PURCHASE,\n      routingKeys: [RoutingKeys.VEHICLE_PURCHASE],\n      analyticsId: vehiclePurchase.id,\n      text: vehiclePurchase.text\n    },\n    {\n      elementId: RoutingKeys.SERVICES,\n      routingKeys: [RoutingKeys.SERVICES],\n      analyticsId: services.id,\n      text: services.text\n    },\n    {\n      elementId: RoutingKeys.EXPERIENCE,\n      routingKeys: [RoutingKeys.EXPERIENCE],\n      analyticsId: experience.id,\n      text: experience.text\n    }\n  ];\n\n  const dealerSearch: MenuItemProps = {\n    elementId: RoutingKeys.DEALER_SEARCH,\n    routingKeys: dealerRoutingKeys,\n    analyticsId: dealer.id,\n    text: dealer.text,\n    link: outboundLink,\n    iconRight: locale === 'en-SG' && dealer.search.outboundLink ? 'none' : 'arrow-head-right'\n  };\n\n  if (shop !== null && shop.text !== '') {\n    const shopItem: MenuItemProps = {\n      elementId: RoutingKeys.SHOP,\n      routingKeys: [RoutingKeys.SHOP],\n      analyticsId: shop.id,\n      text: shop.text,\n      link: app !== Application.shop ? shop.link : undefined,\n      datalayerEventAction: EventActions.NAVIGATION_LINK_CLICK,\n      iconRight: 'none'\n    };\n\n    menu.splice(2, 0, shopItem);\n  }\n\n  if (isDealerSearchEnabled(locale, userConsentGiven)) {\n    const savedDealerName =\n      splitLocale(locale).language === 'en'\n        ? savedDealer?.ppnDealer.name\n        : isString(savedDealer?.ppnDealer.nameLocalized)\n        ? savedDealer?.ppnDealer.nameLocalized\n        : savedDealer?.ppnDealer.name;\n\n    if (isString(savedDealerName)) {\n      dealerSearch.subtext = savedDealerName;\n    }\n  } else {\n    dealerSearch.link = dealer.search.map.link;\n    dealerSearch.onClick = undefined;\n  }\n\n  menu.push(dealerSearch);\n\n  if (myPorsche !== null) {\n    const isLoggedIn = IsLoggedIn(loggedInState);\n    const username = isLoggedIn ? getUsername(loggedInState, myPorsche.loggedInFallback) : undefined;\n\n    menu.push({\n      elementId: RoutingKeys.MY_PORSCHE,\n      routingKeys: [RoutingKeys.MY_PORSCHE],\n      analyticsId: myPorsche.id,\n      text: myPorsche.text,\n      subtext: username,\n      showIconModifier: isLoggedIn && unreadMessagesCount > 0\n    });\n  }\n\n  return menu;\n}\n\nexport function getSideDrawerItems(\n  content: Content,\n  dealerSearchResults: DealerSearchResults,\n  locale: string,\n  loggedInState: string,\n  unreadMessagesCount: number,\n  activeRoutingKey: string,\n  userConsentGiven: boolean\n): MenuItemProps[] {\n  const topLevelRoutingKey = findTopLevelRoutingKey(activeRoutingKey);\n\n  switch (topLevelRoutingKey) {\n    case activeRoutingKey:\n      break;\n\n    case RoutingKeys.MODELS:\n      return content.models.series.map((modelsSeries) => ({\n        elementId: getModelsRoutingKey(modelsSeries.id),\n        routingKeys: [getModelsRoutingKey(modelsSeries.id)],\n        analyticsId: modelsSeries.id,\n        text: modelsSeries.name,\n        subtext: modelsSeries.tags.map((tag) => tag.text).join(' | '),\n        renderSignatures: true,\n        datalayerEventAction: EventActions.MODEL_RANGE_CLICK\n      }));\n\n    case RoutingKeys.SHOP:\n    case RoutingKeys.VEHICLE_PURCHASE:\n    case RoutingKeys.SERVICES:\n    case RoutingKeys.EXPERIENCE: {\n      const parentRoutingKey = removeLastRoutingSegment(activeRoutingKey);\n      const menuDrawerParent = getMenuContent(content, parentRoutingKey, topLevelRoutingKey);\n\n      if (menuDrawerParent !== null) {\n        return menuDrawerParent.children.map((childItem) => ({\n          elementId: constructRoutingKey(parentRoutingKey, childItem.id),\n          routingKeys: [constructRoutingKey(parentRoutingKey, childItem.id)],\n          analyticsId: childItem.id,\n          text: childItem.text,\n          link: childItem.link\n        }));\n      }\n\n      break;\n    }\n  }\n\n  return getLevel1Items(content, dealerSearchResults, locale, loggedInState, unreadMessagesCount, userConsentGiven);\n}\n\nexport function getSideDrawerRoutingKey(activeRoutingKey: string): string {\n  const topLevelRoutingKey = findTopLevelRoutingKey(activeRoutingKey);\n\n  switch (topLevelRoutingKey) {\n    case activeRoutingKey: {\n      break;\n    }\n\n    case RoutingKeys.DEALER_SEARCH: {\n      return RoutingKeys.DEALER_SEARCH;\n    }\n\n    case RoutingKeys.MODELS: {\n      return RoutingKeys.MODELS;\n    }\n\n    case RoutingKeys.SHOP:\n    case RoutingKeys.VEHICLE_PURCHASE:\n    case RoutingKeys.SERVICES:\n    case RoutingKeys.EXPERIENCE: {\n      const parentRoutingKey = removeLastRoutingSegment(activeRoutingKey);\n      return getLastRoutingSegment(parentRoutingKey);\n    }\n  }\n  return RoutingKeys.MAIN_MENU;\n}\n\nexport function getMenuContent(\n  content: Content,\n  routingKey: string,\n  topLevelRoutingKey: string\n): TMenu | TShopMenu | null {\n  const { vehiclePurchase, experience, shop, legacyMore, services } = content;\n\n  const menuContent: TMenu | undefined | null = {\n    [RoutingKeys.VEHICLE_PURCHASE]: vehiclePurchase,\n    [RoutingKeys.EXPERIENCE]: experience,\n    [RoutingKeys.SHOP]: shop,\n    [RoutingKeys.MORE]: legacyMore,\n    [RoutingKeys.SERVICES]: services\n  }[topLevelRoutingKey];\n\n  if (menuContent === undefined || menuContent === null) {\n    return null;\n  }\n  if (isString(menuContent.experienceName)) {\n    menuContent.children = abTestingService().executeContentChange(menuContent);\n  }\n\n  const idOfLastRoutingSegment: string = getLastRoutingSegment(routingKey);\n  return idOfLastRoutingSegment === topLevelRoutingKey\n    ? menuContent\n    : findMenuItemById(menuContent, idOfLastRoutingSegment);\n}\n\nexport function isDealerSearchEnabled(locale: string, userConsentGiven: boolean): boolean {\n  try {\n    const { country } = splitLocale(locale);\n    const returnDealerSearch = !isCountryInOneOfRegions(country) && userConsentGiven;\n\n    return (featureToggles.isDealerSearchChinaEnabled() || country !== 'CN') && returnDealerSearch;\n  } catch {\n    // ignore error\n  }\n  return true;\n}\n\nexport function getBackButtonText(content: Content, previousRoutingKey: string): string {\n  if (!isString(previousRoutingKey)) {\n    return '';\n  }\n\n  const topLevelRoutingKey = findTopLevelRoutingKey(previousRoutingKey);\n\n  switch (topLevelRoutingKey) {\n    case RoutingKeys.MODELS: {\n      return content.models.text;\n    }\n\n    case RoutingKeys.DEALER_SEARCH:\n      if (content.dealer.numberOfDealers === 1) {\n        return '';\n      }\n      return content.dealer.details.backToSearch;\n\n    case RoutingKeys.SHOP:\n    case RoutingKeys.VEHICLE_PURCHASE:\n    case RoutingKeys.MORE:\n    case RoutingKeys.EXPERIENCE: {\n      const menuContent = getMenuContent(navContentStore.state, previousRoutingKey, topLevelRoutingKey);\n\n      if (menuContent !== null) {\n        return menuContent.text;\n      }\n\n      break;\n    }\n  }\n\n  return '';\n}\n\nexport function getHeadlineText(content: Content, routingKey: string, topLevelRoutingKey: string): string {\n  const { dealer, myPorsche, models, vehiclePurchase, experience, shop, legacyMore, services } = content;\n  let menuContent: TMenu | undefined | null | Series;\n  switch (topLevelRoutingKey) {\n    case RoutingKeys.MORE:\n    case RoutingKeys.SHOP:\n    case RoutingKeys.EXPERIENCE:\n    case RoutingKeys.SERVICES:\n    case RoutingKeys.VEHICLE_PURCHASE: {\n      menuContent = {\n        [RoutingKeys.VEHICLE_PURCHASE]: vehiclePurchase,\n        [RoutingKeys.EXPERIENCE]: experience,\n        [RoutingKeys.SHOP]: shop,\n        [RoutingKeys.MORE]: legacyMore,\n        [RoutingKeys.SERVICES]: services\n      }[topLevelRoutingKey];\n\n      if (menuContent === undefined) {\n        return '';\n      }\n\n      const idOfLastRoutingSegment: string = getLastRoutingSegment(routingKey);\n      return idOfLastRoutingSegment === topLevelRoutingKey\n        ? (menuContent?.text as string)\n        : (findMenuItemById(menuContent, idOfLastRoutingSegment)?.text as string);\n    }\n    case RoutingKeys.SERIES:\n    case RoutingKeys.MODELS: {\n      const routingId = getLastRoutingSegment(routingKey);\n      menuContent = models.series.find((modelsSeries) => routingId === modelsSeries.id);\n\n      return menuContent === undefined ? models.text : menuContent?.id;\n    }\n    case RoutingKeys.DEALER_SEARCH: {\n      return dealer.search.text;\n    }\n    case RoutingKeys.MY_PORSCHE: {\n      return myPorsche?.text as string;\n    }\n  }\n  return '';\n}\n\nexport function getSubtext(\n  topLevelRoutingKey?: RoutingKey,\n  activeRoutingKey?: string,\n  locale?: string\n): string | undefined {\n  const { myPorsche, models } = navContentStore.state;\n  const { loggedInState } = navStateStore.state;\n\n  if (topLevelRoutingKey === RoutingKeys.MY_PORSCHE) {\n    const isLoggedIn = IsLoggedIn(loggedInState);\n    return isLoggedIn ? getUsername(loggedInState, myPorsche?.loggedInFallback || '') : '';\n  }\n\n  if (topLevelRoutingKey === RoutingKeys.DEALER_SEARCH) {\n    const { savedDealerCookie, ppnDealers } = dealerSearchResultsStore.state;\n    const savedDealer = savedDealerCookie !== null ? ppnDealers[savedDealerCookie.id] : undefined;\n    const savedDealerName =\n      locale && splitLocale(locale).language === 'en'\n        ? savedDealer?.ppnDealer.name\n        : isString(savedDealer?.ppnDealer.nameLocalized)\n        ? savedDealer?.ppnDealer.nameLocalized\n        : savedDealer?.ppnDealer.name;\n\n    return savedDealerCookie ? savedDealerName : '';\n  }\n\n  if (topLevelRoutingKey === RoutingKeys.MODELS) {\n    if (isString(activeRoutingKey)) {\n      const routingId = getLastRoutingSegment(activeRoutingKey);\n      const menuContent = models.series.find((modelsSeries) => routingId === modelsSeries.id);\n      if (menuContent) {\n        return menuContent.tags.map((tag) => tag.text).join(' | ');\n      }\n    }\n  }\n\n  return '';\n}\n"]}