import { h } from "@stencil/core";
import { newSpecPage } from "@stencil/core/testing";
import { getHTMLElement } from "../../../utility/helper";
import { BackButton } from "../back-button";
import globalDataLayerService from "../../../services/analytics/global-data-layer-service";
import { EventActions } from "../../../utility/constants";
import { ClickElementTypes } from "../../../utility/constants";
import { goTo } from "../../../services/routing-manager";
import { RoutingKeys } from "../../../entities/routing-key";
describe('Back button', () => {
  let page;
  const text = 'Button text';
  beforeEach(async () => {
    page = await newSpecPage({
      components: [BackButton],
      template: () => h("phn-back-button", { text: text, analyticsId: "button-id" })
    });
    goTo(RoutingKeys.SERIES, 'series/mainmenu.718');
  });
  it('should render dom as defined', () => {
    expect(page.root).toMatchInlineSnapshot(`
      <phn-back-button>
        <phn-p-button-pure class="back-button-text-link" icon="arrow-head-left" size="inherit">
          Button text
        </phn-p-button-pure>
      </phn-back-button>
    `);
  });
  it('should call MENU_BACK_CLICK data event when back button is clicked', () => {
    var _a, _b;
    const button = getHTMLElement((_a = page.root) === null || _a === void 0 ? void 0 : _a.querySelector('phn-p-button-pure'));
    expect(button === null || button === void 0 ? void 0 : button.innerText).toEqual(text);
    button === null || button === void 0 ? void 0 : button.click();
    expect(globalDataLayerService.gdl.DataLayerStore).toHaveLength(1);
    const event = globalDataLayerService.gdl.DataLayerStore[0];
    expect((_b = event.context) === null || _b === void 0 ? void 0 : _b.eventAction).toEqual(EventActions.MENU_BACK_CLICK);
    expect(event.componentClick).toEqual({
      clickElementId: 'button-id',
      clickElementName: 'Button text',
      clickElementType: ClickElementTypes.Button
    });
    expect(event.componentDisplay).toEqual({
      displayElementId: 'level3-mainmenu.718',
      displayElementType: 'level3_back-button',
      displayElementName: 'Button text'
    });
  });
});
//# sourceMappingURL=back-button.spec.js.map
