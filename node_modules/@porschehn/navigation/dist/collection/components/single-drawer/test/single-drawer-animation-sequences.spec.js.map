{"version":3,"file":"single-drawer-animation-sequences.spec.js","sourceRoot":"","sources":["../../../../../src/components/single-drawer/test/single-drawer-animation-sequences.spec.tsx"],"names":[],"mappings":"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","sourcesContent":["import animationManager from '../../../services/animations/animation-manager';\nimport registerOpenSingleDrawerAnimation from '../animations/sequences/register-open-single-drawer-animation';\nimport registerCloseSingleDrawerAnimation from '../animations/sequences/register-close-single-drawer-animation';\nimport registerTransitionNextLevelSingleDrawerAnimation from '../animations/sequences/register-next-level-single-drawer-animation';\nimport registerTransitionPreviousLevelSingleDrawerAnimation from '../animations/sequences/register-previous-level-single-drawer-animation';\n\nimport registerSingleDrawerAnimationSequences from '../animations/animations-register';\nimport * as nextLevelAnimation from '../animations/sequences/register-next-level-single-drawer-animation';\nimport * as previousLevelAnimation from '../animations/sequences/register-previous-level-single-drawer-animation';\nimport * as openAnimation from '../animations/sequences/register-open-single-drawer-animation';\nimport * as closeAnimation from '../animations/sequences/register-close-single-drawer-animation';\n\ndescribe('Single Drawer Animation Sequence', () => {\n  let registerAnimationMock: jest.SpyInstance;\n\n  beforeEach(() => {\n    registerAnimationMock = jest.spyOn(animationManager, 'register');\n  });\n\n  it('should register single drawer opening sequence, opening single drawer from right to left', async () => {\n    registerOpenSingleDrawerAnimation({ onAnimationStarts: () => null, onAnimationEnds: () => null });\n\n    expect(registerAnimationMock).toHaveBeenCalledWith('openSingleDrawer', {\n      currentStepIndex: 0,\n      running: false,\n      steps: [\n        [\n          {\n            onStart: expect.any(Function),\n            elementSelector: 'phn-single-drawer',\n            animation: {\n              className: 'slide-in-from-left',\n              cleanUpAfterAnimation: expect.any(Function)\n            }\n          },\n          {\n            elementSelector: 'phn-backdrop',\n            animation: {\n              className: 'fade-in-animation',\n              cleanUpAfterAnimation: expect.any(Function)\n            },\n            onEnd: expect.any(Function)\n          }\n        ]\n      ]\n    });\n  });\n\n  it('should register single drawer closing sequence, closing single drawer from right to left', async () => {\n    registerCloseSingleDrawerAnimation({ onAnimationStarts: jest.fn(), onAnimationEnds: jest.fn() });\n\n    expect(registerAnimationMock).toHaveBeenCalledWith('closeSingleDrawer', {\n      currentStepIndex: 0,\n      running: false,\n      steps: [\n        [\n          {\n            onStart: expect.any(Function),\n            elementSelector: 'phn-single-drawer',\n            animation: {\n              className: 'slide-out-to-left',\n              cleanUpBeforeAnimation: expect.any(Function),\n              cleanUpAfterAnimation: expect.any(Function)\n            }\n          },\n          {\n            elementSelector: 'phn-backdrop',\n            animation: {\n              className: 'fade-out-animation',\n              cleanUpBeforeAnimation: expect.any(Function)\n            },\n            onEnd: expect.any(Function)\n          }\n        ]\n      ]\n    });\n  });\n\n  it('should register transition next level single drawer animation, transitioning the new page from right to left', () => {\n    registerTransitionNextLevelSingleDrawerAnimation({\n      onAnimationEnds: jest.fn()\n    });\n\n    expect(registerAnimationMock).toHaveBeenCalledWith('transitionNextLevelSingleDrawer', {\n      currentStepIndex: 0,\n      running: false,\n      steps: [\n        [\n          {\n            elementSelector: 'phn-single-drawer .drawer.animating',\n            animation: {\n              className: 'slide-in-from-right-fixed'\n            },\n            onEnd: expect.any(Function)\n          }\n        ]\n      ]\n    });\n  });\n\n  it('should register transition previous level single drawer animation, transitioning the old page from left to right', () => {\n    registerTransitionPreviousLevelSingleDrawerAnimation({ onAnimationEnds: jest.fn() });\n\n    expect(registerAnimationMock).toHaveBeenCalledWith('transitionPreviousLevelSingleDrawer', {\n      currentStepIndex: 0,\n      running: false,\n      steps: [\n        [\n          {\n            elementSelector: 'phn-single-drawer .drawer.animating',\n            animation: {\n              className: 'slide-out-to-right-fixed'\n            },\n            onEnd: expect.any(Function)\n          }\n        ]\n      ]\n    });\n  });\n\n  describe('Register', () => {\n    it('Should register animation sequences', () => {\n      const spyNextLevelTransition = jest.spyOn(nextLevelAnimation, 'default');\n      const spyPreviousLevelTransition = jest.spyOn(previousLevelAnimation, 'default');\n      const spyOpenAnimation = jest.spyOn(openAnimation, 'default');\n      const spyCloseAnimation = jest.spyOn(closeAnimation, 'default');\n\n      registerSingleDrawerAnimationSequences();\n\n      expect(spyNextLevelTransition).toHaveBeenCalledTimes(1);\n      expect(spyNextLevelTransition).toHaveBeenLastCalledWith({ onAnimationEnds: expect.any(Function) });\n\n      expect(spyPreviousLevelTransition).toHaveBeenCalledTimes(1);\n      expect(spyPreviousLevelTransition).toHaveBeenLastCalledWith({ onAnimationEnds: expect.any(Function) });\n\n      expect(spyOpenAnimation).toHaveBeenCalledTimes(1);\n      expect(spyOpenAnimation).toHaveBeenLastCalledWith({\n        onAnimationEnds: expect.any(Function),\n        onAnimationStarts: expect.any(Function)\n      });\n\n      expect(spyCloseAnimation).toHaveBeenCalledTimes(1);\n      expect(spyCloseAnimation).toHaveBeenLastCalledWith({\n        onAnimationEnds: expect.any(Function),\n        onAnimationStarts: expect.any(Function)\n      });\n    });\n  });\n});\n"]}