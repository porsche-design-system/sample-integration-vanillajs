{"version":3,"file":"double-drawer-animation-sequences.js","sourceRoot":"","sources":["../../../../src/components/double-drawer/double-drawer-animation-sequences.ts"],"names":[],"mappings":"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","sourcesContent":["import animationManager, {\n  AnimationStatusCallbacks,\n  makeSequence,\n  SequenceStep\n} from '../../services/animations/animation-manager';\nimport { AnimationSequences, AnimationSequencesType } from '../../utility/constants';\n\nexport type RouteChangeCallbacks = {\n  onSlideMainDrawerOutEnd: () => Promise<unknown>;\n};\n\nconst resetToFarRight = (el: HTMLElement) => {\n  el.style.left = '150%';\n  el.style.position = 'relative';\n};\n\nconst mainDrawerHTMLSelector = '#main-drawer > div:first-child';\n\nexport const registerOpenDoubleDrawerSequence = ({\n  onAnimationStarts,\n  onAnimationEnds\n}: Required<AnimationStatusCallbacks>): void => {\n  const sequence: SequenceStep[] = [\n    [\n      {\n        onStart: onAnimationStarts,\n        elementSelector: 'phn-double-drawer',\n        animation: {\n          className: 'opening-animation',\n          cleanUpAfterAnimation: (element) => {\n            element.style.left = '0px';\n          }\n        }\n      },\n      {\n        elementSelector: 'phn-backdrop',\n        animation: {\n          className: 'fade-in-animation',\n          cleanUpAfterAnimation: (element) => {\n            element.style.opacity = '1';\n            element.style.backgroundColor = 'rgba(0, 0, 0, 0.6)';\n          }\n        },\n        onEnd: onAnimationEnds\n      }\n    ]\n  ];\n\n  animationManager.register(AnimationSequences.OPEN_DOUBLE_DRAWER, makeSequence(sequence));\n};\n\nexport const registerCloseDoubleDrawerSequence = ({\n  onBackdropFadeOutEnd,\n  onAnimationStarts,\n  onAnimationEnds\n}: Required<AnimationStatusCallbacks> & {\n  onBackdropFadeOutEnd: () => Promise<void>;\n}): void => {\n  const sequence: SequenceStep[] = [\n    [\n      {\n        elementSelector: 'phn-double-drawer',\n        onStart: onAnimationStarts,\n        animation: {\n          className: 'closing-animation',\n          cleanUpBeforeAnimation: (element) => {\n            element.style.left = '';\n          }\n        }\n      },\n      {\n        elementSelector: 'phn-backdrop',\n        animation: {\n          className: 'fade-out-animation',\n          cleanUpBeforeAnimation: (element) => {\n            element.style.opacity = '';\n            element.style.backgroundColor = '';\n          }\n        },\n        onEnd: () => {\n          onBackdropFadeOutEnd();\n          onAnimationEnds();\n        }\n      }\n    ]\n  ];\n\n  animationManager.register(AnimationSequences.CLOSE_DOUBLE_DRAWER, makeSequence(sequence));\n};\n\nexport const registerTransitionSequence = (\n  { onSlideMainDrawerOutEnd }: RouteChangeCallbacks,\n  direction: 'normal' | 'reverse' = 'normal'\n): void => {\n  animationManager.register(\n    `transitionSameLevelDoubleDrawer${direction === 'reverse' ? 'Reverse' : ''}`,\n    makeSequence([\n      [\n        {\n          elementSelector: mainDrawerHTMLSelector,\n          animation: {\n            className:\n              direction === 'reverse' ? 'transition-backward-animation-out' : 'transition-forward-animation-out',\n            cleanUpAfterAnimation: resetToFarRight\n          },\n          onEnd: onSlideMainDrawerOutEnd\n        }\n      ],\n      [\n        {\n          elementSelector: mainDrawerHTMLSelector,\n          animation: {\n            className: direction === 'reverse' ? 'transition-forward-animation-in' : 'transition-forward-animation-in',\n            cleanUpBeforeAnimation: (element) => {\n              element.style.left = '';\n              element.style.position = '';\n            }\n          }\n        }\n      ]\n    ])\n  );\n};\n\nexport const registerForwardToNextMenuSequence = ({ onSlideMainDrawerOutEnd }: RouteChangeCallbacks): void => {\n  animationManager.register(\n    'transitionNextLevelDoubleDrawer',\n    makeSequence([\n      [\n        {\n          elementSelector: '#side-drawer > div',\n          animation: {\n            className: 'transition-forward-animation-out'\n          }\n        },\n        {\n          elementSelector: mainDrawerHTMLSelector,\n          animation: {\n            className: 'transition-forward-animation-out'\n          },\n          onEnd: onSlideMainDrawerOutEnd\n        }\n      ],\n      [\n        {\n          elementSelector: '#side-drawer > div',\n          animation: {\n            className: 'transition-forward-animation-in'\n          }\n        },\n        {\n          elementSelector: mainDrawerHTMLSelector,\n          animation: {\n            className: 'transition-forward-animation-in'\n          }\n        }\n      ]\n    ])\n  );\n};\nexport const registerBackToPreviousMenuSequence = ({ onSlideMainDrawerOutEnd }: RouteChangeCallbacks): void => {\n  animationManager.register(\n    'transitionPreviousLevelDoubleDrawer',\n    makeSequence([\n      [\n        {\n          elementSelector: '#side-drawer > div',\n          animation: {\n            className: 'transition-backward-animation-out'\n          }\n        },\n        {\n          elementSelector: mainDrawerHTMLSelector,\n          animation: {\n            className: 'transition-backward-animation-out'\n          },\n          onEnd: onSlideMainDrawerOutEnd\n        }\n      ],\n      [\n        {\n          elementSelector: '#side-drawer > div',\n          animation: {\n            className: 'transition-backward-animation-in'\n          }\n        },\n        {\n          elementSelector: mainDrawerHTMLSelector,\n          animation: {\n            className: 'transition-backward-animation-in'\n          }\n        }\n      ]\n    ])\n  );\n};\n\nexport const isPlayingDoubleDrawerAnimation = (): boolean => {\n  const doubleDrawerAnimationSequences: AnimationSequencesType[] = [\n    AnimationSequences.OPEN_DOUBLE_DRAWER,\n    AnimationSequences.CLOSE_DOUBLE_DRAWER,\n    AnimationSequences.TRANSITION_NEXT_LEVEL_DOUBLE_DRAWER,\n    AnimationSequences.TRANSITION_PREVIOUS_LEVEL_DOUBLE_DRAWER,\n    AnimationSequences.TRANSITION_SAME_LEVEL_DOUBLE_DRAWER,\n    AnimationSequences.TRANSITION_SAME_LEVEL_DOUBLE_DRAWER_REVERSE\n  ];\n\n  return doubleDrawerAnimationSequences.some((sequence) => {\n    try {\n      return animationManager.isPlaying(sequence);\n    } catch {\n      return false;\n    }\n  });\n};\n"]}