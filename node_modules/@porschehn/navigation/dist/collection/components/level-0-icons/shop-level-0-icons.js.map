{"version":3,"file":"shop-level-0-icons.js","sourceRoot":"","sources":["../../../../src/components/level-0-icons/shop-level-0-icons.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Fragment, h, JSX } from '@stencil/core';\nimport { handleFilledIcon, isShopAvailable } from '../../utility/helpers/shop-helper';\nimport animationManager from '../../services/animations/animation-manager';\nimport { getRightTheme } from '../../utility/helper';\nimport { navContentStore } from '../../state/nav-content-store';\nimport { pureButtonSkeleton } from '../../utility/skeleton';\nimport { ContextualIconProps, ContextualIconResponse } from '../../utility/constants/app';\nimport { EventActions, NavigationModeType, NavigationThemeType } from '../../utility/constants';\nimport { shopStateStore } from '../../state/shop-state-store';\nimport globalDataLayerService from '../../services/analytics/global-data-layer-service';\n\nexport default function shopIcons({\n  locale,\n  app,\n  mode,\n  theme,\n  isNavigationLoaded,\n  isDesktop\n}: ContextualIconProps): ContextualIconResponse {\n  const { shopInformation } = shopStateStore.state;\n  const shopCartLink = navContentStore.state.shop?.cart || '';\n  const shopWishlistLink = navContentStore.state.shop?.wishlist?.link || '';\n\n  function getAriaLabelForShoppingBag(): string {\n    return `My shopping bag, ${shopInformation.numberOfShoppingItems} items, estimated subtotal ${shopInformation.subTotal}`;\n  }\n  function getAriaLabelForWishlist(): string {\n    return `My wishlist, ${shopInformation.wishlistItemsNumber} items`;\n  }\n\n  return {\n    leftIcons: isShopAvailable(locale, app) ? (\n      <div class=\"icon\">\n        <phn-p-button-pure\n          icon=\"search\"\n          hide-label=\"true\"\n          stretch=\"true\"\n          aria=\"{ 'aria-haspopup': 'dialog', 'aria-label' : 'open the shop search field' }\"\n          data-test-id=\"search-button\"\n          onClick={() => {\n            animationManager.play('openContextualDrawer');\n            sendDataLayerEventContextualDrawer();\n          }}\n          style={isNavigationLoaded ? {} : { display: 'none' }}\n          theme={getRightTheme(theme, mode)}\n        />\n        {!isNavigationLoaded ? pureButtonSkeleton() : null}\n      </div>\n    ) : null,\n    rightIcons: isShopAvailable(locale, app) ? (\n      <Fragment>\n        {isDesktop ? (\n          <div class=\"icon\">\n            <phn-p-link-pure\n              target={'_self'}\n              hide-label=\"true\"\n              icon=\"none\"\n              theme={getRightTheme(theme, mode)}\n              style={isNavigationLoaded ? {} : { display: 'none' }}\n              className=\"wishlist-link\"\n              data-test-id=\"wishlist-link\"\n              onClick={() => {\n                sendDataLayerEventShoppingCart(shopWishlistLink, 'mainmenu.shop.wishlist', 'Wishlist');\n              }}\n            >\n              <a href={shopWishlistLink} aria-label={getAriaLabelForWishlist()}>\n                <div class=\"icon-flex\">\n                  <BadgeCount numberOfItems={shopInformation.wishlistItemsNumber} theme={theme} mode={mode} />\n                  <phn-p-icon\n                    theme={getRightTheme(theme, mode)}\n                    name={handleFilledIcon('heart', shopInformation.wishlistItemsNumber)}\n                    data-test-id=\"wishlist-link-icon\"\n                  />\n                </div>\n              </a>\n            </phn-p-link-pure>\n          </div>\n        ) : null}\n        {!isNavigationLoaded && isDesktop ? pureButtonSkeleton() : null}\n\n        <div class=\"icon\">\n          <phn-p-link-pure\n            target={'_self'}\n            hide-label=\"true\"\n            icon=\"none\"\n            theme={getRightTheme(theme, mode)}\n            style={isNavigationLoaded ? {} : { display: 'none' }}\n            class=\"shopping-cart-link\"\n            data-test-id=\"shopping-cart-link\"\n            onClick={() => {\n              sendDataLayerEventShoppingCart(shopCartLink, 'mainmenu.shop.shoppingbag', 'Shopping cart');\n            }}\n          >\n            <a href={shopCartLink} aria-label={getAriaLabelForShoppingBag()}>\n              <div class=\"icon-flex\">\n                <BadgeCount numberOfItems={shopInformation.numberOfShoppingItems} theme={theme} mode={mode} />\n                <phn-p-icon\n                  theme={getRightTheme(theme, mode)}\n                  name={handleFilledIcon('shopping-bag', shopInformation.numberOfShoppingItems)}\n                  data-test-id=\"shopping-cart-link-icon\"\n                />\n              </div>\n            </a>\n          </phn-p-link-pure>\n          {!isNavigationLoaded ? pureButtonSkeleton() : null}\n        </div>\n      </Fragment>\n    ) : null\n  };\n}\n\nconst BadgeCount = ({\n  numberOfItems = 0,\n  theme,\n  mode\n}: {\n  numberOfItems: number;\n  theme: NavigationThemeType;\n  mode: NavigationModeType;\n}): JSX.Element => {\n  const shoppingItemCountOver99 = '99+';\n  const displayedCount = numberOfItems < 99 ? numberOfItems : shoppingItemCountOver99;\n\n  if (numberOfItems <= 0) return '';\n\n  return (\n    <span class={`shopping-item-count ${numberOfItems < 10 ? '' : 'pill'} ${getRightTheme(theme, mode)}`}>\n      {displayedCount}\n    </span>\n  );\n};\n\nfunction sendDataLayerEventContextualDrawer() {\n  globalDataLayerService.pushDataLayerEvent(EventActions.CONTEXTUAL_BUTTON_CLICK, {\n    componentClick: {\n      clickElementId: 'mainmenu.shop.search',\n      clickElementName: 'Shop search'\n    }\n  });\n}\n\nfunction sendDataLayerEventShoppingCart(url: string, elementId: string, elementName: string) {\n  globalDataLayerService.pushDataLayerEvent(EventActions.CONTEXTUAL_BUTTON_CLICK, {\n    componentClick: {\n      clickElementId: elementId,\n      clickElementName: elementName,\n      targetUrl: url\n    }\n  });\n}\n"]}