{"version":3,"file":"shop-level-0-icons.js","sourceRoot":"","sources":["../../../../src/components/level-0-icons/shop-level-0-icons.tsx"],"names":[],"mappings":"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","sourcesContent":["import { h, JSX } from '@stencil/core';\nimport { isShopAvailable } from '../../utility/helpers/shop-helper';\nimport animationManager from '../../services/animations/animation-manager';\nimport { getRightTheme } from '../../utility/helper';\nimport { navContentStore } from '../../state/nav-content-store';\nimport { pureButtonSkeleton } from '../../utility/skeleton';\nimport { ContextualIconProps, ContextualIconResponse } from '../../utility/constants/app';\nimport {\n  EventActions,\n  NavigationMode,\n  NavigationModeType,\n  NavigationTheme,\n  NavigationThemeType\n} from '../../utility/constants';\nimport { shopStateStore } from '../../state/shop-state-store';\nimport globalDataLayerService from '../../services/analytics/global-data-layer-service';\n\nexport default function shopIcons({\n  locale,\n  app,\n  mode,\n  theme,\n  isNavigationLoaded\n}: ContextualIconProps): ContextualIconResponse {\n  function getShoppingCartLink(): string {\n    const shopLink = navContentStore.state.shop?.cart;\n\n    if (shopLink !== undefined && shopLink !== '') {\n      return `${shopLink}`;\n    }\n    return '';\n  }\n\n  function showShoppingCart(): string {\n    const { numberOfShoppingItems, shopInformation } = shopStateStore.state;\n    let numberOfItems = shopInformation.numberOfShoppingItems;\n    if (numberOfItems === 0) {\n      numberOfItems = numberOfShoppingItems;\n    }\n\n    switch (true) {\n      case numberOfItems === 0:\n        return 'shopping-bag';\n      case numberOfItems > 0:\n        return 'shopping-bag-filled';\n      default:\n        return 'shopping-bag';\n    }\n  }\n\n  function getAriaLabelForShoppingCart(): string {\n    const { shopInformation } = shopStateStore.state;\n\n    return `My shopping bag, ${shopInformation.numberOfShoppingItems} items, estimated subtotal ${shopInformation.subTotal}`;\n  }\n\n  return {\n    leftIcons: isShopAvailable(locale, app) ? (\n      <div class=\"icon\">\n        <phn-p-button-pure\n          icon=\"search\"\n          hide-label=\"true\"\n          stretch=\"true\"\n          aria=\"{ 'aria-haspopup': 'dialog', 'aria-label' : 'open the shop search field' }\"\n          data-test-id=\"search-button\"\n          onClick={() => {\n            animationManager.play('openContextualDrawer');\n            sendDataLayerEventContextualDrawer();\n          }}\n          style={isNavigationLoaded ? {} : { display: 'none' }}\n          theme={getRightTheme(theme, mode)}\n        />\n        {!isNavigationLoaded ? pureButtonSkeleton() : null}\n      </div>\n    ) : null,\n    rightIcons: isShopAvailable(locale, app) ? (\n      <div class=\"icon\">\n        <phn-p-link-pure\n          target={'_self'}\n          hide-label=\"true\"\n          icon=\"none\"\n          theme={getRightTheme(theme, mode)}\n          style={isNavigationLoaded ? {} : { display: 'none' }}\n          class=\"shopping-cart-link\"\n          data-test-id=\"shopping-cart-link\"\n          onClick={() => {\n            sendDataLayerEventShoppingCart(getShoppingCartLink());\n          }}\n        >\n          <a href={getShoppingCartLink()} aria-label={getAriaLabelForShoppingCart()}>\n            <div class=\"icon-flex\">\n              <ShoppingCartCount styleClass=\"shopping-item-count\" theme={theme} mode={mode} />\n              <phn-p-icon\n                theme={getRightTheme(theme, mode)}\n                name={showShoppingCart()}\n                data-test-id=\"shopping-cart-link-icon\"\n              />\n            </div>\n          </a>\n        </phn-p-link-pure>\n        {!isNavigationLoaded ? pureButtonSkeleton() : null}\n      </div>\n    ) : null\n  };\n}\n\nconst ShoppingCartCount = ({\n  styleClass,\n  theme,\n  mode\n}: {\n  styleClass: string;\n  theme: NavigationThemeType;\n  mode: NavigationModeType;\n}): JSX.Element => {\n  const shoppingItemCountOver99 = '+99';\n  const { numberOfShoppingItems, shopInformation } = shopStateStore.state;\n  let numberOfItems = shopInformation.numberOfShoppingItems;\n  if (numberOfItems === 0) {\n    numberOfItems = numberOfShoppingItems;\n  }\n  const displayedCount = numberOfItems < 99 ? numberOfItems : shoppingItemCountOver99;\n\n  if (numberOfItems <= 0) return '';\n\n  return (\n    <span\n      class={styleClass}\n      style={mode === NavigationMode.hero && theme === NavigationTheme.dark ? { color: 'black' } : { color: 'white' }}\n    >\n      {displayedCount}\n    </span>\n  );\n};\n\nfunction sendDataLayerEventContextualDrawer() {\n  globalDataLayerService.pushDataLayerEvent(EventActions.CONTEXTUAL_BUTTON_CLICK, {\n    componentClick: {\n      clickElementId: 'mainmenu.shop.search',\n      clickElementName: 'Shop search'\n    }\n  });\n}\n\nfunction sendDataLayerEventShoppingCart(url: string) {\n  globalDataLayerService.pushDataLayerEvent(EventActions.CONTEXTUAL_BUTTON_CLICK, {\n    componentClick: {\n      clickElementId: 'mainmenu.shop.shoppingbag',\n      clickElementName: 'Shopping cart',\n      targetUrl: url\n    }\n  });\n}\n"]}