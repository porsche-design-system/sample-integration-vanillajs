{"version":3,"file":"models.spec.js","sourceRoot":"","sources":["../../../../../src/components/models/test/models.spec.tsx"],"names":[],"mappings":"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","sourcesContent":["import { breakpoint } from '@porsche-design-system/components-js/styles';\nimport { h } from '@stencil/core';\nimport { newSpecPage, SpecPage } from '@stencil/core/testing';\nimport { navContentStore } from '../../../state/nav-content-store';\nimport { mockModelsContent } from '../../../test/test-data';\nimport { getHTMLElement } from '../../../utility/helper';\nimport { MenuItem } from '../../menu-item/menu-item';\nimport { Models } from '../models';\nimport * as routingManager from '../../../services/routing-manager';\n\ndescribe('models', () => {\n  const defaultProps = {\n    breakpoint: breakpoint.s\n  };\n\n  let page: SpecPage;\n\n  beforeEach(async () => {\n    navContentStore.state.models = mockModelsContent;\n  });\n\n  describe('in main drawer', () => {\n    beforeEach(async () => {\n      page = await newSpecPage({\n        components: [Models, MenuItem],\n        template: () => <phn-models {...defaultProps} />\n      });\n    });\n\n    it('should render', async () => {\n      expect(page.root).toMatchInlineSnapshot(`\n        <phn-models>\n          <ul>\n            <phn-menu-item class=\"model-variant series skeleton\" role=\"listitem\">\n              <!---->\n              <phn-p-button-pure align-label=\"left\" data-id=\"models/mainmenu.718\" icon=\"none\" size=\"inherit\" stretch=\"false\">\n                <div class=\"phn-align-center phn-flex-row\">\n                  <div class=\"media-container skeleton-item\">\n                    <img alt=\"718 Frontshot\" class=\"image\" slot=\"media\" srcset=\"http://assets/url/series-assets/760/718.webp, http://assets/url/series-assets/760/718@2x.webp 2x\">\n                  </div>\n                </div>\n              </phn-p-button-pure>\n            </phn-menu-item>\n            <phn-menu-item class=\"model-variant series skeleton\" role=\"listitem\">\n              <!---->\n              <phn-p-button-pure align-label=\"left\" data-id=\"models/mainmenu.911\" icon=\"none\" size=\"inherit\" stretch=\"false\">\n                <div class=\"phn-align-center phn-flex-row\">\n                  <div class=\"media-container skeleton-item\">\n                    <img alt=\"911 Frontshot\" class=\"image\" slot=\"media\" srcset=\"http://assets/url/series-assets/760/911.webp, http://assets/url/series-assets/760/911@2x.webp 2x\">\n                  </div>\n                </div>\n              </phn-p-button-pure>\n            </phn-menu-item>\n            <phn-menu-item class=\"model-variant series skeleton\" role=\"listitem\">\n              <!---->\n              <phn-p-button-pure align-label=\"left\" data-id=\"models/mainmenu.taycan\" icon=\"none\" size=\"inherit\" stretch=\"false\">\n                <div class=\"phn-align-center phn-flex-row\">\n                  <div class=\"media-container skeleton-item\">\n                    <img alt=\"Taycan Frontshot\" class=\"image\" slot=\"media\" srcset=\"http://assets/url/series-assets/760/taycan.webp, http://assets/url/series-assets/760/taycan@2x.webp 2x\">\n                  </div>\n                </div>\n              </phn-p-button-pure>\n            </phn-menu-item>\n            <phn-menu-item class=\"model-variant series skeleton\" role=\"listitem\">\n              <!---->\n              <phn-p-button-pure align-label=\"left\" data-id=\"models/mainmenu.panamera\" icon=\"none\" size=\"inherit\" stretch=\"false\">\n                <div class=\"phn-align-center phn-flex-row\">\n                  <div class=\"media-container skeleton-item\">\n                    <img alt=\"Panamera Frontshot\" class=\"image\" slot=\"media\" srcset=\"http://assets/url/series-assets/760/panamera.webp, http://assets/url/series-assets/760/panamera@2x.webp 2x\">\n                  </div>\n                </div>\n              </phn-p-button-pure>\n            </phn-menu-item>\n            <phn-menu-item class=\"model-variant series skeleton\" role=\"listitem\">\n              <!---->\n              <phn-p-button-pure align-label=\"left\" data-id=\"models/mainmenu.macan\" icon=\"none\" size=\"inherit\" stretch=\"false\">\n                <div class=\"phn-align-center phn-flex-row\">\n                  <div class=\"media-container skeleton-item\">\n                    <img alt=\"Macan Frontshot\" class=\"image\" slot=\"media\" srcset=\"http://assets/url/series-assets/760/macan.webp, http://assets/url/series-assets/760/macan@2x.webp 2x\">\n                  </div>\n                </div>\n              </phn-p-button-pure>\n            </phn-menu-item>\n            <phn-menu-item class=\"model-variant series skeleton\" role=\"listitem\">\n              <!---->\n              <phn-p-button-pure align-label=\"left\" data-id=\"models/mainmenu.cayenne\" icon=\"none\" size=\"inherit\" stretch=\"false\">\n                <div class=\"phn-align-center phn-flex-row\">\n                  <div class=\"media-container skeleton-item\">\n                    <img alt=\"Cayenne Frontshot\" class=\"image\" slot=\"media\" srcset=\"http://assets/url/series-assets/760/cayenne.webp, http://assets/url/series-assets/760/cayenne@2x.webp 2x\">\n                  </div>\n                </div>\n              </phn-p-button-pure>\n            </phn-menu-item>\n          </ul>\n        </phn-models>\n      `);\n    });\n  });\n\n  describe('skeleton', () => {\n    it('should render skeleton when images not loaded yet', async () => {\n      page = await newSpecPage({\n        components: [Models, MenuItem],\n        template: () => <phn-models {...defaultProps} breakpoint={breakpoint.xs} showHeadline={true} />\n      });\n\n      expect(page.root?.querySelector('.skeleton')).not.toBeNull();\n    });\n\n    it('should release skeleton when images loaded', async () => {\n      page = await newSpecPage({\n        components: [Models, MenuItem],\n        template: () => <phn-models {...defaultProps} breakpoint={breakpoint.xs} showHeadline={true} />\n      });\n\n      const imgs = page.root?.querySelectorAll('img');\n\n      if (imgs === undefined) {\n        return;\n      }\n\n      imgs.forEach(async (img: HTMLImageElement) => {\n        img.dispatchEvent(new Event('load'));\n      });\n\n      await page.waitForChanges();\n\n      expect(page.root?.querySelector('.skeleton-headline')).toBeNull();\n      expect(page.root?.querySelector('.skeleton')).toBeNull();\n    });\n\n    it('should show skeleton when image load throws error', async () => {\n      page = await newSpecPage({\n        components: [Models, MenuItem],\n        template: () => <phn-models {...defaultProps} breakpoint={breakpoint.xs} showHeadline={true} />\n      });\n\n      const imgs = page.root?.querySelectorAll('img');\n\n      if (imgs === undefined) {\n        return;\n      }\n\n      imgs.forEach(async (img: HTMLImageElement) => {\n        img.dispatchEvent(new Event('error'));\n      });\n\n      await page.waitForChanges();\n\n      expect(page.root?.querySelector('.skeleton')).not.toBeNull();\n    });\n  });\n\n  it('should emit mainDrawerItemClick event', async () => {\n    const page = await newSpecPage({\n      components: [Models, MenuItem],\n      template: () => <phn-models {...defaultProps} />\n    });\n\n    const routingManagerAddRouteSpy: jest.SpyInstance = jest.spyOn(routingManager, 'addRoute');\n\n    getHTMLElement(page.root?.querySelector('phn-menu-item'))?.click();\n\n    expect(routingManagerAddRouteSpy).toBeCalledTimes(1);\n    expect(routingManagerAddRouteSpy).toHaveBeenCalledWith(['mainmenu.718']);\n  });\n});\n"]}