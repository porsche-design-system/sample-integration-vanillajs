import { Host, h } from "@stencil/core";
import { RoutingKeys } from "../../entities/routing-key";
import { ClickElementTypes, EventActions, NavigationMode, NavigationTheme } from "../../utility/constants";
import { getRightTheme, IsLoggedIn } from "../../utility/helper";
import { navStateStore } from "../../state/nav-state-store";
import globalDataLayerService from "../../services/analytics/global-data-layer-service";
export class MyPorscheIconButton {
  constructor() {
    this.mode = NavigationMode.navbar;
    this.theme = NavigationTheme.light;
    this.isMyPorscheHoveredOn = false;
  }
  sendDataLayerEvent() {
    globalDataLayerService.pushDataLayerEvent(EventActions.CONTEXTUAL_BUTTON_CLICK, {
      componentClick: {
        clickElementId: RoutingKeys.MY_PORSCHE,
        clickElementName: 'open the my porsche menu',
        clickElementType: ClickElementTypes.Button
      }
    });
  }
  render() {
    const { unreadMessagesCount, loggedInState } = navStateStore.state;
    const isLoggedIn = IsLoggedIn(loggedInState);
    return (h(Host, null, h("phn-p-button-pure", { icon: `user${isLoggedIn ? '-filled' : ''}`, "hide-label": "true", stretch: "true", "data-id": `${RoutingKeys.MY_PORSCHE}-contextual-button`, aria: "{ 'aria-haspopup': 'dialog', 'aria-label' : 'open the my porsche menu' }", "data-test-id": "myporsche-button", theme: getRightTheme(this.theme, this.mode), onMouseEnter: () => {
        this.isMyPorscheHoveredOn = true;
      }, onMouseLeave: () => {
        this.isMyPorscheHoveredOn = false;
      }, onClick: () => {
        this.sendDataLayerEvent();
      } }), unreadMessagesCount > 0 ? (h("span", { class: `myporsche-unread-messages-indicator ${this.mode === 'hero' ? this.theme : NavigationTheme.light}` })) : null));
  }
  static get is() { return "phn-my-porsche-icon-button"; }
  static get encapsulation() { return "scoped"; }
  static get originalStyleUrls() {
    return {
      "$": ["my-porsche-icon-button.scss"]
    };
  }
  static get styleUrls() {
    return {
      "$": ["my-porsche-icon-button.css"]
    };
  }
  static get properties() {
    return {
      "mode": {
        "type": "string",
        "mutable": false,
        "complexType": {
          "original": "NavigationModeType",
          "resolved": "\"hero\" | \"navbar\" | \"transparent\"",
          "references": {
            "NavigationModeType": {
              "location": "import",
              "path": "../../utility/constants",
              "id": "src/utility/constants/index.ts::NavigationModeType"
            }
          }
        },
        "required": false,
        "optional": false,
        "docs": {
          "tags": [],
          "text": ""
        },
        "attribute": "mode",
        "reflect": false,
        "defaultValue": "NavigationMode.navbar"
      },
      "theme": {
        "type": "string",
        "mutable": false,
        "complexType": {
          "original": "NavigationThemeType",
          "resolved": "\"dark\" | \"light\"",
          "references": {
            "NavigationThemeType": {
              "location": "import",
              "path": "../../utility/constants",
              "id": "src/utility/constants/index.ts::NavigationThemeType"
            }
          }
        },
        "required": false,
        "optional": false,
        "docs": {
          "tags": [],
          "text": ""
        },
        "attribute": "theme",
        "reflect": false,
        "defaultValue": "NavigationTheme.light"
      }
    };
  }
  static get states() {
    return {
      "isMyPorscheHoveredOn": {}
    };
  }
}
//# sourceMappingURL=my-porsche-icon-button.js.map
