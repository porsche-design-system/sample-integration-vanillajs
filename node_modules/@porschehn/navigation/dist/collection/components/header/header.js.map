{"version":3,"file":"header.js","sourceRoot":"","sources":["../../../../src/components/header/header.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Event, EventEmitter, h, Listen, Prop, State, Watch } from '@stencil/core';\nimport { TMenu } from '../../components';\nimport { Message } from '../../entities/auth';\nimport { Content } from '../../entities/content';\nimport { getEnvironment } from '../../entities/environment';\nimport { splitLocale } from '../../entities/locale';\nimport globalDataLayerService from '../../services/analytics/global-data-layer-service';\nimport * as contentService from '../../services/content-service';\nimport { getPPNDealer, getPPNDealerByRegion } from '../../services/dealer-service';\nimport featureToggles from '../../services/feature-toggles';\nimport logger from '../../services/logger';\nimport { initAuthIframe, initializeUserData } from '../../services/user-service';\nimport windowService from '../../services/window-service';\nimport { dealerSearchResultsStore } from '../../state/dealer-search-results-store';\nimport { navContentStore } from '../../state/nav-content-store';\nimport { navStateStore } from '../../state/nav-state-store';\nimport { shopStateStore, ShopStateStoreTypes } from '../../state/shop-state-store';\nimport { routerStore } from '../../state/router-store';\nimport {\n  EventActions,\n  IFRAME_ID,\n  NavigationMode,\n  NavigationModeType,\n  NavigationTheme,\n  NavigationThemeType,\n  VERSION\n} from '../../utility/constants';\nimport {\n  buildRoutingKeyHistoryFromContentPath,\n  getConfig,\n  getRootMenuItem,\n  getValidContentPathSegments,\n  isString,\n  sanitizeApp\n} from '../../utility/helper';\nimport { isShopAvailable, loadsShopPropsOnStore } from '../../utility/helpers/shop-helper';\nimport { Timeout } from '../../utility/timeout';\nimport { ApplicationType, Application } from '../../utility/constants/app';\nimport { showDealerSearchDropdown } from '../../utility/helpers/dealer-search-helper';\nimport abTestingService from '../../services/ab-testing/ab-testing-constructor-service';\nimport { initMonitoringSystem } from '../../services/monitoring';\n\n@Component({\n  tag: 'phn-header',\n  styleUrl: 'header.scss',\n  shadow: true,\n  assetsDirs: ['auth']\n})\nexport class Header {\n  @Prop() locale = '';\n  @Prop() env = '';\n  @Prop() clientId = '';\n  @Prop() pageName = '';\n  @Prop() theme: NavigationThemeType = NavigationTheme.light;\n  @Prop() mode: NavigationModeType = NavigationMode.navbar;\n  @Prop() limitedWidth = 'true';\n  @Prop() app: ApplicationType = Application.default;\n  @Prop() initialRoutingPath = '';\n  @Prop() displayLogoOnly = false;\n  @Prop() numberOfShoppingItems = 0;\n  @Prop() wishlistItemsNumber = 0;\n  @Prop() shopInformation = '{ \"wishlistItemsNumber\": 0, \"numberOfShoppingItems\": 0, \"subTotal\": \"0\" }';\n\n  @State() loadingContent = false;\n  @State() receivedContent = false;\n  @State() breakpoint = windowService.getBreakpoint();\n\n  private eventPreventedTimeout = new Timeout(0);\n  private checkedMarketingConsent = false;\n  private loadedToggles = false;\n\n  @Event({ composed: true }) navigationDidLoad!: EventEmitter<void>;\n  @Event({ composed: true, bubbles: true, cancelable: true }) phnLogout!: EventEmitter<void>;\n  @Event({ composed: true, bubbles: true, cancelable: true }) phnLogin!: EventEmitter<void>;\n\n  @Watch('locale')\n  async localeWatchHandler(): Promise<void> {\n    await this.initNavContentStore();\n    globalDataLayerService.setLocale(this.locale);\n    logger.init(this.breakpoint, this.locale);\n  }\n\n  @Watch('pageName')\n  pageNameWatchHandler(): void {\n    globalDataLayerService.setPageName(this.pageName);\n  }\n\n  @Watch('env')\n  async newEnvReceived(): Promise<void> {\n    await this.initEnvironment();\n    await this.initNavContentStore();\n\n    initAuthIframe(getConfig(navStateStore.state.env));\n  }\n\n  @Watch('app')\n  async appWatcher(newValue: string): Promise<void> {\n    navStateStore.state.app = sanitizeApp(newValue);\n  }\n\n  @Watch('breakpoint')\n  breakpointWatcher(): void {\n    logger.init(this.breakpoint, this.locale);\n  }\n\n  @Watch('numberOfShoppingItems')\n  @Watch('wishlistItemsNumber')\n  watchShopVariables(newValue: number, _: string, propName: keyof ShopStateStoreTypes): void {\n    shopStateStore.set(propName, newValue);\n  }\n\n  @Watch('shopInformation')\n  watchShopVariable(information: string, _: string, propName: keyof ShopStateStoreTypes): void {\n    const shopInformation = JSON.parse(information);\n    shopStateStore.set(propName, shopInformation);\n  }\n\n  @Watch('initialRoutingPath')\n  initialRoutingPathWatcher(): void {\n    this.handleInitialRoutingKeyPath();\n  }\n\n  @Listen('resize', { target: 'window', passive: true })\n  resizeHandler(): void {\n    this.breakpoint = windowService.getBreakpoint();\n  }\n\n  @Listen('message', { target: 'window', passive: true })\n  async newAuthMessageReceived(event: Message): Promise<void> {\n    const config = getConfig(navStateStore.state.env);\n\n    if (new URL(config.LOGIN_REDIRECT_URL).origin !== new URL(event.origin).origin) {\n      return;\n    }\n\n    if (isString(event.data.token)) {\n      try {\n        windowService.removeElement(IFRAME_ID);\n        await initializeUserData(event.data.token, this.locale, config);\n      } catch (err) {\n        logger.error('INIT_USER_DATA', err as Error);\n      }\n    }\n  }\n\n  @Listen('loginEvent')\n  async handleLogin(): Promise<void> {\n    const phnLogin = this.phnLogin.emit();\n\n    this.eventPreventedTimeout.set(async () => {\n      if (phnLogin.defaultPrevented) {\n        return;\n      }\n\n      const loginLink = navContentStore.state.myPorsche?.link;\n      if (isString(loginLink)) {\n        windowService.redirectToUrl(loginLink);\n        return;\n      }\n    });\n  }\n\n  @Listen('logoutEvent')\n  async handleLogout(): Promise<void> {\n    const config = getConfig(navStateStore.state.env);\n\n    const phnLogout = this.phnLogout.emit();\n\n    this.eventPreventedTimeout.set(async () => {\n      if (phnLogout.defaultPrevented) {\n        return;\n      }\n\n      // TODO which logout url to use? myporsche? auth0?\n      windowService.redirectToUrl(`${config.IDENTITY_PROVIDER_URL}/v2/logout`);\n      return;\n    });\n  }\n\n  @Listen('ucReady', { target: 'window', passive: true })\n  handleUserCentricsReady(): void {\n    this.checkMarketingConsent();\n  }\n\n  @Listen('ucInit', { target: 'window', passive: true })\n  handleUserCentricsInitalization(): void {\n    this.checkMarketingConsent();\n  }\n\n  @Listen('navigationLoaded')\n  navigationLoadedHandler({ detail: navigationLoaded }: CustomEvent<boolean>): void {\n    windowService.navigationLoaded = navigationLoaded;\n\n    if (navigationLoaded) {\n      this.navigationDidLoad.emit();\n    }\n  }\n\n  private checkMarketingConsent() {\n    if (!this.checkedMarketingConsent) {\n      navStateStore.state.userConsent = false;\n      this.checkedMarketingConsent = windowService.maybeCheckMarketingConsent(() => {\n        navStateStore.state.userConsent = true;\n      });\n    }\n  }\n\n  private async initEnvironment() {\n    navStateStore.state.env = getEnvironment(this.env);\n    navStateStore.state.app = sanitizeApp(this.app);\n    globalDataLayerService.setEnvironment(navStateStore.state.env);\n\n    const config = getConfig(navStateStore.state.env);\n    initAuthIframe(config);\n\n    this.loadedToggles = false;\n    await featureToggles.setFeatures(navStateStore.state.env);\n    this.loadedToggles = true;\n    initMonitoringSystem();\n\n    logger.init(this.breakpoint, this.locale);\n    const shopInformation = JSON.parse(this.shopInformation);\n\n    loadsShopPropsOnStore({\n      wishlistItemsNumber: this.wishlistItemsNumber,\n      numberOfShoppingItems: this.numberOfShoppingItems,\n      shopInformation: shopInformation\n    });\n\n    await abTestingService().init();\n  }\n\n  private async initNavContentStore() {\n    const previouslyReceivedContent = this.receivedContent;\n    this.receivedContent = false;\n    this.loadingContent = true;\n    try {\n      const fetchedLocale = this.locale;\n      const fetchedEnv = navStateStore.state.env;\n\n      const contentForLocale = await contentService.fetchContent(fetchedLocale, this.app);\n\n      // This is to make sure that the response is valid for the current locale and environment\n      // and wasn't made with another locale or enironment\n      if (this.locale === fetchedLocale && navStateStore.state.env === fetchedEnv) {\n        Object.assign(navContentStore.state, contentForLocale);\n        this.receivedContent = true;\n      }\n    } catch (err) {\n      logger.error('FETCH_CONTENT', err as Error);\n\n      if (previouslyReceivedContent) {\n        this.receivedContent = true;\n      }\n    }\n\n    this.loadingContent = false;\n  }\n\n  private async setDealerSearchResultsStore(): Promise<void> {\n    const { savedDealerCookie, ppnDealers } = dealerSearchResultsStore.state;\n\n    if (savedDealerCookie === null || ppnDealers[savedDealerCookie.id] !== undefined) {\n      return;\n    }\n\n    const coordinates = { latitude: savedDealerCookie.latitude, longitude: savedDealerCookie.longitude };\n    const { env } = navStateStore.state;\n\n    try {\n      const { country } = splitLocale(this.locale);\n      const { id: dealerId } = savedDealerCookie;\n\n      const ppnDealer = showDealerSearchDropdown(country)\n        ? await getPPNDealerByRegion(dealerId, country)\n        : await getPPNDealer(env, getConfig(env).DEALER_API_URL, dealerId, coordinates, country);\n\n      dealerSearchResultsStore.state.ppnDealers[savedDealerCookie.id] = ppnDealer;\n    } catch (err) {\n      logger.error('GET_DEALER', err as Error);\n      dealerSearchResultsStore.state.savedDealerCookie = null;\n    }\n  }\n\n  private handleInitialRoutingKeyPath(): void {\n    const [topLevelRoutingKey, ...segments] = this.initialRoutingPath.split('>');\n    const rootContentItem: TMenu | null = getRootMenuItem(navContentStore.state, topLevelRoutingKey as keyof Content);\n\n    if (rootContentItem === null) {\n      return;\n    }\n\n    const validSegments = getValidContentPathSegments(rootContentItem, segments);\n    const routingKeyHistory = buildRoutingKeyHistoryFromContentPath([topLevelRoutingKey, ...validSegments]);\n\n    routerStore.state.initialRoutingKeyHistory = routingKeyHistory;\n    routerStore.state.initialRoutingKeyPointer = routingKeyHistory.length - 1;\n  }\n\n  componentWillLoad(): void {\n    globalDataLayerService.setDefaultProperties(this.locale, this.pageName);\n    (window as any).ncs = navContentStore;\n\n    this.checkMarketingConsent();\n\n    this.initEnvironment()\n      .then(() => Promise.all([this.initNavContentStore(), this.setDealerSearchResultsStore()]))\n      .then(() => Promise.all([abTestingService().loadContentGeneratorExperiments()]))\n      .then(() => {\n        this.handleInitialRoutingKeyPath();\n      });\n  }\n\n  async componentDidLoad(): Promise<void> {\n    windowService.version = VERSION;\n    globalDataLayerService.pushDataLayerEvent(EventActions.GENERAL_LOAD);\n    logger.info('NAVIGATION_LOAD');\n  }\n\n  disconnectedCallback(): void {\n    this.eventPreventedTimeout.cancel();\n  }\n\n  private hasLimitedWidth(): boolean {\n    return this.mode === NavigationMode.hero && this.limitedWidth === 'true' ? true : false;\n  }\n\n  render(): HTMLPhnHeaderElement {\n    if (!this.loadedToggles) {\n      return <div></div>;\n    }\n\n    return (\n      // div needed because conditional styling does not work on Host of shadow component for some unknown reason\n      <div class={this.hasLimitedWidth() ? 'header limited-width' : 'header'}>\n        <phn-wrapper\n          theme={this.theme}\n          mode={this.mode}\n          locale={this.locale}\n          loadingContent={this.loadingContent}\n          receivedContent={this.receivedContent}\n          breakpoint={this.breakpoint}\n          app={sanitizeApp(this.app)}\n          displayLogoOnly={this.displayLogoOnly}\n          limitedWidth={this.hasLimitedWidth()}\n        >\n          {isShopAvailable(this.locale, sanitizeApp(this.app)) ? (\n            <div slot=\"contextual_drawer_header\">\n              <slot name=\"contextual_drawer_header\"></slot>\n            </div>\n          ) : null}\n        </phn-wrapper>\n      </div>\n    );\n  }\n}\n"]}