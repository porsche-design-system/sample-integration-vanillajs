{"version":3,"file":"menu.js","sourceRoot":"","sources":["../../../../src/components/menu/menu.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Element, Event, EventEmitter, h, Host, JSX, Prop, State } from '@stencil/core';\nimport { TLink, TMenu, TVehiclePurchaseMenu } from '../../entities/content';\nimport { constructRoutingKey } from '../../entities/routing-key';\nimport { EventActions } from '../../utility/constants';\nimport { isString } from '../../utility/helper';\nimport { componentsOnReady } from '../../utility/ready';\nimport { Timeout } from '../../utility/timeout';\nimport { finderStateStore } from '../../state/finder-state-store';\nimport MenuItemLink from './saved-vehicles/menu-item-link';\nimport { addRoute, getCurrentRoute } from '../../services/routing-manager';\n\n@Component({\n  tag: 'phn-menu',\n  styleUrl: 'menu.scss',\n  scoped: true\n})\nexport class Menu {\n  @Prop() item!: TMenu | TVehiclePurchaseMenu;\n  @Prop() showHeadline = true;\n  @Prop() receivedContent = false;\n\n  @State() showSkeleton = true;\n\n  @Element() el!: HTMLPhnMenuElement;\n\n  @Event({ bubbles: true, cancelable: false }) mobileMenuItemClick!: EventEmitter<string[]>;\n\n  componentWillLoad(): void {\n    this.waitForComponentsToLoad();\n  }\n\n  private savedVehiclesPosition = 3;\n\n  private async waitForComponentsToLoad() {\n    await componentsOnReady(this.el, new Timeout(5000));\n    this.showSkeleton = !this.receivedContent;\n  }\n\n  // TODO: fix this\n  private showMenu(childItem: TMenu): void {\n    if (!isString(childItem.link)) {\n      addRoute([childItem.id]);\n    }\n  }\n\n  private getSavedVehiclesContent(content: TMenu | TVehiclePurchaseMenu): TLink | null {\n    const savedVehicles = (content as TVehiclePurchaseMenu).savedVehicles;\n    if (savedVehicles !== undefined) {\n      return savedVehicles;\n    }\n    return null;\n  }\n\n  render(): JSX.Element {\n    const displayedItem = this.item.children.length === 1 ? this.item.children[0] : this.item;\n    const savedVehicles = this.getSavedVehiclesContent(this.item);\n    const { savedVehiclesCount } = finderStateStore.state;\n\n    const menuItems = displayedItem.children.map((childItem) => (\n      <phn-menu-item\n        key={childItem.id}\n        class={`${this.showSkeleton ? 'skeleton' : ''}`}\n        elementId={constructRoutingKey(getCurrentRoute(), childItem.id)}\n        iconRight={childItem.children.length > 0 && !this.showSkeleton ? 'arrow-head-right' : ''}\n        analyticsId={childItem.id}\n        text={childItem.text}\n        link={childItem.link}\n        datalayerEventAction={\n          isString(childItem.link) ? EventActions.NAVIGATION_LINK_CLICK : EventActions.NAVIGATION_CLICK\n        }\n        onClick={() => this.showMenu(childItem)}\n        role=\"listitem\"\n      />\n    ));\n\n    return (\n      <Host role=\"list\">\n        <ul>\n          {menuItems}\n\n          {savedVehicles\n            ? menuItems.splice(\n                this.savedVehiclesPosition,\n                0,\n                <MenuItemLink content={savedVehicles} count={savedVehiclesCount} showSkeleton={this.showSkeleton} />\n              )\n            : null}\n        </ul>\n      </Host>\n    );\n  }\n}\n"]}