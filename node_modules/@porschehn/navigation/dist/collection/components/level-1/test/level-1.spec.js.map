{"version":3,"file":"level-1.spec.js","sourceRoot":"","sources":["../../../../../src/components/level-1/test/level-1.spec.tsx"],"names":[],"mappings":"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","sourcesContent":["import { h } from '@stencil/core';\nimport { newSpecPage, SpecPage } from '@stencil/core/testing';\nimport { RoutingKeys } from '../../../entities/routing-key';\nimport { navContentStore } from '../../../state/nav-content-store';\nimport { navStateStore } from '../../../state/nav-state-store';\nimport {\n  mockDealerContent,\n  mockModelsContent,\n  mockMyPorscheContent,\n  mockShopLinkContent\n} from '../../../test/test-data';\nimport { LOGGED_IN_USER_NO_NAME_STATUS } from '../../../utility/constants';\nimport { MenuItem } from '../../menu-item/menu-item';\nimport { Level1 } from '../level-1';\nimport { breakpoint } from '@porsche-design-system/components-js/styles';\n\ndescribe('level-1', () => {\n  let page: SpecPage;\n  const defaultProps = {\n    locale: 'de-DE'\n  };\n  let mobileMenuItemItemClickSpy: jest.SpyInstance;\n\n  beforeEach(async () => {\n    navContentStore.state.models = mockModelsContent;\n    navContentStore.state.shop = mockShopLinkContent;\n    navContentStore.state.dealer = mockDealerContent;\n    navContentStore.state.myPorsche = mockMyPorscheContent;\n    navStateStore.state.loggedInState = 'Mirinda Doe';\n    navStateStore.state.unreadMessagesCount = 2;\n\n    page = await newSpecPage({\n      components: [Level1, MenuItem],\n      template: () => <phn-level-1 {...defaultProps} breakpoint={breakpoint.xs} />\n    });\n\n    mobileMenuItemItemClickSpy = jest.spyOn(page.rootInstance.mobileMenuItemClick, 'emit');\n  });\n\n  it('should render level 1', () => {\n    expect(page.root).toMatchInlineSnapshot(`\n      <phn-level-1>\n        <nav>\n          <phn-menu-item class=\"level1-variant\">\n            <!---->\n            <phn-p-button-pure align-label=\"left\" data-id=\"models\" icon=\"arrow-head-right\" size=\"inherit\" stretch=\"true\">\n              <div class=\"phn-align-center phn-flex-row\">\n                <div class=\"skeleton-item\">\n                  <phn-p-text color=\"inherit\" size=\"inherit\" tag=\"div\" weight=\"regular\">\n                    Models\n                  </phn-p-text>\n                </div>\n              </div>\n            </phn-p-button-pure>\n          </phn-menu-item>\n          <phn-menu-item class=\"level1-variant\">\n            <!---->\n            <phn-p-button-pure align-label=\"left\" data-id=\"vehicle_purchase\" icon=\"arrow-head-right\" size=\"inherit\" stretch=\"true\">\n              <div class=\"phn-align-center phn-flex-row\"></div>\n            </phn-p-button-pure>\n          </phn-menu-item>\n          <phn-menu-item class=\"level1-variant\">\n            <!---->\n            <phn-p-link-pure align-label=\"left\" data-id=\"shop\" icon=\"external\" stretch=\"true\" target=\"_self\">\n              <a href=\"https://shop.porsche.com/de/de-DE\">\n                <div class=\"phn-align-center phn-flex-row\">\n                  <div class=\"skeleton-item\">\n                    <phn-p-text color=\"inherit\" size=\"inherit\" tag=\"div\" weight=\"regular\">\n                      Shop\n                    </phn-p-text>\n                  </div>\n                </div>\n              </a>\n            </phn-p-link-pure>\n          </phn-menu-item>\n          <phn-menu-item class=\"level1-variant\">\n            <!---->\n            <phn-p-button-pure align-label=\"left\" data-id=\"services\" icon=\"arrow-head-right\" size=\"inherit\" stretch=\"true\">\n              <div class=\"phn-align-center phn-flex-row\"></div>\n            </phn-p-button-pure>\n          </phn-menu-item>\n          <phn-menu-item class=\"level1-variant\">\n            <!---->\n            <phn-p-button-pure align-label=\"left\" data-id=\"experience\" icon=\"arrow-head-right\" size=\"inherit\" stretch=\"true\">\n              <div class=\"phn-align-center phn-flex-row\"></div>\n            </phn-p-button-pure>\n          </phn-menu-item>\n          <phn-menu-item class=\"level1-variant\">\n            <!---->\n            <phn-p-link-pure align-label=\"left\" data-id=\"find_a_dealer\" icon=\"arrow-head-right\" stretch=\"true\" target=\"_self\">\n              <a href=\"http://www.porsche.com/all-dealers-map\">\n                <div class=\"phn-align-center phn-flex-row\">\n                  <div class=\"skeleton-item\">\n                    <phn-p-text color=\"inherit\" size=\"inherit\" tag=\"div\" weight=\"regular\">\n                      Find a Dealer\n                    </phn-p-text>\n                  </div>\n                </div>\n              </a>\n            </phn-p-link-pure>\n          </phn-menu-item>\n          <phn-menu-item class=\"level1-variant\">\n            <!---->\n            <span aria-hidden=\"true\" class=\"myporsche-unread-messages-indicator\" data-test-id=\"unread-messages-indicator\" slot=\"icon-modifier\"></span>\n            <phn-p-button-pure align-label=\"left\" data-id=\"my_porsche\" icon=\"arrow-head-right\" size=\"inherit\" stretch=\"true\">\n              <div class=\"phn-align-center phn-flex-row\">\n                <div class=\"skeleton-item\">\n                  <phn-p-text color=\"inherit\" size=\"inherit\" tag=\"div\" weight=\"regular\">\n                    My Porsche\n                  </phn-p-text>\n                  <div class=\"text-limit\">\n                    <phn-p-text class=\"subtext\" color=\"inherit\" data-test-id=\"subtext\" ellipsis=\"true\" size=\"x-small\" tag=\"div\" weight=\"regular\">\n                      Mirinda Doe\n                    </phn-p-text>\n                  </div>\n                </div>\n              </div>\n            </phn-p-button-pure>\n          </phn-menu-item>\n        </nav>\n      </phn-level-1>\n    `);\n  });\n\n  it('should emit event when clicking on one menu item', () => {\n    const items = page.root?.querySelectorAll('phn-menu-item');\n    items?.[0]?.click();\n\n    expect(mobileMenuItemItemClickSpy).toHaveBeenCalledTimes(1);\n    expect(mobileMenuItemItemClickSpy).toHaveBeenCalledWith([RoutingKeys.MODELS]);\n  });\n\n  it('should not emit event when dealer search menu item is clicked in China', async () => {\n    const page = await newSpecPage({\n      components: [Level1, MenuItem],\n      template: () => <phn-level-1 {...defaultProps} locale={'zh-CN'} breakpoint={breakpoint.xs} />\n    });\n\n    const items = page.root?.querySelectorAll('phn-menu-item');\n\n    expect(items?.[5].querySelector('a')).toEqualAttribute('href', navContentStore.state.dealer.search.map.link);\n  });\n\n  it('should show generic name if myPorsche is enabled and user is logged in but has no username', async () => {\n    navStateStore.state.loggedInState = LOGGED_IN_USER_NO_NAME_STATUS;\n    await page.waitForChanges();\n\n    expect(page.root?.innerHTML).toContain(mockMyPorscheContent.loggedInFallback);\n  });\n});\n"]}