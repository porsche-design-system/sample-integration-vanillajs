{"version":3,"file":"dealer-search-form.js","sourceRoot":"","sources":["../../../../src/components/dealer-search-form/dealer-search-form.tsx"],"names":[],"mappings":"AAAA,0DAA0D;AAE1D,OAAO,EAAE,SAAS,EAAE,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,eAAe,CAAC;AAEjF,OAAO,EAAE,wBAAwB,EAAE,MAAM,4CAA4C,CAAC;AACtF,OAAO,EAAE,WAAW,EAAE,MAAM,uBAAuB,CAAC;AACpD,OAAO,EAAE,eAAe,EAAE,MAAM,+BAA+B,CAAC;AAUhE,MAAM,OAAO,gBAAgB;;;;wBAGJ,IAAI;;uBAGJ,KAAK;4BACe,IAAI;wBACvB,IAAI;0BAOF,KAAK;;EAJ/B,aAAa,CAAC,CAAuB;IACnC,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,MAAM,CAAC;EAC9B,CAAC;EAOD,0BAA0B,CAAC,MAAa;IACtC,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;EAC5B,CAAC;EAEO,qBAAqB;IAC3B,MAAM,EAAE,MAAM,EAAE,GAAG,eAAe,CAAC,KAAK,CAAC;IACzC,IAAI,MAAM,CAAC,eAAe,IAAI,CAAC,EAAE;MAC/B,OAAO,mBAAmB,CAAC;KAC5B;IAED,IAAI,wBAAwB,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC;MAAE,OAAO,UAAU,CAAC;IAElF,OAAO,aAAa,CAAC;EACvB,CAAC;EAEO,aAAa;IACnB,MAAM,0BAA0B,GAAwD;MACtF,WAAW,EAAE,GAAG,EAAE,CAAC,0CAAoC,MAAM,EAAE,IAAI,CAAC,MAAM,GAAI;MAC9E,QAAQ,EAAE,GAAG,EAAE,CAAC,uCAAiC,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,UAAU,EAAE,IAAI,CAAC,UAAU,GAAI;MACrG,iBAAiB,EAAE,GAAG,EAAE,CAAC,8CAAwC,MAAM,EAAE,IAAI,CAAC,MAAM,GAAI;KACzF,CAAC;IAEF,MAAM,YAAY,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;IAClD,OAAO,0BAA0B,CAAC,YAAY,CAAC,EAAE,CAAC;EACpD,CAAC;EAED,MAAM;IACJ,OAAO,CACL,EAAC,IAAI,IAAC,KAAK,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE;MAC7C,IAAI,CAAC,aAAa,EAAE;MAErB,iCAA2B,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,UAAU,EAAE,IAAI,CAAC,UAAU,EAAE,WAAW,EAAE,IAAI,CAAC,WAAW,GAAI,CACzG,CACR,CAAC;EACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF","sourcesContent":["/* eslint-disable jsx-a11y/label-has-associated-control */\n\nimport { Component, Element, h, Host, Listen, Prop, State } from '@stencil/core';\nimport { Dealer } from '../../entities/content';\nimport { showDealerSearchDropdown } from '../../utility/helpers/dealer-search-helper';\nimport { splitLocale } from '../../entities/locale';\nimport { navContentStore } from '../../state/nav-content-store';\n\ntype DealerSearchFormStrategy = 'geolocation' | 'dropdown' | 'byNumberOfDealers';\n\n@Component({\n  tag: 'phn-dealer-search-form',\n  styleUrl: 'dealer-search-form.scss',\n  scoped: true,\n  assetsDirs: ['./assets']\n})\nexport class DealerSearchForm {\n  @Prop() dealer!: Dealer;\n  @Prop() locale!: string;\n  @Prop() showHeadline = true;\n  @Prop() breakpoint!: number;\n\n  @State() showOverlay = false;\n  @State() formErrorMessage: string | null = null;\n  @State() showSkeleton = true;\n\n  @Listen('predictionsToggle')\n  toggleOverlay(e: CustomEvent<boolean>): void {\n    this.showOverlay = e.detail;\n  }\n\n  @State() animateResults = false;\n\n  @Element() el!: HTMLPhnDealerSearchFormElement;\n\n  @Listen('removeSkeletonOnDealerSearchForm')\n  loadedAutoCompleteListener(_event: Event): void {\n    this.showSkeleton = false;\n  }\n\n  private getDealerFormStrategy(): DealerSearchFormStrategy {\n    const { dealer } = navContentStore.state;\n    if (dealer.numberOfDealers <= 5) {\n      return 'byNumberOfDealers';\n    }\n\n    if (showDealerSearchDropdown(splitLocale(this.locale).country)) return 'dropdown';\n\n    return 'geolocation';\n  }\n\n  private formComponent(): HTMLElement {\n    const dealerSearchFormStrategies: Record<DealerSearchFormStrategy, () => HTMLElement> = {\n      geolocation: () => <phn-dealer-search-form-geolocation locale={this.locale} />,\n      dropdown: () => <phn-dealer-search-form-dropdown locale={this.locale} breakpoint={this.breakpoint} />,\n      byNumberOfDealers: () => <phn-dealer-search-by-number-of-dealers locale={this.locale} />\n    };\n\n    const formStrategy = this.getDealerFormStrategy();\n    return dealerSearchFormStrategies[formStrategy]();\n  }\n\n  render(): HTMLPhnDealerSearchFormElement {\n    return (\n      <Host class={this.showSkeleton ? 'skeleton' : ''}>\n        {this.formComponent()}\n\n        <phn-dealer-search-results locale={this.locale} breakpoint={this.breakpoint} showOverlay={this.showOverlay} />\n      </Host>\n    );\n  }\n}\n"]}