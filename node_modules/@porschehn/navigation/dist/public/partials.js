/* eslint-disable @typescript-eslint/no-var-requires, no-undef */
const {
  getFontLinks,
  getFontFaceStylesheet,
  getInitialStyles,
  getComponentChunkLinks
} = require('@porsche-design-system/components-js/partials');
const fs = require('fs');
const path = require('path');

module.exports = {
  partials() {
    let styles;

    try {
      const data = fs.readFileSync(
        path.resolve('./node_modules/@porschehn/navigation/dist/porsche-navigation', 'porsche-navigation.css')
      );
      styles = `<style>${data}</style>`;
    } catch (_) {
      styles =
        '<link rel="stylesheet" href="https://nav.porsche.com/00BC524/porsche-navigation.css" crossorigin type="text/css">';
    }

    const pdsPartials = [
      getFontLinks({ weights: ['regular', 'semi-bold'] }),
      getFontFaceStylesheet(),
      getInitialStyles({ prefix: 'phn' }),
      getComponentChunkLinks({ components: ['crest', 'wordmark'] })
    ];

    return `${pdsPartials.join(' ')}${styles}`;
  }
};
