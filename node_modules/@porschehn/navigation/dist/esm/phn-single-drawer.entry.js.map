{"file":"phn-single-drawer.entry.js","mappings":";;;;;;;;;;;;;;;;;SAIwB,aAAa,CAAC,EACpC,UAAU,EACV,kBAAkB,EAClB,UAAU,EACV,MAAM,EACN,cAAc,EACd,eAAe,EAQhB;EACC,MAAM,EAAE,IAAI,EAAE,GAAG,eAAe,CAAC,KAAK,CAAC;EACvC,MAAM,cAAc,GAAG,iBAAiB,CAAC,eAAe,CAAC,KAAK,EAAE,kBAAkB,aAAlB,kBAAkB,cAAlB,kBAAkB,GAAI,EAAE,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC;EAEvG,QACE,EAAC,QAAQ;IACP,WAAK,KAAK,EAAC,iBAAiB,GAAO;IACnC,WAAK,KAAK,EAAC,gBAAgB;MACzB,yBACE,cAAc,EAAE,cAAc,EAC9B,qBAAqB,EAAE,IAAI,CAAC,EAAE,EAC9B,cAAc,EAAE,cAAc,EAC9B,gBAAgB,EAAE,UAAU,EAC5B,UAAU,EAAE,UAAU,EACtB,eAAe,EAAE,eAAe,EAChC,MAAM,EAAE,MAAM,GACd;MACF,kBACE,gBAAgB,EAAE,UAAU,EAC5B,UAAU,EAAE,UAAU,EACtB,MAAM,EAAE,MAAM,EACd,eAAe,EAAE,eAAe,GAChC,CACE,CACG,EACX;AACJ;;AC5CA,MAAM,eAAe,GAAG,usIAAusI;;MCgCltI,YAAY;;;;;;;;IAoBf,iBAAY,GAAG,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC;IAC9B,sBAAiB,GAA6C,EAAE,CAAC;;;yBAlBjD,KAAK;;;2BAGH,KAAK;4BAEH,CAAC,CAAC;;EAgB9B,aAAa,CAAC,CAAgB;IAC5B,IAAI,CAAC,CAAC,GAAG,KAAK,KAAK,EAAE;MACnB,OAAO;KACR;IAED,MAAM,aAAa,GAAG,cAAc,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;IAC/C,IAAI,aAAa,KAAK,IAAI,EAAE;MAC1B,OAAO;KACR;IAED,IAAI,uBAAuB,GAAG,uBAAuB,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC,CAAC;IACxF,IAAI,uBAAuB,CAAC,MAAM,KAAK,CAAC,EAAE;MACxC,OAAO;KACR;IAED,MAAM,gBAAgB,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;IACxE,IAAI,gBAAgB,CAAC,UAAU,CAAC,WAAW,CAAC,aAAa,CAAC,EAAE;MAC1D,uBAAuB,GAAG,uBAAuB,CAAC,MAAM,CACtD,CAAC,OAAO,KAAK,OAAO,CAAC,QAAQ,KAAK,QAAQ,IAAI,OAAO,CAAC,QAAQ,KAAK,GAAG,CACvE,CAAC;KACH;IAED,MAAM,2BAA2B,GAAG,uBAAuB,CAAC,CAAC,CAAC,CAAC;IAC/D,MAAM,0BAA0B,GAAG,uBAAuB,CAAC,uBAAuB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;IAE/F,IAAI,aAAa,KAAK,2BAA2B,IAAI,CAAC,CAAC,QAAQ,EAAE;MAC/D,CAAC,CAAC,cAAc,EAAE,CAAC;MAEnB,IAAI,0BAA0B,KAAK,IAAI,EAAE;QACvC,cAAc,CAAC,0BAA0B,CAAC,CAAC;OAC5C;MAED,OAAO;KACR;IAED,IAAI,aAAa,KAAK,0BAA0B,IAAI,CAAC,CAAC,CAAC,QAAQ,EAAE;MAC/D,CAAC,CAAC,cAAc,EAAE,CAAC;MAEnB,IAAI,2BAA2B,KAAK,IAAI,EAAE;QACxC,cAAc,CAAC,2BAA2B,CAAC,CAAC;OAC7C;MAED,OAAO;KACR;GACF;EAGD,yBAAyB,CAAC,CAAa;IACrC,IAAI,8BAA8B,EAAE,EAAE;MACpC,CAAC,CAAC,eAAe,EAAE,CAAC;MACpB,OAAO;KACR;IACD,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,iBAAiB,CAAC;GAChD;EAGD,4BAA4B,CAAC,CAAa;IACxC,IAAI,8BAA8B,EAAE,EAAE;MACpC,CAAC,CAAC,eAAe,EAAE,CAAC;MACpB,OAAO;KACR;GACF;EAGD,2BAA2B,CAAC,CAAa;IACvC,IAAI,8BAA8B,EAAE,EAAE;MACpC,CAAC,CAAC,eAAe,EAAE,CAAC;MACpB,OAAO;KACR;IACD,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,iBAAiB,CAAC;GAChD;EAEO,eAAe;IACrB,MAAM,iBAAiB,GACrB,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,gBAAgB,CAAC,GAAG,EAAE,CAAC;IAEtG,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,iBAAiB,CAAC;IAE/C,MAAM,qBAAqB,GAAG,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,GAAG,CAAC,CAAC;IACzF,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;;IAG/C,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC;MACpB,IAAI,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,CAAC;KAC7C,CAAC,CAAC;IACH,IAAI,CAAC,kBAAkB,EAAE,CAAC;GAC3B;EAED,iBAAiB;IACf,iCAAiC,CAAC;MAChC,iBAAiB,EAAE;QACjB,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,kBAAkB,CAAC,YAAY,EAAE,CAAC,CAAC;OACxE;MACD,eAAe,EAAE;QACf,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,kBAAkB,CAAC,aAAa,EAAE,CAAC,CAAC;OACzE;KACF,CAAC,CAAC;IACH,kCAAkC,CAAC;MACjC,iBAAiB,EAAE;QACjB,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,kBAAkB,CAAC,YAAY,EAAE,CAAC,CAAC;OACxE;MACD,eAAe,EAAE;QACf,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC;QAC3B,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,kBAAkB,CAAC,aAAa,EAAE,CAAC,CAAC;OACzE;KACF,CAAC,CAAC;IACH,gDAAgD,CAAC;MAC/C,eAAe,EAAE,MAAM,IAAI,CAAC,eAAe,EAAE;KAC9C,CAAC,CAAC;IACH,oDAAoD,CAAC,EAAE,eAAe,EAAE,MAAM,IAAI,CAAC,eAAe,EAAE,EAAE,CAAC,CAAC;GACzG;EAEO,mBAAmB,CAAC,iBAAyB;IACnD,MAAM,gBAAgB,GAAG,cAAc,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,oBAAoB,CAAC,CAAC,CAAC;IACrF,IAAI,gBAAgB,KAAK,IAAI,EAAE;MAC7B,cAAc,CAAC,gBAAgB,CAAC,CAAC;MACjC,OAAO;KACR;IAED,IAAI,IAAI,CAAC,aAAa,EAAE;MACtB,IAAI,iBAAiB,GAAuB,IAAI,CAAC;MAEjD,IAAI,QAAQ,CAAC,iBAAiB,CAAC,EAAE;QAC/B,iBAAiB,GAAG,cAAc,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,qBAAqB,iBAAiB,IAAI,CAAC,CAAC,CAAC;OACvG;MAED,IAAI,iBAAiB,KAAK,IAAI,EAAE;QAC9B,iBAAiB,GAAG,cAAc,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,WAAW,2BAA2B,EAAE,CAAC,CAAC,CAAC;OACrG;MAED,IAAI,iBAAiB,KAAK,IAAI,EAAE;QAC9B,cAAc,CAAC,iBAAiB,CAAC,CAAC;OACnC;KACF;SAAM;;MAEL,MAAM,UAAU,GAAG,cAAc,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,CAAC;MAEzE,IAAI,UAAU,KAAK,IAAI,EAAE;QACvB,cAAc,CAAC,UAAU,CAAC,CAAC;OAC5B;KACF;GACF;EAEO,kBAAkB;IACxB,gBAAgB,CAAC,aAAa,CAAC,mBAAmB,CAAC,YAAY,CAAC,CAAC;IACjE,MAAM,gBAAgB,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;IAExE,sBAAsB,CAAC,kBAAkB,CAAC,YAAY,CAAC,WAAW,EAAE;MAClE,gBAAgB,EAAE;QAChB,kBAAkB,EAAE,gBAAgB,CAAC,2BAA2B,CAAC,gBAAgB,EAAE,YAAY,CAAC,YAAY,CAAC;QAC7G,gBAAgB,EAAE,gBAAgB,CAAC,yBAAyB,EAAE;QAC9D,kBAAkB,EAAE,eAAe;OACpC;KACF,CAAC,CAAC;GACJ;EAED,oBAAoB;IAClB,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC;GAC5B;EAED,MAAM,kBAAkB;IACtB,MAAM,QAAQ,GAAG,EAAE,CAAC;IACpB,KAAK,MAAM,SAAS,IAAI,IAAI,CAAC,iBAAiB,EAAE;MAC9C,MAAM,YAAY,GAAG,SAAS,EAAE,CAAC;MACjC,IAAI,SAAS,CAAO,YAAY,CAAC,EAAE;QACjC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;OAC7B;KACF;IAED,MAAM,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;IAC5B,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;GACjE;EAED,MAAM;;IACJ,MAAM,SAAS,GAAG,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,gBAAgB,CAAC;IACjE,MAAM,SAAS,GAAG,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,gBAAgB,CAAC;IAEjE,IAAI,uBAAuB,GAAG,CAAC,CAAC,CAAC;IACjC,IAAI,0BAA0B,GAAG,IAAI,CAAC,iBAAiB,CAAC;IAExD,IAAI,SAAS,EAAE;MACb,uBAAuB,GAAG,IAAI,CAAC,iBAAiB,CAAC;MACjD,0BAA0B,GAAG,IAAI,CAAC,gBAAgB,CAAC;MAEnD,IAAI,0BAA0B,KAAK,kBAAkB,CAAC,UAAU,EAAE;QAChE,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC;UAC1B,gBAAgB,CAAC,IAAI,CAAC,kBAAkB,CAAC,mCAAmC,CAAC,CAAC;SAC/E,CAAC,CAAC;OACJ;KACF;SAAM,IAAI,SAAS,EAAE;MACpB,uBAAuB,GAAG,IAAI,CAAC,gBAAgB,CAAC;MAEhD,IAAI,0BAA0B,KAAK,kBAAkB,CAAC,UAAU,EAAE;QAChE,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC;UAC1B,gBAAgB,CAAC,IAAI,CAAC,kBAAkB,CAAC,uCAAuC,CAAC,CAAC;SACnF,CAAC,CAAC;OACJ;KACF;IAED,MAAM,mBAAmB,GAAG,MAAA,IAAI,CAAC,iBAAiB,CAAC,uBAAuB,CAAC,mCAAI,EAAE,CAAC;IAClF,MAAM,UAAU,GAAG,MAAA,IAAI,CAAC,iBAAiB,CAAC,0BAA0B,CAAC,mCAAI,EAAE,CAAC;IAE5E,QACE,EAAC,IAAI,QACF,QAAQ,CAAC,UAAU,CAAC,IACnB,WAAK,KAAK,EAAC,eAAe,EAAC,GAAG,EAAE,UAAU,IACxC,YAAM,KAAK,EAAC,aAAa,EAAC,QAAQ,EAAE,CAAC,CAAC,iBAAc,MAAM,GAAG,EAE7D,EAAC,aAAa,IACZ,UAAU,EAAE,UAAU,EACtB,kBAAkB,EAAE,IAAI,CAAC,iBAAiB,CAAC,0BAA0B,GAAG,CAAC,CAAC,EAC1E,UAAU,EAAE,IAAI,CAAC,UAAU,EAC3B,MAAM,EAAE,IAAI,CAAC,MAAM,EACnB,cAAc,EAAE,0BAA0B,GAAG,CAAC,EAC9C,eAAe,EAAE,IAAI,CAAC,eAAe,GACrC,CACE,IACJ,IAAI,EAEP,QAAQ,CAAC,mBAAmB,CAAC,IAC5B,WAAK,KAAK,EAAE,kBAAkB,EAAE,KAAK,EAAE,SAAS,GAAG,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,mBAAmB,IAClG,EAAC,aAAa,IACZ,UAAU,EAAE,mBAAmB,EAC/B,kBAAkB,EAAE,IAAI,CAAC,iBAAiB,CAAC,uBAAuB,GAAG,CAAC,CAAC,EACvE,UAAU,EAAE,IAAI,CAAC,UAAU,EAC3B,MAAM,EAAE,IAAI,CAAC,MAAM,EACnB,cAAc,EAAE,uBAAuB,GAAG,CAAC,EAC3C,eAAe,EAAE,IAAI,CAAC,eAAe,GACrC,CACE,IACJ,IAAI,CACH,EACP;GACH;;;;;;;","names":[],"sources":["src/components/single-drawer/drawer-content.tsx","src/components/single-drawer/single-drawer.scss?tag=phn-single-drawer&encapsulation=scoped","src/components/single-drawer/single-drawer.tsx"],"sourcesContent":["import { Fragment, h, JSX } from '@stencil/core';\nimport { getBackButtonText } from '../../services/menu-items-service';\nimport { navContentStore } from '../../state/nav-content-store';\n\nexport default function DrawerContent({\n  routingKey,\n  previousRoutingKey,\n  breakpoint,\n  locale,\n  showBackButton,\n  receivedContent\n}: {\n  routingKey: string;\n  previousRoutingKey: string;\n  breakpoint: number;\n  locale: string;\n  showBackButton: boolean;\n  receivedContent: boolean;\n}): JSX.Element {\n  const { menu } = navContentStore.state;\n  const backButtonText = getBackButtonText(navContentStore.state, previousRoutingKey ?? '') || menu.text;\n\n  return (\n    <Fragment>\n      <div class=\"bottom-gradient\"></div>\n      <div class=\"drawer-content\">\n        <phn-drawer-header\n          showBackButton={showBackButton}\n          backButtonAnalyticsId={menu.id}\n          backButtonText={backButtonText}\n          activeRoutingKey={routingKey}\n          breakpoint={breakpoint}\n          receivedContent={receivedContent}\n          locale={locale}\n        />\n        <phn-router\n          activeRoutingKey={routingKey}\n          breakpoint={breakpoint}\n          locale={locale}\n          receivedContent={receivedContent}\n        />\n      </div>\n    </Fragment>\n  );\n}\n","@import '../../scss';\n\n:host {\n  display: block;\n\n  .drawer {\n    z-index: $phn-z-index-mega-flyout + 1;\n    background-color: $pds-theme-light-background-base;\n    position: fixed;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    width: 100vw;\n\n    .drawer-content {\n      overflow-y: auto;\n      height: 100vh;\n      width: 100vw;\n      box-sizing: border-box;\n      padding: 0 p-px-to-rem(27px) p-px-to-rem(100px) p-px-to-rem(27px);\n\n      @include pds-media-query-min('xs') {\n        padding: 0 p-px-to-rem(35px) p-px-to-rem(100px) p-px-to-rem(35px);\n      }\n\n      @include pds-media-query-min('s') {\n        padding: 0 p-px-to-rem(54px) p-px-to-rem(100px) p-px-to-rem(54px);\n      }\n\n      @include pds-media-query-min('m') {\n        padding: 0 p-px-to-rem(36px) p-px-to-rem(100px) p-px-to-rem(36px);\n      }\n\n      phn-drawer-header {\n        box-sizing: border-box;\n        margin-top: p-px-to-rem(18px);\n        margin-bottom: p-px-to-rem(31px);\n\n        @include pds-media-query-min('xs') {\n          margin-top: p-px-to-rem(32px);\n          margin-bottom: p-px-to-rem(37px);\n        }\n\n        @include pds-media-query-min('s') {\n          margin-bottom: p-px-to-rem(20px);\n        }\n      }\n\n      phn-router {\n        padding-bottom: 4rem;\n      }\n    }\n\n    .bottom-gradient{\n      @include drawer-gradient(rgba(255, 255, 255, 0), rgba(255, 255, 255));\n      margin-left: 0;\n      z-index: 1;\n    }\n  }\n\n}\n","import { Component, Element, Event, EventEmitter, h, Host, Listen, Prop, State } from '@stencil/core';\nimport { RoutingKeyPointers, RoutingKeys } from '../../entities/routing-key';\nimport animationManager from '../../services/animations/animation-manager';\nimport globalDataLayerService from '../../services/analytics/global-data-layer-service';\nimport {\n  AnimationSequences,\n  DisplayElementTypes,\n  ElementTypes,\n  EventActions,\n  FOCUSABLE_ELEMENTS_SELECTOR\n} from '../../utility/constants';\nimport { focusOnElement, getHTMLElement, isPromise, isString } from '../../utility/helper';\nimport { Timeout } from '../../utility/timeout';\nimport DrawerContent from './drawer-content';\nimport {\n  isPlayingSingleDrawerAnimation,\n  registerCloseSingleDrawerAnimation,\n  registerOpenSingleDrawerAnimation,\n  registerTransitionNextLevelSingleDrawerAnimation,\n  registerTransitionPreviousLevelSingleDrawerAnimation\n} from './single-drawer-animation-sequences';\nimport analyticsManager from '../../services/analytics/analytics-manager';\nimport { DrawerStatusTypes, DrawerStatusValues } from '../../utility/constants/app';\nimport { getAllFocusableElements } from '../double-drawer/helper';\n\n// INFO: For routing explanation, see README in this directory\n\n@Component({\n  tag: 'phn-single-drawer',\n  scoped: true,\n  styleUrl: 'single-drawer.scss'\n})\nexport class SingleDrawer {\n  @Prop() breakpoint!: number;\n  @Prop() locale!: string;\n  @Prop() usingKeyboard = false;\n  @Prop() routingKeyHistory!: string[];\n  @Prop() routingKeyPointer!: number;\n  @Prop() receivedContent = false;\n\n  @State() animatingPointer = -1;\n\n  @Event() drawerClosed!: EventEmitter<void>;\n  @Event() drawerChanged!: EventEmitter<boolean>;\n  @Event() drawerStartsClosing!: EventEmitter<void>;\n  @Event() backdropClosed!: EventEmitter<void>;\n  @Event({ composed: true, bubbles: true }) phnDrawerStatus!: EventEmitter<{\n    status: DrawerStatusTypes;\n  }>;\n\n  @Element() el!: HTMLPhnSingleDrawerElement;\n\n  private focusTimeout = new Timeout(0);\n  private operationPipeline: ((() => Promise<void>) | (() => void))[] = [];\n\n  @Listen('keydown', { passive: false })\n  handleKeyDown(e: KeyboardEvent): void {\n    if (e.key !== 'Tab') {\n      return;\n    }\n\n    const targetElement = getHTMLElement(e.target);\n    if (targetElement === null) {\n      return;\n    }\n\n    let focusableDrawerElements = getAllFocusableElements(this.el.querySelector('.active'));\n    if (focusableDrawerElements.length === 0) {\n      return;\n    }\n\n    const activeRoutingKey = this.routingKeyHistory[this.routingKeyPointer];\n    if (activeRoutingKey.startsWith(RoutingKeys.DEALER_SEARCH)) {\n      focusableDrawerElements = focusableDrawerElements.filter(\n        (element) => element.nodeName !== 'BUTTON' && element.nodeName !== 'A'\n      );\n    }\n\n    const firstFocusableDrawerElement = focusableDrawerElements[0];\n    const lastFocusableDrawerElement = focusableDrawerElements[focusableDrawerElements.length - 1];\n\n    if (targetElement === firstFocusableDrawerElement && e.shiftKey) {\n      e.preventDefault();\n\n      if (lastFocusableDrawerElement !== null) {\n        focusOnElement(lastFocusableDrawerElement);\n      }\n\n      return;\n    }\n\n    if (targetElement === lastFocusableDrawerElement && !e.shiftKey) {\n      e.preventDefault();\n\n      if (firstFocusableDrawerElement !== null) {\n        focusOnElement(firstFocusableDrawerElement);\n      }\n\n      return;\n    }\n  }\n\n  @Listen('mobileMenuItemClick')\n  handleMobileMenuItemClick(e: MouseEvent): void {\n    if (isPlayingSingleDrawerAnimation()) {\n      e.stopPropagation();\n      return;\n    }\n    this.animatingPointer = this.routingKeyPointer;\n  }\n\n  @Listen('clickDrawerHeaderClose')\n  handleClickDrawerHeaderClose(e: MouseEvent): void {\n    if (isPlayingSingleDrawerAnimation()) {\n      e.stopPropagation();\n      return;\n    }\n  }\n\n  @Listen('clickDrawerHeaderBack')\n  handleClickDrawerHeaderBack(e: MouseEvent): void {\n    if (isPlayingSingleDrawerAnimation()) {\n      e.stopPropagation();\n      return;\n    }\n    this.animatingPointer = this.routingKeyPointer;\n  }\n\n  private onTransitionEnd() {\n    const focussedElementId =\n      this.animatingPointer > this.routingKeyPointer ? this.routingKeyHistory[this.animatingPointer] : '';\n\n    this.animatingPointer = this.routingKeyPointer;\n\n    const isNavigatingBackwards = this.routingKeyPointer < this.routingKeyHistory.length - 1;\n    this.drawerChanged.emit(isNavigatingBackwards);\n\n    // Focus needs to happen after rerender, so wait for next tick\n    this.focusTimeout.set(async () => {\n      this.focusOnActiveDrawer(focussedElementId);\n    });\n    this.sendDataLayerEvent();\n  }\n\n  componentWillLoad(): void {\n    registerOpenSingleDrawerAnimation({\n      onAnimationStarts: () => {\n        this.phnDrawerStatus.emit({ status: DrawerStatusValues.startOpening });\n      },\n      onAnimationEnds: () => {\n        this.onTransitionEnd();\n        this.phnDrawerStatus.emit({ status: DrawerStatusValues.finishOpening });\n      }\n    });\n    registerCloseSingleDrawerAnimation({\n      onAnimationStarts: () => {\n        this.phnDrawerStatus.emit({ status: DrawerStatusValues.startClosing });\n      },\n      onAnimationEnds: () => {\n        this.backdropClosed.emit();\n        this.phnDrawerStatus.emit({ status: DrawerStatusValues.finishClosing });\n      }\n    });\n    registerTransitionNextLevelSingleDrawerAnimation({\n      onAnimationEnds: () => this.onTransitionEnd()\n    });\n    registerTransitionPreviousLevelSingleDrawerAnimation({ onAnimationEnds: () => this.onTransitionEnd() });\n  }\n\n  private focusOnActiveDrawer(focussedElementId: string): void {\n    const autoFocusElement = getHTMLElement(this.el.querySelector('.active .autofocus'));\n    if (autoFocusElement !== null) {\n      focusOnElement(autoFocusElement);\n      return;\n    }\n\n    if (this.usingKeyboard) {\n      let focussableElement: HTMLElement | null = null;\n\n      if (isString(focussedElementId)) {\n        focussableElement = getHTMLElement(this.el.querySelector(`.active [data-id=\"${focussedElementId}\"]`));\n      }\n\n      if (focussableElement === null) {\n        focussableElement = getHTMLElement(this.el.querySelector(`.active ${FOCUSABLE_ELEMENTS_SELECTOR}`));\n      }\n\n      if (focussableElement !== null) {\n        focusOnElement(focussableElement);\n      }\n    } else {\n      //Todo: Why first-focus class? We have it nowhere\n      const firstFocus = getHTMLElement(this.el.querySelector('.first-focus'));\n\n      if (firstFocus !== null) {\n        focusOnElement(firstFocus);\n      }\n    }\n  }\n\n  private sendDataLayerEvent() {\n    analyticsManager.setDrawerType(DisplayElementTypes.SingleDrawer);\n    const activeRoutingKey = this.routingKeyHistory[this.routingKeyPointer];\n\n    globalDataLayerService.pushDataLayerEvent(EventActions.DRAWER_LOAD, {\n      componentDisplay: {\n        displayElementType: analyticsManager.calculateDisplayElementType(activeRoutingKey, ElementTypes.singleDrawer),\n        displayElementId: analyticsManager.calculateDisplayElementId(),\n        displayElementName: 'Single Drawer'\n      }\n    });\n  }\n\n  disconnectedCallback(): void {\n    this.focusTimeout.cancel();\n  }\n\n  async componentDidRender(): Promise<void> {\n    const promises = [];\n    for (const operation of this.operationPipeline) {\n      const maybePromise = operation();\n      if (isPromise<void>(maybePromise)) {\n        promises.push(maybePromise);\n      }\n    }\n\n    await Promise.all(promises);\n    this.operationPipeline.splice(0, this.operationPipeline.length);\n  }\n\n  render(): HTMLPhnSingleDrawerElement {\n    const isOpening = this.routingKeyPointer > this.animatingPointer;\n    const isClosing = this.routingKeyPointer < this.animatingPointer;\n\n    let topDrawerContentPointer = -1;\n    let bottomDrawerContentPointer = this.routingKeyPointer;\n\n    if (isOpening) {\n      topDrawerContentPointer = this.routingKeyPointer;\n      bottomDrawerContentPointer = this.animatingPointer;\n\n      if (bottomDrawerContentPointer !== RoutingKeyPointers.LEVEL_ZERO) {\n        this.operationPipeline.push(async () => {\n          animationManager.play(AnimationSequences.TRANSITION_NEXT_LEVEL_SINGLE_DRAWER);\n        });\n      }\n    } else if (isClosing) {\n      topDrawerContentPointer = this.animatingPointer;\n\n      if (bottomDrawerContentPointer !== RoutingKeyPointers.LEVEL_ZERO) {\n        this.operationPipeline.push(async () => {\n          animationManager.play(AnimationSequences.TRANSITION_PREVIOUS_LEVEL_SINGLE_DRAWER);\n        });\n      }\n    }\n\n    const animatingRoutingKey = this.routingKeyHistory[topDrawerContentPointer] ?? '';\n    const routingKey = this.routingKeyHistory[bottomDrawerContentPointer] ?? '';\n\n    return (\n      <Host>\n        {isString(routingKey) ? (\n          <div class=\"drawer active\" key={routingKey}>\n            <span class=\"first-focus\" tabIndex={-1} aria-hidden=\"true\" />\n\n            <DrawerContent\n              routingKey={routingKey}\n              previousRoutingKey={this.routingKeyHistory[bottomDrawerContentPointer - 1]}\n              breakpoint={this.breakpoint}\n              locale={this.locale}\n              showBackButton={bottomDrawerContentPointer > 0}\n              receivedContent={this.receivedContent}\n            />\n          </div>\n        ) : null}\n\n        {isString(animatingRoutingKey) ? (\n          <div class={`drawer animating`} style={isOpening ? { right: '-100%' } : {}} key={animatingRoutingKey}>\n            <DrawerContent\n              routingKey={animatingRoutingKey}\n              previousRoutingKey={this.routingKeyHistory[topDrawerContentPointer - 1]}\n              breakpoint={this.breakpoint}\n              locale={this.locale}\n              showBackButton={topDrawerContentPointer > 0}\n              receivedContent={this.receivedContent}\n            />\n          </div>\n        ) : null}\n      </Host>\n    );\n  }\n}\n"],"version":3}