{"file":"ready-91c0ed30.js","mappings":";;;;AAIO,eAAe,iBAAiB,CACrC,MAA0B,EAC1B,OAAgB,EAChB,GAAG,SAAmB;EAEtB,IAAI,MAAM,KAAK,IAAI,EAAE;IACnB,OAAO,IAAI,CAAC;GACb;EACD,MAAM,cAAc,GAAG,OAAO,QAAiB;IAC7C,MAAM,EAAE,GAAG,MAAMA,4BAAa,CAAC,cAAc,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;IAEhE,IAAI,QAAQ,EAAyB,aAAzB,EAAE,uBAAF,EAAE,CAAyB,gBAAgB,CAAA,KAAK,UAAU,EAAE;MACtE,MAAO,EAAyB,CAAC,gBAAgB,EAAE,CAAC;KACrD;IAED,OAAO,EAAE,CAAC;GACX,CAAC;EAEF,MAAM,eAAe,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,GAAG,SAAS,CAAC,GAAG,CAAC,cAAc,CAAC,GAAG,CAAC,cAAc,EAAE,CAAC,CAAC;EAElG,MAAM,KAAK,GAAG,IAAI,OAAO,CAAO,CAAC,OAAO,KAAK,OAAO,CAAC,GAAG,CAAC,YAAY,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;EACrF,OAAO,OAAO,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC;AAC7D;;;;","names":["windowService"],"sources":["src/utility/ready.ts"],"sourcesContent":["import { HTMLStencilElement } from '@stencil/core/internal';\nimport windowService from '../services/window-service';\nimport { Timeout } from './timeout';\n\nexport async function componentsOnReady(\n  parent: HTMLElement | null,\n  timeout: Timeout,\n  ...selectors: string[]\n): Promise<HTMLElement[] | null> {\n  if (parent === null) {\n    return null;\n  }\n  const waitForElement = async (selector?: string) => {\n    const el = await windowService.waitForElement(parent, selector);\n\n    if (typeof (el as HTMLStencilElement)?.componentOnReady === 'function') {\n      await (el as HTMLStencilElement).componentOnReady();\n    }\n\n    return el;\n  };\n\n  const waitForElements = selectors.length > 0 ? selectors.map(waitForElement) : [waitForElement()];\n\n  const timer = new Promise<null>((resolve) => timeout.set(async () => resolve(null)));\n  return Promise.race([Promise.all(waitForElements), timer]);\n}\n"],"version":3}