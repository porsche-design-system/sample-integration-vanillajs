{"version":3,"names":["resetToFarRight","el","style","left","right","mainDrawerHTMLSelector","registerOpenDoubleDrawerSequence","exports","_b","onAnimationStarts","onAnimationEnds","sequence","onStart","elementSelector","animation","name","duration","AnimationDurations","drawerOpen","from","backdrop","to","onEnd","animationManager","register","AnimationSequences","OPEN_DOUBLE_DRAWER","makeSequence","timingFunction","registerCloseDoubleDrawerSequence","onBackdropFadeOutEnd","drawer","CLOSE_DOUBLE_DRAWER","registerTransitionSequence","direction","onGrowHighlightEnd","onSlideMainDrawerOutEnd","concat","highlight","cleanUpAfterAnimation","drawerContent","registerForwardToNextMenuSequence","registerBackToPreviousMenuSequence","isPlayingDoubleDrawerAnimation","doubleDrawerAnimationSequences","TRANSITION_NEXT_LEVEL_DOUBLE_DRAWER","TRANSITION_PREVIOUS_LEVEL_DOUBLE_DRAWER","TRANSITION_SAME_LEVEL_DOUBLE_DRAWER","TRANSITION_SAME_LEVEL_DOUBLE_DRAWER_REVERSE","some","isPlaying","_a"],"sources":["src/components/double-drawer/double-drawer-animation-sequences.ts"],"sourcesContent":["import animationManager, {\n  AnimationStatusCallbacks,\n  makeSequence,\n  SequenceStep,\n  WithRequired\n} from '../../services/animations/animation-manager';\nimport { AnimationDurations, AnimationSequences, AnimationSequencesType } from '../../utility/constants';\n\nexport type RouteChangeCallbacks = {\n  onSlideMainDrawerOutEnd: () => Promise<unknown>;\n} & WithRequired<GrowHighlightCallbacks, 'onGrowHighlightEnd'>;\n\nexport type GrowHighlightCallbacks = {\n  onGrowHighlightEnd?: (() => Promise<unknown>) | (() => void);\n  onGrowHighlightStart?: (() => Promise<unknown>) | (() => void);\n};\n\nexport type ShrinkHighlightCallbacks = {\n  onShrinkHighlightEnd?: (() => Promise<unknown>) | (() => void);\n  onShrinkHighlightStart?: (() => Promise<unknown>) | (() => void);\n};\n\nconst resetToFarRight = (el: HTMLElement) => {\n  el.style.left = '';\n  el.style.right = '150%';\n};\n\nconst mainDrawerHTMLSelector = '#main-drawer > div:first-child';\n\nexport const registerOpenDoubleDrawerSequence = ({\n  onAnimationStarts,\n  onAnimationEnds\n}: Required<AnimationStatusCallbacks>): void => {\n  const sequence: SequenceStep[] = [\n    [\n      {\n        onStart: onAnimationStarts,\n        elementSelector: 'phn-double-drawer',\n        animation: {\n          name: 'slideInFromLeft',\n          duration: AnimationDurations.drawerOpen,\n          from: -1000\n        }\n      },\n      {\n        elementSelector: 'phn-backdrop',\n        animation: {\n          name: 'fadeInBackdrop',\n          duration: AnimationDurations.backdrop,\n          to: 0.6\n        },\n        onEnd: onAnimationEnds\n      }\n    ]\n  ];\n\n  animationManager.register(\n    AnimationSequences.OPEN_DOUBLE_DRAWER,\n    makeSequence(sequence, { timingFunction: 'cubicBezierStart' })\n  );\n};\n\nexport const registerCloseDoubleDrawerSequence = ({\n  onBackdropFadeOutEnd,\n  onAnimationStarts,\n  onAnimationEnds\n}: Required<AnimationStatusCallbacks> & {\n  onBackdropFadeOutEnd: () => Promise<void>;\n}): void => {\n  const sequence: SequenceStep[] = [\n    [\n      {\n        elementSelector: 'phn-double-drawer',\n        onStart: onAnimationStarts,\n        animation: {\n          name: 'slideOutToLeft',\n          duration: AnimationDurations.drawer,\n          to: -1000\n        }\n      },\n      {\n        elementSelector: 'phn-backdrop',\n        animation: {\n          name: 'fadeOutBackdrop',\n          duration: AnimationDurations.backdrop,\n          from: 0.6\n        },\n        onEnd: () => {\n          onBackdropFadeOutEnd();\n          onAnimationEnds();\n        }\n      }\n    ]\n  ];\n\n  animationManager.register(\n    AnimationSequences.CLOSE_DOUBLE_DRAWER,\n    makeSequence(sequence, { timingFunction: 'cubicBezierEnd' })\n  );\n};\n\nexport const registerTransitionSequence = (\n  { onGrowHighlightEnd, onSlideMainDrawerOutEnd }: RouteChangeCallbacks,\n  direction: 'normal' | 'reverse' = 'normal'\n): void => {\n  animationManager.register(\n    `transitionSameLevelDoubleDrawer${direction === 'reverse' ? 'Reverse' : ''}`,\n    makeSequence(\n      [\n        [\n          {\n            elementSelector: '#side-drawer > div > phn-side-drawer > nav > .item-highlight',\n            animation: { name: 'shrinkElement', duration: AnimationDurations.highlight }\n          }\n        ],\n        [\n          {\n            elementSelector: mainDrawerHTMLSelector,\n            animation: {\n              name: direction === 'reverse' ? 'slideOutToRightRelative' : 'slideOutToLeftRelative',\n              to: -150,\n              cleanUpAfterAnimation: resetToFarRight,\n              duration: AnimationDurations.drawerContent\n            },\n            onEnd: onSlideMainDrawerOutEnd\n          }\n        ],\n        [\n          {\n            elementSelector: mainDrawerHTMLSelector,\n            animation: {\n              name: direction === 'reverse' ? 'slideInFromLeftRelative' : 'slideInFromRightRelative',\n              from: -150,\n              duration: AnimationDurations.drawerContent\n            }\n          }\n        ],\n        [\n          {\n            elementSelector: '#side-drawer > div > phn-side-drawer > nav > .item-highlight',\n            animation: { name: 'growElement', duration: AnimationDurations.highlight },\n            onEnd: onGrowHighlightEnd\n          }\n        ]\n      ],\n      { timingFunction: 'easeInOutQuad' }\n    )\n  );\n};\n\nexport const registerForwardToNextMenuSequence = ({\n  onSlideMainDrawerOutEnd,\n  onGrowHighlightEnd\n}: RouteChangeCallbacks): void => {\n  animationManager.register(\n    'transitionNextLevelDoubleDrawer',\n    makeSequence(\n      [\n        [\n          {\n            elementSelector: '#side-drawer > div > phn-side-drawer > nav > .item-highlight',\n            animation: { name: 'shrinkElement', duration: AnimationDurations.highlight }\n          }\n        ],\n        [\n          {\n            elementSelector: '#side-drawer > div',\n            animation: {\n              name: 'slideOutToLeftRelative',\n              to: -150,\n              cleanUpAfterAnimation: resetToFarRight,\n              duration: AnimationDurations.drawerContent\n            }\n          },\n          {\n            elementSelector: mainDrawerHTMLSelector,\n            animation: {\n              name: 'slideOutToLeftRelative',\n              to: -150,\n              cleanUpAfterAnimation: resetToFarRight,\n              duration: AnimationDurations.drawerContent\n            },\n            onEnd: onSlideMainDrawerOutEnd\n          }\n        ],\n        [\n          {\n            elementSelector: '#side-drawer > div',\n            animation: {\n              name: 'slideInFromRightRelative',\n              from: -150,\n              cleanUpAfterAnimation: true,\n              duration: AnimationDurations.drawerContent\n            }\n          },\n          {\n            elementSelector: mainDrawerHTMLSelector,\n            animation: {\n              name: 'slideInFromRightRelative',\n              from: -150,\n              cleanUpAfterAnimation: true,\n              duration: AnimationDurations.drawerContent\n            }\n          }\n        ],\n        [\n          {\n            elementSelector: '#side-drawer > div > phn-side-drawer > nav > .item-highlight',\n            animation: { name: 'growElement', duration: AnimationDurations.highlight },\n            onEnd: onGrowHighlightEnd\n          }\n        ]\n      ],\n      { timingFunction: 'easeInOutQuad' }\n    )\n  );\n};\nexport const registerBackToPreviousMenuSequence = ({\n  onGrowHighlightEnd,\n  onSlideMainDrawerOutEnd\n}: RouteChangeCallbacks): void => {\n  animationManager.register(\n    'transitionPreviousLevelDoubleDrawer',\n    makeSequence(\n      [\n        [\n          {\n            elementSelector: '#side-drawer > div > phn-side-drawer > nav > .item-highlight',\n            animation: { name: 'shrinkElement', duration: AnimationDurations.highlight }\n          }\n        ],\n        [\n          {\n            elementSelector: '#side-drawer > div',\n            animation: { name: 'slideOutToRightRelative', to: -150, duration: AnimationDurations.drawerContent }\n          },\n          {\n            elementSelector: mainDrawerHTMLSelector,\n            animation: { name: 'slideOutToRightRelative', to: -150, duration: AnimationDurations.drawerContent },\n            onEnd: onSlideMainDrawerOutEnd\n          }\n        ],\n        [\n          {\n            elementSelector: '#side-drawer > div',\n            animation: {\n              name: 'slideInFromLeftRelative',\n              from: -150,\n              cleanUpAfterAnimation: true,\n              duration: AnimationDurations.drawerContent\n            }\n          },\n          {\n            elementSelector: mainDrawerHTMLSelector,\n            animation: {\n              name: 'slideInFromLeftRelative',\n              from: -150,\n              cleanUpAfterAnimation: true,\n              duration: AnimationDurations.drawerContent\n            }\n          }\n        ],\n        [\n          {\n            elementSelector: '#side-drawer > div > phn-side-drawer > nav > .item-highlight',\n            animation: { name: 'growElement', duration: AnimationDurations.highlight },\n            onEnd: onGrowHighlightEnd\n          }\n        ]\n      ],\n      { timingFunction: 'easeInOutQuad' }\n    )\n  );\n};\n\nexport const isPlayingDoubleDrawerAnimation = (): boolean => {\n  const doubleDrawerAnimationSequences: AnimationSequencesType[] = [\n    AnimationSequences.OPEN_DOUBLE_DRAWER,\n    AnimationSequences.CLOSE_DOUBLE_DRAWER,\n    AnimationSequences.TRANSITION_NEXT_LEVEL_DOUBLE_DRAWER,\n    AnimationSequences.TRANSITION_PREVIOUS_LEVEL_DOUBLE_DRAWER,\n    AnimationSequences.TRANSITION_SAME_LEVEL_DOUBLE_DRAWER,\n    AnimationSequences.TRANSITION_SAME_LEVEL_DOUBLE_DRAWER_REVERSE\n  ];\n\n  return doubleDrawerAnimationSequences.some((sequence) => {\n    try {\n      return animationManager.isPlaying(sequence);\n    } catch {\n      return false;\n    }\n  });\n};\n"],"mappings":"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"}