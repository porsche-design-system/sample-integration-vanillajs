{"version":3,"names":["async","componentsOnReady","parent","timeout","selectors","waitForElement","selector","el","windowService","componentOnReady","waitForElements","length","map","timer","Promise","resolve","set","race","all"],"sources":["src/utility/ready.ts"],"sourcesContent":["import { HTMLStencilElement } from '@stencil/core/internal';\nimport windowService from '../services/window-service';\nimport { Timeout } from './timeout';\n\nexport async function componentsOnReady(\n  parent: HTMLElement | null,\n  timeout: Timeout,\n  ...selectors: string[]\n): Promise<HTMLElement[] | null> {\n  if (parent === null) {\n    return null;\n  }\n  const waitForElement = async (selector?: string) => {\n    const el = await windowService.waitForElement(parent, selector);\n\n    if (typeof (el as HTMLStencilElement)?.componentOnReady === 'function') {\n      await (el as HTMLStencilElement).componentOnReady();\n    }\n\n    return el;\n  };\n\n  const waitForElements = selectors.length > 0 ? selectors.map(waitForElement) : [waitForElement()];\n\n  const timer = new Promise<null>((resolve) => timeout.set(async () => resolve(null)));\n  return Promise.race([Promise.all(waitForElements), timer]);\n}\n"],"mappings":"oCAIOA,eAAeC,EACpBC,EACAC,KACGC,GAEH,GAAIF,IAAW,KAAM,CACnB,OAAO,I,CAET,MAAMG,EAAiBL,MAAOM,IAC5B,MAAMC,QAAWC,EAAcH,eAAeH,EAAQI,GAEtD,UAAYC,IAAyB,MAAzBA,SAAE,SAAFA,EAA2BE,oBAAqB,WAAY,OAC/DF,EAA0BE,kB,CAGnC,OAAOF,CAAE,EAGX,MAAMG,EAAkBN,EAAUO,OAAS,EAAIP,EAAUQ,IAAIP,GAAkB,CAACA,KAEhF,MAAMQ,EAAQ,IAAIC,SAAeC,GAAYZ,EAAQa,KAAIhB,SAAYe,EAAQ,UAC7E,OAAOD,QAAQG,KAAK,CAACH,QAAQI,IAAIR,GAAkBG,GACrD,Q"}