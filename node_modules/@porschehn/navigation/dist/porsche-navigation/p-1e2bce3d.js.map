{"version":3,"names":["sendDataLayerEvent","datalayerEventAction","EventActions","NAVIGATION_CLICK","analyticsId","text","link","elementId","clickElementType","customDatalayerProperties","globalDataLayerService","pushDataLayerEvent","Object","assign","componentClick","clickElementId","clickElementName","targetElement","analyticsManager","getModelTargetElement","ClickElementTypes","Link","targetUrl","componentDisplay","displayElementId","calculateDisplayElementId","displayElementType","calculateDisplayElementType","removeLastRoutingSegment","ElementTypes","menuItem","displayElementName","MODEL_RANGE_CLICK","car","modelRangeName","toLowerCase"],"sources":["src/services/analytics/data-layer-event-sender.ts"],"sourcesContent":["import { ClickElementType, ClickElementTypes, ElementTypes, EventAction, EventActions } from '../../utility/constants';\nimport globalDataLayerService from './global-data-layer-service';\nimport analyticsManager from './analytics-manager';\nimport { removeLastRoutingSegment } from '../../entities/routing-key';\nimport { TDataLayer } from '@porsche/globaldatalayer-events/projects/pcom/all/types';\n\ntype DataLayerEventSenderType = {\n  datalayerEventAction: EventAction;\n  analyticsId: string;\n  text: string;\n  link: string;\n  elementId: string;\n  clickElementType: ClickElementType;\n  customDatalayerProperties: TDataLayer;\n};\nexport function sendDataLayerEvent({\n  datalayerEventAction = EventActions.NAVIGATION_CLICK,\n  analyticsId,\n  text,\n  link,\n  elementId,\n  clickElementType,\n  customDatalayerProperties = {}\n}: DataLayerEventSenderType): void {\n  globalDataLayerService.pushDataLayerEvent(datalayerEventAction, {\n    componentClick: {\n      clickElementId: analyticsId,\n      clickElementName: text,\n      targetElement: analyticsManager.getModelTargetElement(elementId, text),\n      clickElementType,\n      ...(clickElementType === ClickElementTypes.Link ? { targetUrl: link } : {})\n    },\n    componentDisplay: {\n      displayElementId: analyticsManager.calculateDisplayElementId(elementId),\n      displayElementType: analyticsManager.calculateDisplayElementType(\n        removeLastRoutingSegment(elementId),\n        ElementTypes.menuItem\n      ),\n      displayElementName: text\n    },\n    ...customDatalayerProperties,\n    ...(datalayerEventAction === EventActions.MODEL_RANGE_CLICK\n      ? {\n          car: {\n            modelRangeName: text.toLowerCase()\n          }\n        }\n      : {})\n  });\n}\n"],"mappings":"uKAegBA,GAAmBC,qBACjCA,EAAuBC,EAAaC,iBAAgBC,YACpDA,EAAWC,KACXA,EAAIC,KACJA,EAAIC,UACJA,EAASC,iBACTA,EAAgBC,0BAChBA,EAA4B,KAE5BC,EAAuBC,mBAAmBV,EAAoBW,OAAAC,OAAAD,OAAAC,OAAA,CAC5DC,eAAcF,OAAAC,OAAA,CACZE,eAAgBX,EAChBY,iBAAkBX,EAClBY,cAAeC,EAAiBC,sBAAsBZ,EAAWF,GACjEG,oBACIA,IAAqBY,EAAkBC,KAAO,CAAEC,UAAWhB,GAAS,IAE1EiB,iBAAkB,CAChBC,iBAAkBN,EAAiBO,0BAA0BlB,GAC7DmB,mBAAoBR,EAAiBS,4BACnCC,EAAyBrB,GACzBsB,EAAaC,UAEfC,mBAAoB1B,IAEnBI,GACCR,IAAyBC,EAAa8B,kBACtC,CACEC,IAAK,CACHC,eAAgB7B,EAAK8B,gBAGzB,IAER,Q"}