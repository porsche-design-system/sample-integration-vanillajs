var __awaiter=this&&this.__awaiter||function(e,t,n,o){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o["throw"](e))}catch(e){i(e)}}function s(e){e.done?n(e.value):r(e.value).then(a,l)}s((o=o.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},o,r,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(e){return function(t){return s([e,t])}}function s(l){if(o)throw new TypeError("Generator is already executing.");while(a&&(a=0,l[0]&&(n=0)),n)try{if(o=1,r&&(i=l[0]&2?r["return"]:l[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,l[1])).done)return i;if(r=0,i)l=[l[0]&2,i.value];switch(l[0]){case 0:case 1:i=l;break;case 4:n.label++;return{value:l[1],done:false};case 5:n.label++;r=l[1];l=[0];continue;case 7:l=n.ops.pop();n.trys.pop();continue;default:if(!(i=n.trys,i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1];i=l;break}if(i&&n.label<i[2]){n.label=i[2];n.ops.push(l);break}if(i[2])n.ops.pop();n.trys.pop();continue}l=t.call(e,n)}catch(e){l=[6,e];r=0}finally{o=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:true}}};System.register(["./p-79dbe0fe.system.js","./p-e95ba6e5.system.js"],(function(e){"use strict";var t,n,o,r,i,a,l,s,u,c,d,f,p,h,v,g,b;return{setters:[function(e){t=e.N;n=e.a;o=e.c;r=e.n;i=e.g},function(e){a=e.o;l=e.u;s=e.g;u=e.C;c=e.M;d=e.x;f=e.y;p=e.i;h=e.t;v=e.V;g=e.v;b=e.a}],execute:function(){var w="featureOverrideEnabled";var y="shop";var m="pcom_search";var _="saved_items";var E="ab";var S="dealer_search_china";var O="opening_hours";var T="sentry";var A="shop_wishlist";var N={featureOverrideEnabled:{enabled:true},homenav_1723:{enabled:true},navi_3:{enabled:false},porsche_75_years_logo:{enabled:false},one_ui:{enabled:false},mock_shop_content:{enabled:false},shop:{enabled:false},pcom_search:{enabled:false},shop_wishlist:{enabled:false}};var P={featureOverrideEnabled:{enabled:true},homenav_1723:{enabled:true},navi_3:{enabled:false},porsche_75_years_logo:{enabled:false},one_ui:{enabled:false},mock_shop_content:{enabled:false},shop:{enabled:false},pcom_search:{enabled:false},shop_wishlist:{enabled:false}};var C={featureOverrideEnabled:{enabled:true},homenav_1723:{enabled:true},navi_3:{enabled:true},porsche_75_years_logo:{enabled:false},one_ui:{enabled:false},mock_shop_content:{enabled:false},shop:{enabled:false},pcom_search:{enabled:false},shop_wishlist:{enabled:false}};var k={featureOverrideEnabled:{enabled:false},homenav_1723:{enabled:false},navi_3:{enabled:true},porsche_75_years_logo:{enabled:false},mock_shop_content:{enabled:false},shop:{enabled:false},pcom_search:{enabled:false},shop_wishlist:{enabled:false}};var I={local:N,preview:P,test:C,production:k};var D=function(){function e(){this.initialBodyStyleValues={top:"",position:"",inlineSize:"",overflowY:""};this.initialDocumentScrollTop=0}Object.defineProperty(e.prototype,"location",{get:function(){return window.location},set:function(e){window.location=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"sessionStorage",{get:function(){return window.sessionStorage},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"localStorage",{get:function(){return window.localStorage},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"version",{set:function(e){Object.assign(window,{PHN_HEADER_VERSION:e})},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"navigationLoaded",{set:function(e){Object.assign(window,{PHN_NAVIGATION_LOADED:e})},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"bodyOverflow",{get:function(){return document.body.style.overflow},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"bodyHeight",{get:function(){return document.body.style.height},enumerable:false,configurable:true});e.prototype.requestAnimationFrame=function(e){return window.requestAnimationFrame(e)};e.prototype.createDiv=function(){return window.document.createElement("div")};e.prototype.getBreakpoint=function(){var e=Math.max(window.document.documentElement.clientWidth,window.innerWidth||0);var t=Object.keys(a).reverse().find((function(t){return l(a,t)&&e>=a[t]}));return typeof t==="string"&&l(a,t)?a[t]:0};Object.defineProperty(e.prototype,"redirected",{get:function(){return window.REDIRECTED===true||window.location.search.includes("cs_redirect=")},enumerable:false,configurable:true});e.prototype.createIframe=function(e,t){var n=window.document.createElement("iframe");n.id=e;n.style.display="none";n.src=t;window.document.body.appendChild(n)};e.prototype.removeElement=function(e){var t;(t=window.document.getElementById(e))===null||t===void 0?void 0:t.remove()};e.prototype.redirectToUrl=function(e){window.location.assign(e)};e.prototype.generateRandom=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";var n=new Uint8Array(e);window.crypto.getRandomValues(n);var o=[];for(var r=0;r<n.byteLength;r+=1){var i=n[r]%t.length;o.push(t[i])}return o.join("")};e.prototype.maybeCheckMarketingConsent=function(e){var t,n,o,r,i,a,l,s,u,c,d;var f={processorId:(o=(n=(t=window.GlobalConsent)===null||t===void 0?void 0:t.Processor)===null||n===void 0?void 0:n.googleMaps)!==null&&o!==void 0?o:"Google Maps",timeoutVar:{},mapContainer:"",callbacks:{success:e}};if(typeof((i=(r=window.PCOM)===null||r===void 0?void 0:r.globalConsent)===null||i===void 0?void 0:i.checkConsent)==="function"){(s=(l=(a=window.PCOM)===null||a===void 0?void 0:a.globalConsent)===null||l===void 0?void 0:l.checkConsent)===null||s===void 0?void 0:s.call(l,f);return true}if(typeof((u=window.ucPrivacyShield)===null||u===void 0?void 0:u.checkConsent)==="function"){(d=(c=window.ucPrivacyShield)===null||c===void 0?void 0:c.checkConsent)===null||d===void 0?void 0:d.call(c,f);return true}e();return false};e.prototype.deriveChallenge=function(e){return __awaiter(this,void 0,void 0,(function(){var o,r,i,a,l,s,i;return __generator(this,(function(u){switch(u.label){case 0:if(e.length<43||e.length>128){throw new t("invalid code length",n.INVALID_INPUT)}o=new ArrayBuffer(e.length);r=new Uint8Array(o);for(i=0;i<e.length;i++){r[i]=e.charCodeAt(i)}return[4,window.crypto.subtle.digest("SHA-256",r)];case 1:a=u.sent();l=new Uint8Array(a);s="";for(i=0;i<l.byteLength;i++){s+=String.fromCharCode(l[i])}return[2,window.btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")]}}))}))};e.prototype.hashString=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,o;return __generator(this,(function(r){switch(r.label){case 0:t=(new TextEncoder).encode(e);return[4,window.crypto.subtle.digest("SHA-256",t)];case 1:n=r.sent();o=Array.from(new Uint8Array(n));return[2,o.map((function(e){return e.toString(16).padStart(2,"0")})).join("")]}}))}))};e.prototype.getScrollbarWidth=function(){var e=window.document.createElement("div");e.style.overflow="scroll";window.document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;window.document.body.removeChild(e);return Number.isNaN(t)?"0px":"".concat(t,"px")};e.prototype.fetchGoogleMapsApi=function(e,o){if(o===void 0){o="https://maps.googleapis.com/maps/api/js?key=".concat(e,"&libraries=places")}return __awaiter(this,void 0,void 0,(function(){var e,r;return __generator(this,(function(i){if(window.google!==undefined&&window.google.maps!==undefined&&window.google.maps.version!==undefined){return[2,window.google]}e=document.getElementById("googleMaps");if(e){return[2,window.google]}r=document.createElement("script");r.src=o;r.id="googleMaps";document.head.appendChild(r);return[2,new Promise((function(e,o){r.onerror=function(){o(new t("Failed to load google maps script.",n.GENERAL))};r.onload=function(){e(window.google)}}))]}))}))};e.prototype.getNavigatorLatLong=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){return[2,new Promise((function(e,n){window.navigator.geolocation.getCurrentPosition((function(t){var n=t.coords,o=n.latitude,r=n.longitude;e({latitude:o,longitude:r})}),(function(e){return n(new t("geolocation.getCurrentPosition failed with ".concat(e.code,": ").concat(e.message),F(e)))}))}))]}))}))};e.prototype.getCookie=function(e){var t;return s((t=document.cookie.split("; ").find((function(t){return t.startsWith("".concat(e,"="))})))===null||t===void 0?void 0:t.split("=")[1])};e.prototype.setCookie=function(e,t){document.cookie="".concat(e,"=").concat(t,";domain=").concat(u,";expires=").concat(new Date(Date.now()+c*10).toUTCString(),";")};e.prototype.btoa=function(e){return window.btoa(e)};e.prototype.lockScroll=function(){this.initialBodyStyleValues=d(document.body.style,this.initialBodyStyleValues);this.initialDocumentScrollTop=document.documentElement.scrollTop;document.body.style.top="-".concat(document.documentElement.scrollTop,"px");document.body.style.position="fixed";document.body.style.inlineSize="100%";document.body.style.overflowY="scroll"};e.prototype.unlockScroll=function(){Object.entries(this.initialBodyStyleValues).forEach((function(e){var t=e[0],n=e[1];return document.body.style.setProperty(f(t),n)}));document.documentElement.scrollTop=this.initialDocumentScrollTop};e.prototype.hasScrollbar=function(){return window.document.body.offsetHeight>window.innerHeight};e.prototype.waitForElement=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(o){if(!p(t)){return[2,e]}n=h(e.querySelector(t));if(n!==null){return[2,n]}return[2,new Promise((function(n){var o=new MutationObserver((function(){var r=h(e.querySelector(t));if(r!==null){n(r);o.disconnect()}}));o.observe(e,{childList:true,subtree:true})}))]}))}))};return e}();function F(e){switch(e.code){case e.PERMISSION_DENIED:{return n.GEOLOCATION_DENIED}case e.POSITION_UNAVAILABLE:case e.TIMEOUT:{return n.RETRY}default:{return n.GENERAL}}}var L=e("w",new D);var R=function(){function e(){this.version=v;this.breakpoint=0;this.locale=null}e.prototype.init=function(e,t){this.breakpoint=L.getBreakpoint();this.locale=t};e.prototype.log=function(e,t,n,i,a){var l=r.state.env;if(l===o.TEST){return}try{var s=JSON.stringify({name:e,level:t,env:l,breakpoint:this.breakpoint,locale:this.locale,version:this.version,hostname:L.location.hostname,pathname:L.location.pathname,id:n,errorType:a||"",message:i});if(l!==o.PRODUCTION){console[t](s)}}catch(e){}};e.prototype.info=function(e,t){if(t===void 0){t=""}this.log("PHN_HEADER_LOG_ENTRY","info",e,t)};e.prototype.error=function(e,o){var r=o instanceof t?o.type:n.GENERAL;this.log("PHN_HEADER_LOG_ENTRY","error",e,o.message,r)};return e}();var j=e("l",new R);var M=function(){function e(e,t){var n=this;if(e===void 0){e=i(g)}if(t===void 0){t=I}this.featureEnvMap=t;this.features={};this.env="local";this.isShopToggleActive=function(){return n.isFeatureEnabled(y,L.location.search)};this.isPcomSearchToggleActive=function(){return n.isFeatureEnabled(m,L.location.search)};this.isSavedItemsToggleActive=function(){return n.isFeatureEnabled(_,L.location.search)};this.isABTestingToggleActive=function(){return n.isFeatureEnabled(E,L.location.search)};this.isDealerSearchChinaEnabled=function(){return n.isFeatureEnabled(S,L.location.search)};this.isDealerSearchOpeningHoursEnabled=function(){return n.isFeatureEnabled(O,L.location.search)};this.isSentryEnabled=function(){return n.isFeatureEnabled(T,L.location.search)};this.isShopWishlistToggleActive=function(){return n.isFeatureEnabled(A,L.location.search)};this.env=e;this.features=this.featureEnvMap[e]}e.prototype.loadRemoteToggles=function(){return __awaiter(this,void 0,void 0,(function(){var e,o,r,i,a;return __generator(this,(function(l){switch(l.label){case 0:l.trys.push([0,5,,6]);e=b(this.env).BFF_ENDPOINT;return[4,fetch("".concat(e,"/toggles?env=").concat(this.env))];case 1:o=l.sent();if(!!o.ok)return[3,3];return[4,o.text()];case 2:r=l.sent();throw new Error(r);case 3:return[4,o.json()];case 4:i=l.sent();this.features=i;return[3,6];case 5:a=l.sent();throw new t("Load Feature Toggles failed with error: ".concat(a),n.GENERAL);case 6:return[2]}}))}))};e.prototype.stringToBooleanStrict=function(e){if(e==="true"){return true}if(e==="false"){return false}return null};e.prototype.getUrlFeatureToggleOverride=function(e,t){var n,o;var r=(o=(n=t.split("?")[1])===null||n===void 0?void 0:n.split("&").find((function(t){return t.includes(e)})))===null||o===void 0?void 0:o.split("=")[1];return p(r)?this.stringToBooleanStrict(r||""):null};e.prototype.getLocalStorageFeatureToggleOverride=function(e){var t=localStorage.getItem("phn.".concat(e));return p(t)?this.stringToBooleanStrict(t):null};e.prototype.isFeatureEnabled=function(e,t){var n;if(this.features===undefined){return false}if(this.env===o.PRODUCTION&&this.isOnSecurityLayer(e)){return false}if((n=this.features[w])===null||n===void 0?void 0:n.enabled){var r=[this.getUrlFeatureToggleOverride(e,t),this.getLocalStorageFeatureToggleOverride(e)];for(var i=0,a=r;i<a.length;i++){var l=a[i];if(l!==null){return l}}}if(this.features[e]!==undefined){return this.features[e].enabled}else{return false}};e.prototype.setFeatures=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:this.env=e;n.label=1;case 1:n.trys.push([1,3,,4]);if(e==="test"){this.features=this.featureEnvMap[e];return[2]}return[4,this.loadRemoteToggles()];case 2:n.sent();return[3,4];case 3:t=n.sent();j.error("INIT_APP_CONFIG",t);this.features=this.featureEnvMap[e];return[3,4];case 4:return[2]}}))}))};e.prototype.isOnSecurityLayer=function(e){var t=[T,O];return t.includes(e)};return e}();var x=e("f",new M)}}}));
//# sourceMappingURL=p-a5b43b06.system.js.map