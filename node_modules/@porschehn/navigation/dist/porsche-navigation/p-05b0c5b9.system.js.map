{"version":3,"names":["state","setDrawerType","drawerType","calculateDisplayElementId","routingKeyForNavigatingForward","mainDrawerRoutingKey","isString","getPreviousRoutingKey","routerStore","routingKeyHistory","routingKeyPointer","lastMainDrawerRoutingKey","getLastRoutingSegment","mainDrawerLevel","determineMainDrawerLevel","sideDrawerLevel","mainDrawerDisplayElementId","concat","sideDrawerRoutingKey","getSideDrawerRoutingKey","calculateDisplayElementType","activeRoutingKey","elementType","isSideDrawer","getModelName","bodyType","urlSplitIntoPieces","link","split","lastElementInUrlSplit","length","modelName","undefined","join","getModelTargetElement","elementId","text","includes","toLowerCase","getDrawerType","getDealerResultsLoadDisplayElementId","getDealerResultsLoadDisplayElementType","DEALER_SEARCH_ELEMENT_TYPE","ElementTypes","dealerSearchForm","analyticsManager","exports"],"sources":["src/services/analytics/analytics-manager.ts"],"sourcesContent":["import { BodyType } from '../../entities/content';\nimport { determineMainDrawerLevel, getLastRoutingSegment, getPreviousRoutingKey } from '../../entities/routing-key';\nimport { routerStore } from '../../state/router-store';\nimport { DEALER_SEARCH_ELEMENT_TYPE, DisplayElementType, ElementType, ElementTypes } from '../../utility/constants';\nimport { isString } from '../../utility/helper';\nimport { getSideDrawerRoutingKey } from '../menu-items-service';\n\nconst state: {\n  drawerType?: DisplayElementType;\n  elementType?: ElementType;\n} = {};\n\nfunction setDrawerType(drawerType: DisplayElementType): void {\n  state.drawerType = drawerType;\n}\n\nfunction calculateDisplayElementId(routingKeyForNavigatingForward?: string): string {\n  const { drawerType } = state;\n  const mainDrawerRoutingKey =\n    (isString(routingKeyForNavigatingForward)\n      ? getPreviousRoutingKey(routingKeyForNavigatingForward)\n      : routerStore.state.routingKeyHistory[routerStore.state.routingKeyPointer]) || '';\n  const lastMainDrawerRoutingKey = getLastRoutingSegment(mainDrawerRoutingKey);\n  const mainDrawerLevel = determineMainDrawerLevel(mainDrawerRoutingKey);\n  const sideDrawerLevel = mainDrawerLevel - 1;\n\n  if (!isString(mainDrawerRoutingKey)) {\n    return 'level0';\n  }\n\n  const mainDrawerDisplayElementId = isString(mainDrawerRoutingKey)\n    ? `level${mainDrawerLevel}-${lastMainDrawerRoutingKey}`\n    : `level${mainDrawerLevel - 1}-unknown`;\n\n  if (drawerType === 'doubleDrawer') {\n    if (mainDrawerRoutingKey === '') {\n      return `level${sideDrawerLevel}-unknown_level${mainDrawerLevel}-unknown`;\n    }\n    const sideDrawerRoutingKey = getSideDrawerRoutingKey(mainDrawerRoutingKey);\n    return `level${sideDrawerLevel}-${sideDrawerRoutingKey}_${mainDrawerDisplayElementId}`;\n  }\n\n  return mainDrawerDisplayElementId;\n}\n\nfunction calculateDisplayElementType(\n  activeRoutingKey: string,\n  elementType: ElementType,\n  isSideDrawer?: boolean\n): string {\n  const { drawerType } = state;\n  const mainDrawerLevel = determineMainDrawerLevel(activeRoutingKey);\n\n  if (drawerType === 'doubleDrawer') {\n    let sideDrawerLevel = mainDrawerLevel;\n    if (isSideDrawer) {\n      sideDrawerLevel = sideDrawerLevel - 1;\n    }\n    return `level${sideDrawerLevel}_${elementType}`;\n  } else {\n    return isString(activeRoutingKey)\n      ? `level${mainDrawerLevel}_${elementType}`\n      : `level${mainDrawerLevel - 1}_${elementType}`;\n  }\n}\n\nfunction getModelName(bodyType: BodyType): string {\n  const urlSplitIntoPieces: string[] = bodyType.link.split('/');\n  const lastElementInUrlSplit: string = urlSplitIntoPieces[urlSplitIntoPieces.length - 1];\n  let modelName: string;\n\n  if (lastElementInUrlSplit === '') {\n    if (urlSplitIntoPieces[urlSplitIntoPieces.length - 2] === undefined) {\n      modelName = '';\n    } else {\n      modelName = urlSplitIntoPieces[urlSplitIntoPieces.length - 2].split('-').join(' ');\n    }\n  } else {\n    modelName = lastElementInUrlSplit.split('-').join(' ');\n  }\n\n  return modelName;\n}\n\nfunction getModelTargetElement(elementId: string, text: string): string | undefined {\n  if (elementId.includes('models')) {\n    const mainDrawerLevel = determineMainDrawerLevel(elementId);\n\n    return `level${mainDrawerLevel}_${text.toLowerCase()}`;\n  }\n\n  return;\n}\n\nfunction getDrawerType() {\n  return state.drawerType;\n}\n\nfunction getDealerResultsLoadDisplayElementId(elementId: string): string {\n  if (getDrawerType() === 'doubleDrawer') {\n    return elementId;\n  } else {\n    return calculateDisplayElementId();\n  }\n}\n\nfunction getDealerResultsLoadDisplayElementType(): string {\n  if (getDrawerType() === 'doubleDrawer') {\n    return DEALER_SEARCH_ELEMENT_TYPE;\n  } else {\n    return calculateDisplayElementType('', ElementTypes.dealerSearchForm);\n  }\n}\n\nexport default {\n  setDrawerType,\n  getDealerResultsLoadDisplayElementId,\n  calculateDisplayElementId,\n  getDealerResultsLoadDisplayElementType,\n  calculateDisplayElementType,\n  getModelName,\n  getModelTargetElement\n};\n"],"mappings":"kVAOA,IAAMA,EAGF,GAEJ,SAASC,EAAcC,GACrBF,EAAME,WAAaA,CACrB,CAEA,SAASC,EAA0BC,GACzB,IAAAF,EAAeF,EAAKE,WAC5B,IAAMG,GACHC,EAASF,GACNG,EAAsBH,GACtBI,EAAYR,MAAMS,kBAAkBD,EAAYR,MAAMU,qBAAuB,GACnF,IAAMC,EAA2BC,EAAsBP,GACvD,IAAMQ,EAAkBC,EAAyBT,GACjD,IAAMU,EAAkBF,EAAkB,EAE1C,IAAKP,EAASD,GAAuB,CACnC,MAAO,Q,CAGT,IAAMW,EAA6BV,EAASD,GACxC,QAAAY,OAAQJ,EAAe,KAAAI,OAAIN,GAC3B,QAAAM,OAAQJ,EAAkB,EAAC,YAE/B,GAAIX,IAAe,eAAgB,CACjC,GAAIG,IAAyB,GAAI,CAC/B,MAAO,QAAAY,OAAQF,EAAe,kBAAAE,OAAiBJ,EAAe,W,CAEhE,IAAMK,EAAuBC,EAAwBd,GACrD,MAAO,QAAAY,OAAQF,EAAe,KAAAE,OAAIC,EAAoB,KAAAD,OAAID,E,CAG5D,OAAOA,CACT,CAEA,SAASI,EACPC,EACAC,EACAC,GAEQ,IAAArB,EAAeF,EAAKE,WAC5B,IAAMW,EAAkBC,EAAyBO,GAEjD,GAAInB,IAAe,eAAgB,CACjC,IAAIa,EAAkBF,EACtB,GAAIU,EAAc,CAChBR,EAAkBA,EAAkB,C,CAEtC,MAAO,QAAAE,OAAQF,EAAe,KAAAE,OAAIK,E,KAC7B,CACL,OAAOhB,EAASe,GACZ,QAAAJ,OAAQJ,EAAe,KAAAI,OAAIK,GAC3B,QAAAL,OAAQJ,EAAkB,EAAC,KAAAI,OAAIK,E,CAEvC,CAEA,SAASE,EAAaC,GACpB,IAAMC,EAA+BD,EAASE,KAAKC,MAAM,KACzD,IAAMC,EAAgCH,EAAmBA,EAAmBI,OAAS,GACrF,IAAIC,EAEJ,GAAIF,IAA0B,GAAI,CAChC,GAAIH,EAAmBA,EAAmBI,OAAS,KAAOE,UAAW,CACnED,EAAY,E,KACP,CACLA,EAAYL,EAAmBA,EAAmBI,OAAS,GAAGF,MAAM,KAAKK,KAAK,I,MAE3E,CACLF,EAAYF,EAAsBD,MAAM,KAAKK,KAAK,I,CAGpD,OAAOF,CACT,CAEA,SAASG,EAAsBC,EAAmBC,GAChD,GAAID,EAAUE,SAAS,UAAW,CAChC,IAAMxB,EAAkBC,EAAyBqB,GAEjD,MAAO,QAAAlB,OAAQJ,EAAe,KAAAI,OAAImB,EAAKE,c,CAGzC,MACF,CAEA,SAASC,IACP,OAAOvC,EAAME,UACf,CAEA,SAASsC,EAAqCL,GAC5C,GAAII,MAAoB,eAAgB,CACtC,OAAOJ,C,KACF,CACL,OAAOhC,G,CAEX,CAEA,SAASsC,IACP,GAAIF,MAAoB,eAAgB,CACtC,OAAOG,C,KACF,CACL,OAAOtB,EAA4B,GAAIuB,EAAaC,iB,CAExD,CAEA,IAAAC,EAAAC,EAAA,IAAe,CACb7C,cAAaA,EACbuC,qCAAoCA,EACpCrC,0BAAyBA,EACzBsC,uCAAsCA,EACtCrB,4BAA2BA,EAC3BI,aAAYA,EACZU,sBAAqBA,G"}