{"version":3,"names":["Timeout","constructor","delay","this","timer","set","cb","cancel","setTimeout","async","clearTimeout","unref"],"sources":["src/utility/timeout.ts"],"sourcesContent":["export class Timeout {\n  private timer: NodeJS.Timeout | null = null;\n\n  constructor(private delay: number) {}\n\n  set<T>(cb: () => Promise<T>): void {\n    this.cancel();\n\n    this.timer = setTimeout(async () => {\n      await cb();\n      this.cancel();\n    }, this.delay);\n  }\n\n  cancel(): void {\n    if (this.timer !== null) {\n      clearTimeout(this.timer);\n\n      if (typeof this.timer.unref === 'function') {\n        this.timer.unref();\n      }\n\n      this.timer = null;\n    }\n  }\n}\n"],"mappings":"MAAaA,EAGX,WAAAC,CAAoBC,GAAAC,KAAAD,QAFZC,KAAAC,MAA+B,I,CAIvC,GAAAC,CAAOC,GACLH,KAAKI,SAELJ,KAAKC,MAAQI,YAAWC,gBAChBH,IACNH,KAAKI,QAAQ,GACZJ,KAAKD,M,CAGV,MAAAK,GACE,GAAIJ,KAAKC,QAAU,KAAM,CACvBM,aAAaP,KAAKC,OAElB,UAAWD,KAAKC,MAAMO,QAAU,WAAY,CAC1CR,KAAKC,MAAMO,O,CAGbR,KAAKC,MAAQ,I"}