import{r as e,c as t,h as i,d as o,g as a,F as r,H as s}from"./p-d0fb8c28.js";import{n,E as l,k as c,s as h,a as p,f as d,l as m,C as f,m as u}from"./p-b43baa04.js";import{i as y,b as g,O as x,J as b,P as w,n as k,Q as v,R as D,T as E,N as I,a as T,g as L,u as S}from"./p-f7be0ef8.js";import{d as j}from"./p-c45b4ca8.js";import{c as O,a as R}from"./p-3b2dda95.js";import{g as _}from"./p-38d3cc75.js";import{c as C}from"./p-e2276848.js";import{T as N}from"./p-d6be5c73.js";import{a as F}from"./p-4babe3ef.js";import{g as $,a as P,b as A}from"./p-636d069a.js";import{f as U,l as z}from"./p-19268c27.js";import{b as B,c as M,d as K}from"./p-338d556a.js";import{w as V}from"./p-f167c919.js";import{s as H}from"./p-1e2bce3d.js";import"./p-5f91e136.js";import"./p-ba3f6f6a.js";const W="@-webkit-keyframes slideDown{from{max-height:0}to{max-height:1000px}}@keyframes slideDown{from{max-height:0}to{max-height:1000px}}@-webkit-keyframes slideUp{from{max-height:1000px}to{max-height:0}}@keyframes slideUp{from{max-height:1000px}to{max-height:0}}@-webkit-keyframes slideLeft{from{max-width:0}to{max-width:1000px}}@keyframes slideLeft{from{max-width:0}to{max-width:1000px}}@-webkit-keyframes slideRight{from{max-width:1000px}to{max-width:0}}@keyframes slideRight{from{max-width:1000px}to{max-width:0}}@-webkit-keyframes darken{from{background-color:rgba(0, 0, 0, 0)}to{background-color:rgba(0, 0, 0, 0.8)}}@keyframes darken{from{background-color:rgba(0, 0, 0, 0)}to{background-color:rgba(0, 0, 0, 0.8)}}@-webkit-keyframes lighten{from{background-color:rgba(0, 0, 0, 0.8)}to{background-color:rgba(0, 0, 0, 0)}}@keyframes lighten{from{background-color:rgba(0, 0, 0, 0.8)}to{background-color:rgba(0, 0, 0, 0)}}@-webkit-keyframes fadeInFromBottom{0%{opacity:0;top:36px}100%{opacity:1;top:0px}}@keyframes fadeInFromBottom{0%{opacity:0;top:36px}100%{opacity:1;top:0px}}@-webkit-keyframes fadeOutToTop{0%{opacity:1;bottom:0px}100%{opacity:0;bottom:16px}}@keyframes fadeOutToTop{0%{opacity:1;bottom:0px}100%{opacity:0;bottom:16px}}@-webkit-keyframes slideLeftDoubleDrawer{from{right:-1000px}to{right:0px}}@keyframes slideLeftDoubleDrawer{from{right:-1000px}to{right:0px}}@-webkit-keyframes slideRightDoubleDrawer{from{right:0px}to{right:-1000px}}@keyframes slideRightDoubleDrawer{from{right:0px}to{right:-1000px}}@-webkit-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes fadeOut{0%{opacity:1}100%{opacity:0}}@keyframes fadeOut{0%{opacity:1}100%{opacity:0}}.phn-flex-col.sc-phn-autocomplete-search-field{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.phn-flex-row.sc-phn-autocomplete-search-field{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row}.phn-align-center.sc-phn-autocomplete-search-field{-ms-flex-align:center;align-items:center}.phn-justify-around.sc-phn-autocomplete-search-field{-ms-flex-pack:distribute;justify-content:space-around}.phn-justify-between.sc-phn-autocomplete-search-field{-ms-flex-pack:justify;justify-content:space-between}.phn-flex-wrap.sc-phn-autocomplete-search-field{-ms-flex-wrap:wrap;flex-wrap:wrap}.sc-phn-autocomplete-search-field-h{display:block}.sc-phn-autocomplete-search-field-h .form-container.sc-phn-autocomplete-search-field{display:block;position:relative;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.sc-phn-autocomplete-search-field-h .form-container.sc-phn-autocomplete-search-field phn-p-text-field-wrapper.sc-phn-autocomplete-search-field{width:100%}.sc-phn-autocomplete-search-field-h .form-container.sc-phn-autocomplete-search-field phn-p-text-field-wrapper.sc-phn-autocomplete-search-field input[type=search].sc-phn-autocomplete-search-field::-ms-clear{display:none;width:0;height:0}.sc-phn-autocomplete-search-field-h .form-container.sc-phn-autocomplete-search-field phn-p-text-field-wrapper.sc-phn-autocomplete-search-field input[type=search].sc-phn-autocomplete-search-field::-ms-reveal{display:none;width:0;height:0}.sc-phn-autocomplete-search-field-h .form-container.sc-phn-autocomplete-search-field phn-p-text-field-wrapper.sc-phn-autocomplete-search-field input[type=search].sc-phn-autocomplete-search-field::-webkit-search-decoration,.sc-phn-autocomplete-search-field-h .form-container.sc-phn-autocomplete-search-field phn-p-text-field-wrapper.sc-phn-autocomplete-search-field input[type=search].sc-phn-autocomplete-search-field::-webkit-search-cancel-button,.sc-phn-autocomplete-search-field-h .form-container.sc-phn-autocomplete-search-field phn-p-text-field-wrapper.sc-phn-autocomplete-search-field input[type=search].sc-phn-autocomplete-search-field::-webkit-search-results-button,.sc-phn-autocomplete-search-field-h .form-container.sc-phn-autocomplete-search-field phn-p-text-field-wrapper.sc-phn-autocomplete-search-field input[type=search].sc-phn-autocomplete-search-field::-webkit-search-results-decoration{display:none}.sc-phn-autocomplete-search-field-h .form-container.inline-search-form.sc-phn-autocomplete-search-field{margin-right:1rem}.sc-phn-autocomplete-search-field-h .prediction-container.sc-phn-autocomplete-search-field{-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:10;width:100%;background-color:white;border:1px solid #d8d8db}.sc-phn-autocomplete-search-field-h .prediction-container.sc-phn-autocomplete-search-field ul.sc-phn-autocomplete-search-field{margin-block:0;margin-inline:0;padding-inline:0;list-style-type:none}.sc-phn-autocomplete-search-field-h .prediction-container.sc-phn-autocomplete-search-field ul.sc-phn-autocomplete-search-field li.sc-phn-autocomplete-search-field{padding-left:0.75rem;padding:0.5rem 0 0.5rem 0.75rem;color:#010205}.sc-phn-autocomplete-search-field-h .prediction-container.sc-phn-autocomplete-search-field ul.sc-phn-autocomplete-search-field li.sc-phn-autocomplete-search-field:hover{color:#2762ec;background-color:#eeeff2}.sc-phn-autocomplete-search-field-h .prediction-container.sc-phn-autocomplete-search-field ul.sc-phn-autocomplete-search-field li.highlighted-prediction.sc-phn-autocomplete-search-field{color:#2762ec}.sc-phn-autocomplete-search-field-h .prediction-container.sc-phn-autocomplete-search-field .powered-by-google.sc-phn-autocomplete-search-field{margin:0.75rem 0 0.75rem 0.75rem}";const Q=class{constructor(i){e(this,i);this.searchInput=t(this,"searchInput",7);this.clearSearch=t(this,"clearSearch",7);this.submitSearch=t(this,"submitSearch",7);this.predictionsToggle=t(this,"predictionsToggle",7);this.autoCompleteLoaded=t(this,"autoCompleteLoaded",7);this.placeholder=undefined;this.predictions=undefined;this.initialValue="";this.errorState="";this.errorMessage="";this.showPredictions=false;this.highlightedPredictionIndex=-1;this.searchterm=this.initialValue}clickListener(e){this.showPredictions=e.composedPath()[0]===this.el.querySelector("input.autofocus")&&this.predictions.length>0}keydownListener(e){if(e.key==="Escape"&&this.showPredictions){e.preventDefault();e.stopPropagation();this.showPredictions=false}}watchShowPredictions(e){this.predictionsToggle.emit(e)}watchInitialValue(){this.searchterm=this.initialValue}componentDidRender(){this.autoCompleteLoaded.emit(true)}onKeyDown(e){if(this.predictions.length===0)return;switch(e){case"ArrowDown":if(!this.showPredictions){return}if(this.highlightedPredictionIndex===this.predictions.length-1){this.highlightedPredictionIndex=0;break}this.highlightedPredictionIndex++;break;case"ArrowUp":if(!this.showPredictions){return}if(this.highlightedPredictionIndex<0){this.highlightedPredictionIndex=0;break}else if(this.highlightedPredictionIndex===0){this.highlightedPredictionIndex=this.predictions.length-1;break}this.highlightedPredictionIndex--;break}if(this.highlightedPredictionIndex>-1){this.searchterm=this.predictions[this.highlightedPredictionIndex].text}}onSubmit(){const e=this.highlightedPredictionIndex<0?this.predictions[0]:this.predictions[this.highlightedPredictionIndex];this.submitSearch.emit(e!==null&&e!==void 0?e:null);this.showPredictions=false;if(e!==undefined)this.searchterm=e.text}render(){return i("form",{class:"form-container",onSubmit:e=>{e.preventDefault();this.onSubmit()}},i("phn-p-text-field-wrapper",{"data-test-id":"dealer-search-form-input",state:y(this.errorMessage)?"error":"none",message:this.errorMessage},i("input",{class:"autofocus","aria-label":"Find a dealer by typing a city name or zip code",type:"search",placeholder:this.placeholder,autocomplete:"off",role:"combobox","data-validate":"required","aria-expanded":(this.predictions.length>0&&this.showPredictions).toString(),"aria-controls":"predictions","aria-autocomplete":"list","aria-activedescendant":this.showPredictions?String(this.highlightedPredictionIndex):undefined,value:this.searchterm,onInput:e=>{var t;e.preventDefault();this.showPredictions=true;this.highlightedPredictionIndex=-1;const i=(t=x(e.target))===null||t===void 0?void 0:t.value;if(!y(i)){this.searchterm="";this.showPredictions=false;j.state.savedDealerCookie=null;this.clearSearch.emit();return}this.searchInput.emit(i)},onKeyDown:e=>{this.onKeyDown(e.key)}})),this.predictions.length>0&&this.showPredictions?i("div",{class:"prediction-container"},i("ul",{id:"predictions","data-test-id":"dealer-search-autocomplete-predictions",role:"listbox","aria-label":"List of location predictions"},this.predictions.map(((e,t)=>i("li",{key:e.id,class:t===this.highlightedPredictionIndex?"highlighted-prediction":"",role:"option","aria-selected":String(t===this.highlightedPredictionIndex),id:String(t),onClick:()=>{this.highlightedPredictionIndex=t;this.onSubmit()},onKeyDown:e=>{if(e.key==="Enter"){this.onSubmit()}}},i("phn-p-text",{color:"inherit"},e.text))))),i("img",{class:"powered-by-google",src:o(`${g(n.state.env).ASSETS_URL}/icon-assets/powered_by_google_on_white.png`),alt:"powered by Google"})):null)}get el(){return a(this)}static get watchers(){return{showPredictions:["watchShowPredictions"],initialValue:["watchInitialValue"]}}};Q.style=W;const q="@-webkit-keyframes slideDown{from{max-height:0}to{max-height:1000px}}@keyframes slideDown{from{max-height:0}to{max-height:1000px}}@-webkit-keyframes slideUp{from{max-height:1000px}to{max-height:0}}@keyframes slideUp{from{max-height:1000px}to{max-height:0}}@-webkit-keyframes slideLeft{from{max-width:0}to{max-width:1000px}}@keyframes slideLeft{from{max-width:0}to{max-width:1000px}}@-webkit-keyframes slideRight{from{max-width:1000px}to{max-width:0}}@keyframes slideRight{from{max-width:1000px}to{max-width:0}}@-webkit-keyframes darken{from{background-color:rgba(0, 0, 0, 0)}to{background-color:rgba(0, 0, 0, 0.8)}}@keyframes darken{from{background-color:rgba(0, 0, 0, 0)}to{background-color:rgba(0, 0, 0, 0.8)}}@-webkit-keyframes lighten{from{background-color:rgba(0, 0, 0, 0.8)}to{background-color:rgba(0, 0, 0, 0)}}@keyframes lighten{from{background-color:rgba(0, 0, 0, 0.8)}to{background-color:rgba(0, 0, 0, 0)}}@-webkit-keyframes fadeInFromBottom{0%{opacity:0;top:36px}100%{opacity:1;top:0px}}@keyframes fadeInFromBottom{0%{opacity:0;top:36px}100%{opacity:1;top:0px}}@-webkit-keyframes fadeOutToTop{0%{opacity:1;bottom:0px}100%{opacity:0;bottom:16px}}@keyframes fadeOutToTop{0%{opacity:1;bottom:0px}100%{opacity:0;bottom:16px}}@-webkit-keyframes slideLeftDoubleDrawer{from{right:-1000px}to{right:0px}}@keyframes slideLeftDoubleDrawer{from{right:-1000px}to{right:0px}}@-webkit-keyframes slideRightDoubleDrawer{from{right:0px}to{right:-1000px}}@keyframes slideRightDoubleDrawer{from{right:0px}to{right:-1000px}}@-webkit-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes fadeOut{0%{opacity:1}100%{opacity:0}}@keyframes fadeOut{0%{opacity:1}100%{opacity:0}}.phn-flex-col.sc-phn-dealer-details-drawer{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.phn-flex-row.sc-phn-dealer-details-drawer{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row}.phn-align-center.sc-phn-dealer-details-drawer{-ms-flex-align:center;align-items:center}.phn-justify-around.sc-phn-dealer-details-drawer{-ms-flex-pack:distribute;justify-content:space-around}.phn-justify-between.sc-phn-dealer-details-drawer{-ms-flex-pack:justify;justify-content:space-between}.phn-flex-wrap.sc-phn-dealer-details-drawer{-ms-flex-wrap:wrap;flex-wrap:wrap}.sc-phn-dealer-details-drawer-h{display:block;margin-top:1.625rem}@media (min-width: 760px){.sc-phn-dealer-details-drawer-h{margin-top:-0.125rem}}@media (min-width: 1300px){.sc-phn-dealer-details-drawer-h{margin-top:-0.1875rem}}@media (min-width: 1920px){.sc-phn-dealer-details-drawer-h{margin-top:-0.4375rem}}.sc-phn-dealer-details-drawer-h .skeleton-headline.sc-phn-dealer-details-drawer{width:auto;height:3.125rem;background:#d8d8db;margin-bottom:1.75rem;border-radius:4px}.sc-phn-dealer-details-drawer-h phn-p-heading.sc-phn-dealer-details-drawer{margin-bottom:1.5rem}.sc-phn-dealer-details-drawer-h phn-menu-item.sc-phn-dealer-details-drawer{margin-top:1.5rem}.sc-phn-dealer-details-drawer-h phn-menu-item.sc-phn-dealer-details-drawer:first-of-type{margin-top:0.875rem}.skeleton.sc-phn-dealer-details-drawer-h{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.skeleton.skeleton-menu-item.sc-phn-dealer-details-drawer-h{width:auto;height:1.25rem;background:#d8d8db;border-radius:4px}";const G=class{constructor(i){e(this,i);this.clickDrawerHeaderBack=t(this,"clickDrawerHeaderBack",7);this.dealerId=undefined;this.locale=undefined;this.breakpoint=undefined;this.errorMessage="";this.showSkeleton=true}componentWillLoad(){this.waitForComponentsToLoad()}componentDidLoad(){const e=this.getDealer();_.pushDataLayerEvent(l.DEALER_DETAILS_SCREEN_LOAD,{componentDisplay:{displayElementId:F.getDealerResultsLoadDisplayElementId(c),displayElementType:F.getDealerResultsLoadDisplayElementType(),displayElementName:e===null||e===void 0?void 0:e.name},componentSearch:{searchTerm:j.state.searchTerm},partner:{companyName:e===null||e===void 0?void 0:e.name,companyId:e===null||e===void 0?void 0:e.porschePartnerNo}})}async waitForComponentsToLoad(){await C(this.el,new N(5e3));this.showSkeleton=false}getDealer(){const{ppnDealer:e}=j.state.ppnDealers[this.dealerId]||{};return e}renderHeading(e){return i(r,null,this.showSkeleton?i("div",{class:"skeleton-headline"}):null,i("phn-p-heading",{style:{display:this.showSkeleton?"none":""},tag:"h3",size:"large","data-test-id":"dealer-headline"},e))}render(){const e=this.getDealer();if(e===undefined){return i("div",null,this.errorMessage)}const t=h(this.locale).language;const{testDrive:o,finder:a,bookService:r}=p.state.dealer.details;const n=Object.values(e.addressLocalized).every((e=>e!=null&&e!=""));const c=t==="en"?e.address:n?e.addressLocalized:e.address;const d=t==="en"?e.name:y(e.nameLocalized)?e.nameLocalized:e.name;const m=y(c.street)||y(e.address.postalCode)||y(c.city);const f=y(e.contactDetails.phoneNumber);const u=y(e.contactDetails.emailAddress);const g=y(e.contactDetails.homepage);const x=o&&y(o===null||o===void 0?void 0:o.text)&&y(o===null||o===void 0?void 0:o.link);const v=y(e.nameLocalized)||y(e.name);const D=$(e.contactDetails.contactOpeningHours);const E=D!=="";let I="";try{I=h(this.locale).country}catch(e){}const T=I==="JP"?`〒${e.address.postalCode} ${c.city} ${c.street}`:`${c.street}, ${e.address.postalCode} ${c.city}`;const L={componentSearch:{searchTerm:j.state.searchTerm},partner:{companyName:d,companyId:e.porschePartnerNo}};return i(s,null,v&&k(this.breakpoint)?this.renderHeading(d):null,m?i(J,{showSkeleton:this.showSkeleton,elementId:O(this.dealerId,"address"),analyticsId:"mainmenu.finddealer.map",text:T,iconLeft:"pin","data-test-id":"dealer-address",link:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(`${c.street},${e.address.postalCode},${c.city}`)}`,target:"_blank",datalayerEventAction:l.DEALER_CONTACT_CLICK,customDatalayerProperties:L,variant:b.DealerDetails}):null,U.isDealerSearchOpeningHoursEnabled()&&E?i(J,{showSkeleton:this.showSkeleton,elementId:O(this.dealerId,"openingHours"),analyticsId:"mainmenu.finddealer.openinghours",text:D,datalayerEventAction:l.DEALER_CONTACT_CLICK,customDatalayerProperties:L,variant:b.DealerDetails,"data-test-id":"dealer-opening-hours",iconLeft:"clock"}):null,f?i(J,{showSkeleton:this.showSkeleton,elementId:O(this.dealerId,"number"),analyticsId:"mainmenu.finddealer.phone",text:e.contactDetails.phoneNumber,iconLeft:"phone","data-test-id":"dealer-phonenumber",link:`tel:${e.contactDetails.phoneNumber}`,datalayerEventAction:l.DEALER_CONTACT_CLICK,customDatalayerProperties:L,variant:b.DealerDetails}):null,u?i(J,{showSkeleton:this.showSkeleton,elementId:O(this.dealerId,"email"),analyticsId:"mainmenu.finddealer.email",text:e.contactDetails.emailAddress,iconLeft:"email","data-test-id":"dealer-email",link:`mailto:${e.contactDetails.emailAddress}`,datalayerEventAction:l.DEALER_CONTACT_CLICK,customDatalayerProperties:L,variant:b.DealerDetails}):null,g?i(J,{showSkeleton:this.showSkeleton,elementId:O(this.dealerId,"homepage"),analyticsId:"mainmenu.finddealer.website",text:e.contactDetails.homepage.replace("https://",""),iconLeft:"globe","data-test-id":"dealer-homepage",link:P(e.contactDetails.homepage),target:"_blank",datalayerEventAction:l.DEALER_CONTACT_CLICK,customDatalayerProperties:L,variant:b.DealerDetails}):null,a&&y(I)?i(J,{showSkeleton:this.showSkeleton,elementId:O(this.dealerId,a.id),analyticsId:a.id,text:a.text,"data-test-id":"dealer-finder-cars",link:w(a.link,{dealership:e.ppnOrgId}),iconLeft:"car",datalayerEventAction:l.DEALER_CONTACT_CLICK,customDatalayerProperties:L,variant:b.DealerDetails}):null,r?i(J,{showSkeleton:this.showSkeleton,elementId:O(this.dealerId,r.text),analyticsId:r.id,text:r.text,link:w(r.link,{dealer:e.porschePartnerNo}),datalayerEventAction:l.DEALER_CONTACT_CLICK,customDatalayerProperties:L,variant:b.DealerDetails,"data-test-id":"dealer-book-service",iconLeft:"wrench"}):null,x?i(J,{showSkeleton:this.showSkeleton,elementId:O(this.dealerId,o.text),analyticsId:o.id,text:o.text,link:o.link,datalayerEventAction:l.DEALER_CONTACT_CLICK,customDatalayerProperties:L,variant:b.DealerDetails,"data-test-id":"dealer-book-testdrive",iconLeft:"steering-wheel"}):null)}get el(){return a(this)}};function J(e){return i("phn-menu-item-card",Object.assign({tabIndex:0,class:`${e.showSkeleton?"skeleton":""}`},e))}G.style=q;function Z({errorMessage:e,onDismiss:t}){return i("div",{class:"error-message animated"},i("phn-p-inline-notification",{state:"error",description:e,onDismiss:t}))}const Y=".sc-phn-dealer-search-by-number-of-dealers-h{display:block}.sc-phn-dealer-search-by-number-of-dealers-h .spinner.sc-phn-dealer-search-by-number-of-dealers{display:-ms-flexbox;display:flex;position:relative;-ms-flex-pack:center;justify-content:center;width:100%;margin-top:1.5rem}";const X=class{constructor(i){e(this,i);this.removeSkeletonOnDealerSearchForm=t(this,"removeSkeletonOnDealerSearchForm",7);this.isLoading=false;this.formErrorMessage=null;this.locale=undefined}componentWillLoad(){this.waitForComponentsToLoad().then((()=>{const{dealer:e}=p.state;if(e.numberOfDealers<=5){this.fetchAllDealersForMarket()}}))}componentDidLoad(){this.emitPageLoadEvent()}async waitForComponentsToLoad(){await C(this.el,new N(5e3));this.removeSkeletonOnDealerSearchForm.emit()}async fetchAllDealersForMarket(){const{error:e}=p.state;try{this.isLoading=true;const{country:e}=h(this.locale);const{env:t}=n.state;const i=await B(t,g(t).DEALER_API_URL_ALL_DEALERS,e);j.state.results=i.map((({ppnDealer:e})=>e.id));j.state.ppnDealers=i.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.ppnDealer.id]:t})),j.state.ppnDealers)}catch(t){z.error("FETCH_DEALERS",t);this.formErrorMessage=v(e,t)}finally{this.isLoading=false;this.emitResultsLoadEvent()}}emitPageLoadEvent(){const{dealer:e}=p.state;_.pushDataLayerEvent(l.DEALER_SEARCH_SCREEN_LOAD,{componentDisplay:{displayElementId:F.calculateDisplayElementId(),displayElementType:F.calculateDisplayElementType("",d.dealerSearchForm),displayElementName:e.text},componentSearch:{searchTerm:D,numberOfResults:e.numberOfDealers}})}emitResultsLoadEvent(){const{dealer:e}=p.state;_.pushDataLayerEvent(l.DEALER_RESULTS_SCREEN_LOAD,{componentDisplay:{displayElementId:F.getDealerResultsLoadDisplayElementId(m),displayElementType:F.getDealerResultsLoadDisplayElementType(),displayElementName:e.text},componentSearch:{searchTerm:D,numberOfResults:e.numberOfDealers}})}reset(){this.formErrorMessage=null;this.isLoading=false;j.state.results=null}render(){if(this.isLoading){return i("div",{class:"spinner"},i("phn-p-spinner",{size:"medium",aria:{"aria-label":"Loading page content"}}))}if(y(this.formErrorMessage))return i(Z,{errorMessage:this.formErrorMessage,onDismiss:()=>this.reset()})}get el(){return a(this)}};X.style=Y;const ee="@-webkit-keyframes slideDown{from{max-height:0}to{max-height:1000px}}@keyframes slideDown{from{max-height:0}to{max-height:1000px}}@-webkit-keyframes slideUp{from{max-height:1000px}to{max-height:0}}@keyframes slideUp{from{max-height:1000px}to{max-height:0}}@-webkit-keyframes slideLeft{from{max-width:0}to{max-width:1000px}}@keyframes slideLeft{from{max-width:0}to{max-width:1000px}}@-webkit-keyframes slideRight{from{max-width:1000px}to{max-width:0}}@keyframes slideRight{from{max-width:1000px}to{max-width:0}}@-webkit-keyframes darken{from{background-color:rgba(0, 0, 0, 0)}to{background-color:rgba(0, 0, 0, 0.8)}}@keyframes darken{from{background-color:rgba(0, 0, 0, 0)}to{background-color:rgba(0, 0, 0, 0.8)}}@-webkit-keyframes lighten{from{background-color:rgba(0, 0, 0, 0.8)}to{background-color:rgba(0, 0, 0, 0)}}@keyframes lighten{from{background-color:rgba(0, 0, 0, 0.8)}to{background-color:rgba(0, 0, 0, 0)}}@-webkit-keyframes fadeInFromBottom{0%{opacity:0;top:36px}100%{opacity:1;top:0px}}@keyframes fadeInFromBottom{0%{opacity:0;top:36px}100%{opacity:1;top:0px}}@-webkit-keyframes fadeOutToTop{0%{opacity:1;bottom:0px}100%{opacity:0;bottom:16px}}@keyframes fadeOutToTop{0%{opacity:1;bottom:0px}100%{opacity:0;bottom:16px}}@-webkit-keyframes slideLeftDoubleDrawer{from{right:-1000px}to{right:0px}}@keyframes slideLeftDoubleDrawer{from{right:-1000px}to{right:0px}}@-webkit-keyframes slideRightDoubleDrawer{from{right:0px}to{right:-1000px}}@keyframes slideRightDoubleDrawer{from{right:0px}to{right:-1000px}}@-webkit-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes fadeOut{0%{opacity:1}100%{opacity:0}}@keyframes fadeOut{0%{opacity:1}100%{opacity:0}}.phn-flex-col.sc-phn-dealer-search-form-dropdown{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.phn-flex-row.sc-phn-dealer-search-form-dropdown{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row}.phn-align-center.sc-phn-dealer-search-form-dropdown{-ms-flex-align:center;align-items:center}.phn-justify-around.sc-phn-dealer-search-form-dropdown{-ms-flex-pack:distribute;justify-content:space-around}.phn-justify-between.sc-phn-dealer-search-form-dropdown{-ms-flex-pack:justify;justify-content:space-between}.phn-flex-wrap.sc-phn-dealer-search-form-dropdown{-ms-flex-wrap:wrap;flex-wrap:wrap}.sc-phn-dealer-search-form-dropdown-h{display:block}.sc-phn-dealer-search-form-dropdown-h .spinner.sc-phn-dealer-search-form-dropdown{display:-ms-flexbox;display:flex;position:relative;-ms-flex-pack:center;justify-content:center;width:100%;margin-top:1.5rem}.sc-phn-dealer-search-form-dropdown-h .city-select-form-field.sc-phn-dealer-search-form-dropdown{padding-top:1.5rem}.sc-phn-dealer-search-form-dropdown-h .title-container.sc-phn-dealer-search-form-dropdown{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;border:2px solid rgb(107, 109, 112);border-radius:5px;-webkit-transition:background-color 0.24s ease;transition:background-color 0.24s ease;margin:0;min-height:3.375rem}.sc-phn-dealer-search-form-dropdown-h .title-container.sc-phn-dealer-search-form-dropdown phn-p-text.sc-phn-dealer-search-form-dropdown{padding-left:19px}.sc-phn-dealer-search-form-dropdown-h .title-container.sc-phn-dealer-search-form-dropdown phn-p-icon.sc-phn-dealer-search-form-dropdown{margin-right:1rem;padding-top:-8px;outline:0}.sc-phn-dealer-search-form-dropdown-h .title-container.sc-phn-dealer-search-form-dropdown div.text-limit.sc-phn-dealer-search-form-dropdown{width:80%}";const te=class{constructor(i){e(this,i);this.dealerSearchFormEvent=t(this,"dealerSearchFormEvent",7);this.clearSearchEvent=t(this,"clearSearchEvent",7);this.removeSkeletonOnDealerSearchForm=t(this,"removeSkeletonOnDealerSearchForm",7);this.locale="";this.breakpoint=undefined;this.isLoading=false;this.errorMessage=null;this.dealersOfRegion={regions:[]};this.cities=[];this.selectedProvince="";this.selectedCity="";this.showSkeleton=true}componentWillLoad(){this.waitForComponentsToLoad();this.getDealersByRegion()}componentDidLoad(){this.emitPageLoadEvent()}async waitForComponentsToLoad(){await C(this.el,new N(5e3));this.removeSkeletonOnDealerSearchForm.emit()}loadedAutoCompleteListener(e){this.showSkeleton=false}async getDealersByRegion(){const{error:e}=p.state;const{country:t}=h(this.locale);try{this.isLoading=true;this.dealersOfRegion=await M(t)}catch(t){z.error("FETCH_DEALERS",t);this.errorMessage=v(e,t)}finally{this.isLoading=false;this.dealerSearchFormEvent.emit();this.emitResultsLoadEvent()}}onCitySelect(e){var t;if(e.target===null){return}const i=e.target.value;this.selectedCity=i;j.state.ppnDealers=((t=this.cities.find((e=>[e.cityName,e.cityNameLocalized].includes(i))))===null||t===void 0?void 0:t.dealers)||{};j.state.results=Object.keys(j.state.ppnDealers);j.state.searchTerm=`${this.selectedProvince}, ${this.selectedCity}`}onProvinceSelect(e){if(e.target===null){return}const t=e.target.value;this.cities=this.getCitiesByGivenRegionName(t);this.selectedProvince=t}getCitiesByGivenRegionName(e){const t=this.dealersOfRegion.regions;const i=t.find((({regionName:t,regionNameLocalized:i})=>[t,i].includes(e)));return(i===null||i===void 0?void 0:i.cities)||[]}emitPageLoadEvent(){const{results:e,searchTerm:t}=j.state;const{dealer:i}=p.state;_.pushDataLayerEvent(l.DEALER_SEARCH_SCREEN_LOAD,{componentDisplay:{displayElementId:F.calculateDisplayElementId(),displayElementType:F.calculateDisplayElementType("",d.dealerSearchForm),displayElementName:i.text},componentSearch:{searchTerm:y(t)?t:E,numberOfResults:(e===null||e===void 0?void 0:e.length)||0}})}emitResultsLoadEvent(){const{results:e,searchTerm:t}=j.state;const{dealer:i}=p.state;const o=(e===null||e===void 0?void 0:e.length)||0;_.pushDataLayerEvent(l.DEALER_RESULTS_SCREEN_LOAD,{componentDisplay:{displayElementId:F.getDealerResultsLoadDisplayElementId(m),displayElementType:F.getDealerResultsLoadDisplayElementType(),displayElementName:i.text},componentSearch:{searchTerm:t,numberOfResults:o}})}reset(){this.errorMessage=null;this.isLoading=false;this.selectedProvince="";this.selectedCity="";j.state.results=null;j.state.savedDealerCookie=null;this.clearSearchEvent.emit()}render(){const{results:e}=j.state;const{dealer:t}=p.state;const o=j.state.searchTerm;if(this.isLoading){return i("div",{class:"spinner"},i("phn-p-spinner",{size:"medium",aria:{"aria-label":"Loading page content"}}))}return i(s,null,e&&e.length>0?i("form",{class:"form-container",onSubmit:e=>{e.preventDefault()}},i("div",null,i("div",{class:"phn-flex-row phn-align-center phn-justify-between title-container"},i("div",{class:"text-limit"},i("phn-p-text",{weight:"regular",size:"small",tag:"div",ellipsis:"true",color:"contrast-medium","data-test-id":"dealer-search-form-input"},o)),i("phn-p-icon",{name:"close",class:"close-icon",style:{display:this.showSkeleton?"none":"",cursor:"pointer"},onClick:e=>{e.preventDefault();this.reset()}})))):i(r,null,i("phn-p-select-wrapper",{filter:true,label:t.search.dropdown.province,required:true,style:{display:this.showSkeleton?"none":""}},i("select",{name:"dealers-province",onChange:e=>this.onProvinceSelect(e),style:{display:this.showSkeleton?"none":""}},i("option",{hidden:true,selected:true},t.search.dropdown.selectAProvince),this.dealersOfRegion.regions.map((e=>{const t=h(this.locale).language==="en"||e.regionNameLocalized===null?e.regionName:e.regionNameLocalized;return i("option",{value:t},t)})))),i("phn-p-select-wrapper",{style:{display:this.showSkeleton?"none":""},class:"city-select-form-field",filter:"true",label:t.search.dropdown.city,required:true},i("select",{disabled:!y(this.selectedProvince),style:{display:this.showSkeleton?"none":""},name:"dealers-cities",onChange:e=>{this.onCitySelect(e)}},i("option",{hidden:true},t.search.dropdown.selectACity),this.cities.map((e=>i("option",null,h(this.locale).language==="en"||e.cityNameLocalized===null?e.cityName:e.cityNameLocalized))))),y(this.errorMessage)?i(Z,{errorMessage:this.errorMessage,onDismiss:()=>this.reset()}):null))}get el(){return a(this)}};te.style=ee;class ie{constructor(){this.autocompleteService=null;this.placesService=null;this.geocoderService=null;this.getLocation=null}async init(e){try{const t=await V.fetchGoogleMapsApi(e);this.autocompleteService=new t.maps.places.AutocompleteService;this.placesService=new t.maps.places.PlacesService(new t.maps.Map(V.createDiv()));this.geocoderService=new t.maps.Geocoder;this.getLocation=e=>new t.maps.LatLng(e.latitude,e.longitude)}catch(e){throw new I(`windowService.fetchGoogleMapsApi failed with error: ${e}`,T.GENERAL)}}async getPredictions(e,t){var i;if(e.length===0){return[]}const o=await new Promise(((i,o)=>{if(this.autocompleteService===null){o(new I("autocompleteService is not initialised",T.GENERAL));return}this.autocompleteService.getPlacePredictions({input:e,componentRestrictions:{country:A(h(t).country)}},((e,t)=>t==="OK"?i(e):o(new I(`autocompleteService.getPlacePredictions failed with ${t}`,oe(t)))))}));return(i=o===null||o===void 0?void 0:o.filter((({place_id:e,description:t})=>y(e)&&y(t))).map((({place_id:e,description:t})=>({id:e,text:t}))))!==null&&i!==void 0?i:[]}async getPlaceCoordinates(e){var t,i,o,a;const r=await new Promise(((t,i)=>{if(this.placesService===null){i(new I("placesService is not initialised",T.GENERAL));return}this.placesService.getDetails({placeId:e},((e,o)=>o==="OK"?t(e):i(new I(`placeService.getDetails failed with ${o}`,oe(o)))))}));const s=(i=(t=r===null||r===void 0?void 0:r.geometry)===null||t===void 0?void 0:t.location)===null||i===void 0?void 0:i.lat();const n=(a=(o=r===null||r===void 0?void 0:r.geometry)===null||o===void 0?void 0:o.location)===null||a===void 0?void 0:a.lng();if(typeof s!=="number"||typeof n!=="number"){throw new I(`placesService.getDetails did not find latitude or longitude for placeId: ${e}`,T.NO_RESULTS)}return{latitude:s,longitude:n}}async getFormattedAddressFromCoordinates(e){if(this.getLocation===null){throw new I("getLocation is not initialised",T.GENERAL)}const t=this.getLocation(e);const i=await new Promise(((e,i)=>{if(this.geocoderService===null){i(new I("geocoderService is not initialised",T.GENERAL));return}this.geocoderService.geocode({location:t},((t,o)=>{o==="OK"?e(t):i(new I(`geocoderService.geocode failed with status ${o}`,oe(o)))}))}));if(i===null||i.length===0){throw new I("geocoderService.geocode did not find the location based on coordinates.",T.NO_RESULTS)}return i[0].formatted_address}}function oe(e){switch(e){case"INVALID_REQUEST":{return T.INVALID_INPUT}case"NOT_FOUND":case"ZERO_RESULTS":{return T.NO_RESULTS}case"OVER_QUERY_LIMIT":case"UNKNOWN_ERROR":{return T.RETRY}case"ERROR":case"REQUEST_DENIED":default:{return T.GENERAL}}}const ae=new ie;const re="@-webkit-keyframes slideDown{from{max-height:0}to{max-height:1000px}}@keyframes slideDown{from{max-height:0}to{max-height:1000px}}@-webkit-keyframes slideUp{from{max-height:1000px}to{max-height:0}}@keyframes slideUp{from{max-height:1000px}to{max-height:0}}@-webkit-keyframes slideLeft{from{max-width:0}to{max-width:1000px}}@keyframes slideLeft{from{max-width:0}to{max-width:1000px}}@-webkit-keyframes slideRight{from{max-width:1000px}to{max-width:0}}@keyframes slideRight{from{max-width:1000px}to{max-width:0}}@-webkit-keyframes darken{from{background-color:rgba(0, 0, 0, 0)}to{background-color:rgba(0, 0, 0, 0.8)}}@keyframes darken{from{background-color:rgba(0, 0, 0, 0)}to{background-color:rgba(0, 0, 0, 0.8)}}@-webkit-keyframes lighten{from{background-color:rgba(0, 0, 0, 0.8)}to{background-color:rgba(0, 0, 0, 0)}}@keyframes lighten{from{background-color:rgba(0, 0, 0, 0.8)}to{background-color:rgba(0, 0, 0, 0)}}@-webkit-keyframes fadeInFromBottom{0%{opacity:0;top:36px}100%{opacity:1;top:0px}}@keyframes fadeInFromBottom{0%{opacity:0;top:36px}100%{opacity:1;top:0px}}@-webkit-keyframes fadeOutToTop{0%{opacity:1;bottom:0px}100%{opacity:0;bottom:16px}}@keyframes fadeOutToTop{0%{opacity:1;bottom:0px}100%{opacity:0;bottom:16px}}@-webkit-keyframes slideLeftDoubleDrawer{from{right:-1000px}to{right:0px}}@keyframes slideLeftDoubleDrawer{from{right:-1000px}to{right:0px}}@-webkit-keyframes slideRightDoubleDrawer{from{right:0px}to{right:-1000px}}@keyframes slideRightDoubleDrawer{from{right:0px}to{right:-1000px}}@-webkit-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes fadeOut{0%{opacity:1}100%{opacity:0}}@keyframes fadeOut{0%{opacity:1}100%{opacity:0}}.phn-flex-col.sc-phn-dealer-search-form-geolocation{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.phn-flex-row.sc-phn-dealer-search-form-geolocation{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row}.phn-align-center.sc-phn-dealer-search-form-geolocation{-ms-flex-align:center;align-items:center}.phn-justify-around.sc-phn-dealer-search-form-geolocation{-ms-flex-pack:distribute;justify-content:space-around}.phn-justify-between.sc-phn-dealer-search-form-geolocation{-ms-flex-pack:justify;justify-content:space-between}.phn-flex-wrap.sc-phn-dealer-search-form-geolocation{-ms-flex-wrap:wrap;flex-wrap:wrap}.sc-phn-dealer-search-form-geolocation-h{display:block}.skeleton.sc-phn-dealer-search-form-geolocation-h{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.skeleton.sc-phn-dealer-search-form-geolocation-h .skeleton-autocomplete-search-field.sc-phn-dealer-search-form-geolocation{width:auto;height:3.125rem;background:#d8d8db;border-radius:4px}.skeleton.sc-phn-dealer-search-form-geolocation-h .skeleton-or-text.sc-phn-dealer-search-form-geolocation{width:auto;height:1.25rem;background:#d8d8db;border-radius:4px 4px 0 0}.skeleton.sc-phn-dealer-search-form-geolocation-h .skeleton-geolocation-button.sc-phn-dealer-search-form-geolocation{width:auto;height:3.125rem;background:#d8d8db;border-radius:0 0 4px 4px}.sc-phn-dealer-search-form-geolocation-h .or-container.sc-phn-dealer-search-form-geolocation{position:relative;width:100%;margin-top:1.25rem}.sc-phn-dealer-search-form-geolocation-h .or-container.sc-phn-dealer-search-form-geolocation .geolocation.sc-phn-dealer-search-form-geolocation{width:100%;padding-bottom:24px}.sc-phn-dealer-search-form-geolocation-h .or-container.sc-phn-dealer-search-form-geolocation phn-p-text.sc-phn-dealer-search-form-geolocation{margin-bottom:0.25rem;color:#010205}.sc-phn-dealer-search-form-geolocation-h .animate-out.sc-phn-dealer-search-form-geolocation{-webkit-animation:fadeOutToTop 0.75s ease-in-out 0s;animation:fadeOutToTop 0.75s ease-in-out 0s}.sc-phn-dealer-search-form-geolocation-h .input-container.sc-phn-dealer-search-form-geolocation{width:100%}.sc-phn-dealer-search-form-geolocation-h .spinner.sc-phn-dealer-search-form-geolocation{display:-ms-flexbox;display:flex;position:relative;-ms-flex-pack:center;justify-content:center;width:100%;margin-top:1.5rem}";const se=class{constructor(i){e(this,i);this.dealerSearchFormEvent=t(this,"dealerSearchFormEvent",7);this.clearSearchEvent=t(this,"clearSearchEvent",7);this.removeSkeletonOnDealerSearchForm=t(this,"removeSkeletonOnDealerSearchForm",7);this.debounceTimeout=new N(100);this.locale=undefined;this.predictions=[];this.errorMessage=null;this.formErrorMessage=null;this.isLoading=false;this.showGeolocationButton=j.state.results===null;this.animateResults=false;this.searchTerm=j.state.searchTerm;this.showSkeleton=true}loadedAutoCompleteListener(){this.showSkeleton=false}async waitForComponentsToLoad(){await C(this.el,new N(5e3));this.removeSkeletonOnDealerSearchForm.emit()}disconnectedCallback(){j.state.searchTerm=this.searchTerm;this.debounceTimeout.cancel()}componentWillLoad(){this.waitForComponentsToLoad().then((()=>{const{error:e}=p.state;ae.init("AIzaSyDCVTh9wCeBxQEIxiN28Zb2ZWCf8wbiw0E").catch((t=>{z.error("INIT_MAPS_SERVICE",t);this.formErrorMessage=v(e,t);this.errorMessage=null}))}))}componentDidLoad(){this.emitPageLoadEvent()}emitPageLoadEvent(){const{dealer:e}=p.state;_.pushDataLayerEvent(l.DEALER_SEARCH_SCREEN_LOAD,{componentDisplay:{displayElementId:F.calculateDisplayElementId(),displayElementType:F.calculateDisplayElementType("",d.dealerSearchForm,true),displayElementName:e.text}})}emitResultsLoadEvent(e){const{results:t}=j.state;const{dealer:i}=p.state;const o=y(e)?e:E;const a=(t===null||t===void 0?void 0:t.length)||0;_.pushDataLayerEvent(l.DEALER_RESULTS_SCREEN_LOAD,{componentDisplay:{displayElementId:F.getDealerResultsLoadDisplayElementId(m),displayElementType:F.getDealerResultsLoadDisplayElementType(),displayElementName:i.text},componentSearch:{searchTerm:o,numberOfResults:a}})}async fetchDealers(e){const{error:t}=p.state;try{this.reset();this.isLoading=true;const[t,i]=await e();const{env:o}=n.state;const a=await K(o,g(o).DEALER_API_URL,i,A(h(this.locale).country));j.state.searchTerm=t;j.state.results=a.map((({ppnDealer:e})=>e.id));j.state.ppnDealers=a.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.ppnDealer.id]:t})),j.state.ppnDealers);this.showGeolocationButton=false}catch(e){z.error("FETCH_DEALERS",e);this.formErrorMessage=v(t,e);this.errorMessage=null}finally{this.isLoading=false;this.animateResults=true}}async onSubmit(e){const{dealer:t,error:i}=p.state;if(!y(this.searchTerm)){this.errorMessage=i.noInput;this.formErrorMessage="";return}await this.fetchDealers((async()=>{if(e===null){throw new I("Dealer search form submitted without prediction",T.INVALID_INPUT)}this.searchTerm=e.text;_.pushDataLayerEvent(l.DEALER_SEARCH_CLICK,{componentClick:{clickElementId:e.id,clickElementName:e.text,clickElementType:f.Button,targetElement:u},componentDisplay:{displayElementId:c,displayElementType:F.calculateDisplayElementType(R.DEALER_SEARCH,d.dealerSearchForm),displayElementName:t.text},componentSearch:{searchTerm:e.text}});const i=await ae.getPlaceCoordinates(e.id);return[e.text,i]}));this.emitResultsLoadEvent(this.searchTerm)}async getCurrentLocation(){const{dealer:e}=p.state;await this.fetchDealers((async()=>{const t=await V.getNavigatorLatLong();const i=await ae.getFormattedAddressFromCoordinates(t);this.searchTerm="";_.pushDataLayerEvent(l.DEALER_GEOLOCATION_CLICK,{componentClick:{clickElementId:e.search.geolocation.id,clickElementName:e.search.geolocation.text,clickElementType:f.Button,targetElement:u},componentDisplay:{displayElementId:c,displayElementType:F.calculateDisplayElementType(R.DEALER_SEARCH,d.dealerSearchForm),displayElementName:e.text},componentSearch:{searchTerm:E}});return[i,t]}));this.emitResultsLoadEvent(E)}async onDealerSearchEntry(e){const{error:t}=p.state;try{this.searchTerm=e;this.errorMessage=null;this.formErrorMessage=null;this.showGeolocationButton=j.state.results===null;this.predictions=await ae.getPredictions(e,this.locale)}catch(e){z.error("GET_PREDICTIONS",e);this.errorMessage=v(t,e);this.predictions=[]}}reset(){this.errorMessage=null;this.formErrorMessage=null;this.animateResults=false;this.showGeolocationButton=true;this.isLoading=false;j.state.results=null}render(){const{dealer:e}=p.state;const{results:t}=j.state;return i(s,{class:this.showSkeleton?"skeleton":""},i("div",{class:"input-container"},this.showSkeleton?i("div",{class:"skeleton-autocomplete-search-field"}):null,i("phn-autocomplete-search-field",{placeholder:e.search.form.inputPlaceholder,initialValue:j.state.searchTerm,predictions:this.predictions,onSearchInput:e=>this.debounceTimeout.set((()=>this.onDealerSearchEntry(e.detail))),onClearSearch:()=>{this.predictions=[];j.state.searchTerm="";this.searchTerm="";this.reset();this.clearSearchEvent.emit();this.showGeolocationButton=true},onSubmitSearch:e=>this.onSubmit(e.detail),errorMessage:L(this.errorMessage),style:{display:this.showSkeleton?"none":""}})),this.isLoading&&i("div",{class:"spinner"},i("phn-p-spinner",{size:"medium",aria:{"aria-label":"Loading page content"}})),this.showGeolocationButton&&t===null?i(r,null,i("div",{class:`or-container ${this.isLoading?"animate-out":""}`,onAnimationEnd:()=>{this.showGeolocationButton=false}},this.showSkeleton?i("div",{class:"skeleton-or-text"}):null,i("phn-p-text",{color:"inherit",size:"inherit",tag:"div","data-test-id":"dealer-search-or-label",style:{display:this.showSkeleton?"none":""}},e.search.or),this.showSkeleton?i("div",{class:"skeleton-geolocation-button"}):null,i("phn-p-button",{class:"geolocation",onClick:()=>this.getCurrentLocation(),variant:"tertiary",icon:"locate",style:{display:this.showSkeleton?"none":""}},e.search.geolocation.text))):null,y(this.formErrorMessage)?i(Z,{errorMessage:this.formErrorMessage,onDismiss:()=>this.reset()}):null)}get el(){return a(this)}};se.style=re;function ne({dealer:e,showOverlay:t,eventEmitter:o,locale:a}){const{ppnDealer:r,distance:s}=e;const n=h(a).language;const m=Object.values(r.addressLocalized).every((e=>e!=null&&e!=""));const u=n==="en"?r.address:m?r.addressLocalized:r.address;const g=n==="en"?r.name:y(r.nameLocalized)?r.nameLocalized:r.name;const x=p.state.dealer.numberOfDealers;let b="";try{b=h(a).country}catch(e){}const w=e=>{const t=O(e.id);o.emit([t]);const{dealer:i}=p.state;const{results:a,searchTerm:r}=j.state;_.pushDataLayerEvent(l.DEALER_RESULT_CLICK,{componentClick:{clickElementId:e.id,clickElementName:e.name,clickElementType:f.Button,targetElement:`level2_${t}`},componentDisplay:{displayElementId:c,displayElementType:F.calculateDisplayElementType(R.DEALER_SEARCH,d.dealerSearchForm),displayElementName:i.text},componentSearch:{searchTerm:r,numberOfResults:a===null||a===void 0?void 0:a.length},partner:{companyName:e.name,companyId:e.porschePartnerNo}})};return i("phn-menu-item-card",{tabIndex:0,text:g,class:`animated ${t?"dealer-card-overlay":""} dealer-card`,onClick:()=>w(r),analyticsId:r.id},i("div",{class:"phn-flex-row phn-justify-between phn-align-center"},b==="JP"?i("phn-p-text",{color:"primary",size:"small"},`〒${r.address.postalCode} ${u.city} ${u.street}`):i("phn-p-text",{color:"primary",size:"small"},`${u.street}, `,i("span",{class:"city"},r.address.postalCode," ",u.city)),s&&s.value>=1&&x>5?i("phn-p-tag",{color:"notification-info-soft"},`${Math.round(s.value)}${s.unit.toLowerCase()}`):null))}function le(){const{dealer:e}=p.state;function t(){const t=e.search.map;const{results:i,searchTerm:o}=j.state;_.pushDataLayerEvent(l.DEALER_MAP_CLICK,{componentClick:{clickElementId:t.id,clickElementName:t.text,clickElementType:f.Link,targetUrl:t.link},componentDisplay:{displayElementId:c,displayElementType:F.calculateDisplayElementType(R.DEALER_SEARCH,d.dealerSearchForm),displayElementName:e.text},componentSearch:{searchTerm:y(o)?o:E,numberOfResults:i===null||i===void 0?void 0:i.length}})}return i("a",{class:"animated",href:e.search.map.link,"aria-label":e.search.map.description},i("phn-p-button",{onClick:t,variant:"tertiary"},e.search.map.text," "))}const ce=".sc-phn-dealer-search-results-h{display:block}.sc-phn-dealer-search-results-h phn-dealer-details-drawer.sc-phn-dealer-search-results{margin-top:1.25rem}.sc-phn-dealer-search-results-h phn-menu-item-card.sc-phn-dealer-search-results>div.sc-phn-dealer-search-results{margin-top:14px}.sc-phn-dealer-search-results-h .dealer-card-overlay.sc-phn-dealer-search-results{opacity:0.3}.sc-phn-dealer-search-results-h .dealer-card.sc-phn-dealer-search-results phn-p-tag.sc-phn-dealer-search-results{margin-left:1rem}.sc-phn-dealer-search-results-h .error-message.sc-phn-dealer-search-results{position:relative;margin-top:2rem}.sc-phn-dealer-search-results-h .animated.sc-phn-dealer-search-results{-webkit-animation:fadeInFromBottom 0.75s ease-in-out 0s;animation:fadeInFromBottom 0.75s ease-in-out 0s}.sc-phn-dealer-search-results-h a.sc-phn-dealer-search-results{display:inline-block;position:relative;width:100%;-webkit-text-decoration-line:none;text-decoration-line:none;margin-top:2.25rem}.sc-phn-dealer-search-results-h a.sc-phn-dealer-search-results phn-p-button.sc-phn-dealer-search-results{width:100%}";const he=class{constructor(i){e(this,i);this.mobileMenuItemClick=t(this,"mobileMenuItemClick",6);this.showOverlay=false;this.locale=undefined;this.breakpoint=undefined}render(){const{results:e,ppnDealers:t}=j.state;const{error:o}=p.state;if(e===null)return null;if((e===null||e===void 0?void 0:e.length)===0)return i(r,null,i(Z,{errorMessage:o.noResults,onDismiss:()=>null}));const a=e[0];if(e.length===1&&t[a]){j.state.savedDealerCookie={id:a,latitude:t[a].ppnDealer.coordinates.latitude,longitude:t[a].ppnDealer.coordinates.longitude};return i("phn-dealer-details-drawer",{breakpoint:this.breakpoint,dealerId:a,locale:this.locale})}return i(s,null,i(r,null,e.map((e=>{const o=t[e];if(o===undefined||o.ppnDealer===undefined){return null}return i(ne,{dealer:o,eventEmitter:this.mobileMenuItemClick,showOverlay:this.showOverlay,locale:this.locale})})),i(le,null)))}};he.style=ce;const pe="@-webkit-keyframes slideDown{from{max-height:0}to{max-height:1000px}}@keyframes slideDown{from{max-height:0}to{max-height:1000px}}@-webkit-keyframes slideUp{from{max-height:1000px}to{max-height:0}}@keyframes slideUp{from{max-height:1000px}to{max-height:0}}@-webkit-keyframes slideLeft{from{max-width:0}to{max-width:1000px}}@keyframes slideLeft{from{max-width:0}to{max-width:1000px}}@-webkit-keyframes slideRight{from{max-width:1000px}to{max-width:0}}@keyframes slideRight{from{max-width:1000px}to{max-width:0}}@-webkit-keyframes darken{from{background-color:rgba(0, 0, 0, 0)}to{background-color:rgba(0, 0, 0, 0.8)}}@keyframes darken{from{background-color:rgba(0, 0, 0, 0)}to{background-color:rgba(0, 0, 0, 0.8)}}@-webkit-keyframes lighten{from{background-color:rgba(0, 0, 0, 0.8)}to{background-color:rgba(0, 0, 0, 0)}}@keyframes lighten{from{background-color:rgba(0, 0, 0, 0.8)}to{background-color:rgba(0, 0, 0, 0)}}@-webkit-keyframes fadeInFromBottom{0%{opacity:0;top:36px}100%{opacity:1;top:0px}}@keyframes fadeInFromBottom{0%{opacity:0;top:36px}100%{opacity:1;top:0px}}@-webkit-keyframes fadeOutToTop{0%{opacity:1;bottom:0px}100%{opacity:0;bottom:16px}}@keyframes fadeOutToTop{0%{opacity:1;bottom:0px}100%{opacity:0;bottom:16px}}@-webkit-keyframes slideLeftDoubleDrawer{from{right:-1000px}to{right:0px}}@keyframes slideLeftDoubleDrawer{from{right:-1000px}to{right:0px}}@-webkit-keyframes slideRightDoubleDrawer{from{right:0px}to{right:-1000px}}@keyframes slideRightDoubleDrawer{from{right:0px}to{right:-1000px}}@-webkit-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes fadeOut{0%{opacity:1}100%{opacity:0}}@keyframes fadeOut{0%{opacity:1}100%{opacity:0}}.phn-flex-col.sc-phn-menu-item-card{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.phn-flex-row.sc-phn-menu-item-card{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row}.phn-align-center.sc-phn-menu-item-card{-ms-flex-align:center;align-items:center}.phn-justify-around.sc-phn-menu-item-card{-ms-flex-pack:distribute;justify-content:space-around}.phn-justify-between.sc-phn-menu-item-card{-ms-flex-pack:justify;justify-content:space-between}.phn-flex-wrap.sc-phn-menu-item-card{-ms-flex-wrap:wrap;flex-wrap:wrap}.sc-phn-menu-item-card-h{display:block;padding:1.1875rem;margin-top:1rem;border-radius:8px;background-color:rgba(148, 149, 152, 0.18);-webkit-transition:background-color 0.24s ease;transition:background-color 0.24s ease;cursor:pointer}.sc-phn-menu-item-card-h button.sc-phn-menu-item-card{all:unset;display:block;width:100%}.skeleton.sc-phn-menu-item-card-h{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background:#d8d8db;border-radius:4px}.skeleton.sc-phn-menu-item-card-h *.sc-phn-menu-item-card{visibility:hidden}@media (min-width: 760px){.sc-phn-menu-item-card-h{background-color:#fff}}@media (min-width: 760px){.sc-phn-menu-item-card-h:hover{background-color:rgba(148, 149, 152, 0.18)}}.sc-phn-menu-item-card-h a.sc-phn-menu-item-card{text-decoration:none}.sc-phn-menu-item-card-h .subtext.sc-phn-menu-item-card{color:#010205}.sc-phn-menu-item-card-h .title-container.sc-phn-menu-item-card{width:100%;margin:0}.sc-phn-menu-item-card-h .title-container.sc-phn-menu-item-card phn-p-heading.sc-phn-menu-item-card{word-break:break-word;white-space:pre-line}.sc-phn-menu-item-card-h .title-container.sc-phn-menu-item-card phn-p-icon.sc-phn-menu-item-card{margin-left:1rem}";const de=class{constructor(t){e(this,t);this.text=undefined;this.analyticsId=undefined;this.subtext="";this.elementId="";this.link="";this.datalayerEventAction=l.NAVIGATION_CLICK;this.customDatalayerProperties={};this.target="_self";this.iconLeft=""}handleKeyDown(e){var t;if(e.key==="Enter"){const i=(t=S(e.target))===null||t===void 0?void 0:t.querySelector("a");const o=i?i:S(e.target);if(o){o.click();!i?this.sendDataLayerEvent(f.Button,this.elementId):null}}}sendDataLayerEvent(e,t){H({analyticsId:this.analyticsId,text:this.text,elementId:t,clickElementType:e,link:this.link,customDatalayerProperties:this.customDatalayerProperties,datalayerEventAction:this.datalayerEventAction})}renderTitle(){return i("div",{class:"phn-flex-row phn-align-center phn-justify-between title-container"},i("phn-p-heading",{tag:"h3",size:"medium"},this.text),y(this.iconLeft)?i("phn-p-icon",{name:this.iconLeft}):null)}renderSubtitle(){if(!y(this.subtext)){return null}return i("phn-p-text",{class:"subtext",color:"contrast-medium",weight:"regular",size:"xx-small",tag:"div",ellipsis:"true","data-test-id":"subtext"},this.subtext)}render(){const e=i(r,null,i("div",{class:"texts"},this.renderTitle(),this.renderSubtitle()),i("slot",null));if(y(this.link))return i("a",{tabIndex:-1,onClick:()=>{this.sendDataLayerEvent(f.Link,this.elementId)},class:"card-link",href:this.link,target:this.target},e);return i(s,null,i("button",{tabIndex:-1,onClick:()=>{this.sendDataLayerEvent(f.Button,this.elementId)}},e))}get el(){return a(this)}};de.style=pe;const me="@-webkit-keyframes slideDown{from{max-height:0}to{max-height:1000px}}@keyframes slideDown{from{max-height:0}to{max-height:1000px}}@-webkit-keyframes slideUp{from{max-height:1000px}to{max-height:0}}@keyframes slideUp{from{max-height:1000px}to{max-height:0}}@-webkit-keyframes slideLeft{from{max-width:0}to{max-width:1000px}}@keyframes slideLeft{from{max-width:0}to{max-width:1000px}}@-webkit-keyframes slideRight{from{max-width:1000px}to{max-width:0}}@keyframes slideRight{from{max-width:1000px}to{max-width:0}}@-webkit-keyframes darken{from{background-color:rgba(0, 0, 0, 0)}to{background-color:rgba(0, 0, 0, 0.8)}}@keyframes darken{from{background-color:rgba(0, 0, 0, 0)}to{background-color:rgba(0, 0, 0, 0.8)}}@-webkit-keyframes lighten{from{background-color:rgba(0, 0, 0, 0.8)}to{background-color:rgba(0, 0, 0, 0)}}@keyframes lighten{from{background-color:rgba(0, 0, 0, 0.8)}to{background-color:rgba(0, 0, 0, 0)}}@-webkit-keyframes fadeInFromBottom{0%{opacity:0;top:36px}100%{opacity:1;top:0px}}@keyframes fadeInFromBottom{0%{opacity:0;top:36px}100%{opacity:1;top:0px}}@-webkit-keyframes fadeOutToTop{0%{opacity:1;bottom:0px}100%{opacity:0;bottom:16px}}@keyframes fadeOutToTop{0%{opacity:1;bottom:0px}100%{opacity:0;bottom:16px}}@-webkit-keyframes slideLeftDoubleDrawer{from{right:-1000px}to{right:0px}}@keyframes slideLeftDoubleDrawer{from{right:-1000px}to{right:0px}}@-webkit-keyframes slideRightDoubleDrawer{from{right:0px}to{right:-1000px}}@keyframes slideRightDoubleDrawer{from{right:0px}to{right:-1000px}}@-webkit-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes fadeOut{0%{opacity:1}100%{opacity:0}}@keyframes fadeOut{0%{opacity:1}100%{opacity:0}}.phn-flex-col.sc-phn-myporsche-login{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.phn-flex-row.sc-phn-myporsche-login{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row}.phn-align-center.sc-phn-myporsche-login{-ms-flex-align:center;align-items:center}.phn-justify-around.sc-phn-myporsche-login{-ms-flex-pack:distribute;justify-content:space-around}.phn-justify-between.sc-phn-myporsche-login{-ms-flex-pack:justify;justify-content:space-between}.phn-flex-wrap.sc-phn-myporsche-login{-ms-flex-wrap:wrap;flex-wrap:wrap}.sc-phn-myporsche-login-h .button-container.sc-phn-myporsche-login{display:-ms-flexbox;display:flex}@media (min-width: 0px) and (max-width: 479px){.sc-phn-myporsche-login-h .button-container.sc-phn-myporsche-login{-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:justify;justify-content:space-between}}@media (min-width: 760px) and (max-width: 1299px){.sc-phn-myporsche-login-h .button-container.sc-phn-myporsche-login{-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:justify;justify-content:space-between}}.sc-phn-myporsche-login-h .button-container.sc-phn-myporsche-login .login.sc-phn-myporsche-login{padding:2.25rem 0 1rem 0}@media (min-width: 0px) and (max-width: 759px){.sc-phn-myporsche-login-h .button-container.sc-phn-myporsche-login .login.sc-phn-myporsche-login{width:100%;padding-top:0}}@media (min-width: 480px){.sc-phn-myporsche-login-h .button-container.sc-phn-myporsche-login .login.sc-phn-myporsche-login{padding:0 0.5rem 1rem 0}}@media (min-width: 760px) and (max-width: 1299px){.sc-phn-myporsche-login-h .button-container.sc-phn-myporsche-login .login.sc-phn-myporsche-login{padding:0 0 1rem 0}}@media (min-width: 1760px){.sc-phn-myporsche-login-h .button-container.sc-phn-myporsche-login .login.sc-phn-myporsche-login{padding:0 1rem 1.4375rem 0}}.sc-phn-myporsche-login-h .button-container.sc-phn-myporsche-login .more.sc-phn-myporsche-login{padding:0 0 1rem 0}@media (min-width: 0px) and (max-width: 759px){.sc-phn-myporsche-login-h .button-container.sc-phn-myporsche-login .more.sc-phn-myporsche-login{width:100%}}@media (min-width: 480px){.sc-phn-myporsche-login-h .button-container.sc-phn-myporsche-login .more.sc-phn-myporsche-login{padding:0 0 1rem 0.5rem}}@media (min-width: 760px){.sc-phn-myporsche-login-h .button-container.sc-phn-myporsche-login .more.sc-phn-myporsche-login{padding:0 0 1.4375rem 0}}@media (min-width: 1760px){.sc-phn-myporsche-login-h .button-container.sc-phn-myporsche-login .more.sc-phn-myporsche-login{padding:0 1rem 1.4375rem 0}}.sc-phn-myporsche-login-h phn-p-text.sc-phn-myporsche-login{padding-bottom:1.5rem;border-bottom:2px solid #d8d8db;margin-bottom:0.625rem}@media (min-width: 1920px){.sc-phn-myporsche-login-h phn-p-text.sc-phn-myporsche-login{margin-bottom:1rem}}.sc-phn-myporsche-login-h phn-p-link-pure.sc-phn-myporsche-login{float:left;text-decoration:underline;color:black}";const fe=class{constructor(i){e(this,i);this.loginEvent=t(this,"loginEvent",7);this.login=undefined;this.more=null;this.signup=undefined;this.signupText=undefined}sendDataLayerEvent(e){_.pushDataLayerEvent(l.NAVIGATION_LINK_CLICK,{componentClick:{clickElementId:e===null||e===void 0?void 0:e.id,clickElementName:e===null||e===void 0?void 0:e.text,clickElementType:f.Link,targetUrl:e===null||e===void 0?void 0:e.link},componentDisplay:{displayElementId:F.calculateDisplayElementId(),displayElementType:F.calculateDisplayElementType(R.MY_PORSCHE,d.myPorscheDrawer),displayElementName:e===null||e===void 0?void 0:e.text}})}render(){return i(r,null,i("div",{class:"button-container"},i("phn-p-button",{variant:"primary",class:"login",onClick:()=>{this.loginEvent.emit();this.sendDataLayerEvent(this.login)}},this.login.text),this.more&&y(this.more.link)?i("phn-p-link",{variant:"tertiary",class:"more",href:this.more.link,onClick:()=>{this.sendDataLayerEvent(this.more)}},this.more.text):null),i("div",null,i("phn-p-link-pure",{icon:"none",onClick:()=>{this.sendDataLayerEvent(this.signup)}},i("a",{href:this.signup.link},this.signup.text)),i("phn-p-text",null," ",this.signupText)))}};fe.style=me;export{Q as phn_autocomplete_search_field,G as phn_dealer_details_drawer,X as phn_dealer_search_by_number_of_dealers,te as phn_dealer_search_form_dropdown,se as phn_dealer_search_form_geolocation,he as phn_dealer_search_results,de as phn_menu_item_card,fe as phn_myporsche_login};
//# sourceMappingURL=p-9315b1e6.entry.js.map