{"version":3,"names":["shopStateStore","exports","createStore","shopInformation","numberOfShoppingItems","wishlistItemsNumber","subTotal","isShopAvailable","locale","app","shopList","_a","navContentStore","state","shop","availableLocales","undefined","includes","Application","logoLinksToShop","_b","logoLinksToShopLocales","isShopAvailableAndLogoLinksToShop","modifyShopItemDependingOnMarket","content","externalShop","replaceShopWithExternalShop","shopNotAvailableOnGlobalPages","removeShopItemFromContent","Object","assign","availableLocalesOnlyForShop","text","filterWishlistItemsByAuthStatus","menuItems","authStatusList","filter","item","authStatus","getAvailableShopVariables","myPorsche","loggedInState","navStateStore","username","getUsername","loggedInFallback","loadsShopPropsOnStore","props","set","getWishlistIconName","wishlistNumber","handleFilledIcon","icon","numberOfItems","concat","getIconNameByMenuItemId","id","iconsGetterFunctions","wishlist","getIconName"],"sources":["src/state/shop-state-store.ts","src/utility/helpers/shop-helper.ts"],"sourcesContent":["import { createStore } from '@stencil/store';\n\nexport interface ShopInformation {\n  numberOfShoppingItems: number;\n  wishlistItemsNumber: number;\n  subTotal: string;\n}\n\nexport interface ShopStateStoreTypes {\n  shopInformation: ShopInformation;\n}\n\nexport const shopStateStore = createStore<ShopStateStoreTypes>({\n  shopInformation: { numberOfShoppingItems: 0, wishlistItemsNumber: 0, subTotal: '0' }\n});\n","import { Application, ApplicationType } from '../constants/app';\nimport { Content, TLink, TShopAdditionalContentMenu, TShopAuthStatus, TShopMenu } from '../../entities/content';\nimport { getUsername } from '../helper';\nimport { navStateStore } from '../../state/nav-state-store';\nimport { navContentStore } from '../../state/nav-content-store';\nimport { shopStateStore, ShopStateStoreTypes } from '../../state/shop-state-store';\n\nexport function isShopAvailable(locale: string, app: ApplicationType): boolean {\n  const shopList = navContentStore.state.shop?.availableLocales;\n  return shopList !== undefined && shopList.includes(locale) && app === Application.shop;\n}\n\nfunction logoLinksToShop(locale: string): boolean {\n  return navContentStore.state.shop?.logoLinksToShopLocales?.includes(locale) || false;\n}\n\nexport function isShopAvailableAndLogoLinksToShop(\n  locale: string,\n  app: ApplicationType,\n  shop: TShopMenu | null\n): shop is TShopMenu {\n  return isShopAvailable(locale, app) && logoLinksToShop(locale) && shop !== null;\n}\n\nexport function modifyShopItemDependingOnMarket(\n  locale: string,\n  app: ApplicationType | undefined,\n  content: Content\n): Content {\n  const { shop, externalShop } = content;\n\n  if (shop === null) return content;\n\n  if (externalShop && app !== Application.shop) {\n    return replaceShopWithExternalShop(content, shop, externalShop);\n  }\n\n  if (shopNotAvailableOnGlobalPages(shop, locale, app)) {\n    return removeShopItemFromContent(content, shop);\n  }\n\n  return content;\n}\n\nfunction replaceShopWithExternalShop(content: Content, shop: TShopMenu, externalShop: TLink): Content {\n  return {\n    ...content,\n    shop: {\n      ...shop,\n      ...externalShop\n    }\n  };\n}\n\nfunction shopNotAvailableOnGlobalPages(shop: TShopMenu, locale: string, app: ApplicationType | undefined) {\n  return (\n    !shop?.availableLocales.includes(locale) ||\n    (shop?.availableLocalesOnlyForShop.includes(locale) && app !== Application.shop)\n  );\n}\n\nfunction removeShopItemFromContent(content: Content, shop: TShopMenu) {\n  return {\n    ...content,\n    shop: {\n      ...shop,\n      text: ''\n    }\n  };\n}\n\nexport function filterWishlistItemsByAuthStatus(\n  menuItems: TShopAdditionalContentMenu[],\n  authStatusList: TShopAuthStatus[]\n): TShopAdditionalContentMenu[] {\n  return menuItems?.filter((item) => {\n    if (item.authStatus === null || item.authStatus === undefined) {\n      return authStatusList.includes(null);\n    }\n\n    return authStatusList.includes(item.authStatus);\n  });\n}\n\nexport function getAvailableShopVariables(): { wishlistItemsNumber: number; username: string } {\n  const { myPorsche } = navContentStore.state;\n  const { loggedInState } = navStateStore.state;\n  const { wishlistItemsNumber } = shopStateStore.state.shopInformation;\n\n  const username = getUsername(loggedInState, myPorsche?.loggedInFallback || '');\n\n  return { wishlistItemsNumber, username };\n}\n\nexport function loadsShopPropsOnStore(props: ShopStateStoreTypes): void {\n  shopStateStore.set('shopInformation', props.shopInformation);\n}\n\nfunction getWishlistIconName(): string {\n  const { shopInformation } = shopStateStore.state;\n  const wishlistNumber = shopInformation.wishlistItemsNumber;\n\n  return wishlistNumber > 0 ? 'heart-filled' : 'heart';\n}\n\nexport function handleFilledIcon(icon: string, numberOfItems: number): string {\n  switch (true) {\n    case numberOfItems === 0:\n      return `${icon}`;\n    case numberOfItems > 0:\n      return `${icon}-filled`;\n    default:\n      return `${icon}`;\n  }\n}\n\nexport function getIconNameByMenuItemId(id: string): string | null {\n  const iconsGetterFunctions: Record<string, () => string> = {\n    wishlist: getWishlistIconName\n  };\n\n  const getIconName = iconsGetterFunctions[id];\n\n  if (typeof getIconName !== 'function') return null;\n\n  return getIconName();\n}\n"],"mappings":"iPAYaA,EAAcC,EAAA,IAAGC,EAAiC,CAC7DC,gBAAiB,CAAEC,sBAAuB,EAAGC,oBAAqB,EAAGC,SAAU,Q,SCNjEC,EAAgBC,EAAgBC,G,MAC9C,IAAMC,GAAWC,EAAAC,EAAgBC,MAAMC,QAAI,MAAAH,SAAA,SAAAA,EAAEI,iBAC7C,OAAOL,IAAaM,WAAaN,EAASO,SAAST,IAAWC,IAAQS,EAAYJ,IACpF,CAEA,SAASK,EAAgBX,G,QACvB,QAAOY,GAAAT,EAAAC,EAAgBC,MAAMC,QAAI,MAAAH,SAAA,SAAAA,EAAEU,0BAAsB,MAAAD,SAAA,SAAAA,EAAEH,SAAST,KAAW,KACjF,C,SAEgBc,EACdd,EACAC,EACAK,GAEA,OAAOP,EAAgBC,EAAQC,IAAQU,EAAgBX,IAAWM,IAAS,IAC7E,C,SAEgBS,EACdf,EACAC,EACAe,GAEQ,IAAAV,EAAuBU,EAAOV,KAAxBW,EAAiBD,EAAOC,aAEtC,GAAIX,IAAS,KAAM,OAAOU,EAE1B,GAAIC,GAAgBhB,IAAQS,EAAYJ,KAAM,CAC5C,OAAOY,EAA4BF,EAASV,EAAMW,E,CAGpD,GAAIE,EAA8Bb,EAAMN,EAAQC,GAAM,CACpD,OAAOmB,EAA0BJ,EAASV,E,CAG5C,OAAOU,CACT,CAEA,SAASE,EAA4BF,EAAkBV,EAAiBW,GACtE,OAAAI,OAAAC,OAAAD,OAAAC,OAAA,GACKN,GAAO,CACVV,KAAIe,OAAAC,OAAAD,OAAAC,OAAA,GACChB,GACAW,IAGT,CAEA,SAASE,EAA8Bb,EAAiBN,EAAgBC,GACtE,QACGK,IAAI,MAAJA,SAAI,SAAJA,EAAMC,iBAAiBE,SAAST,MAChCM,IAAI,MAAJA,SAAI,SAAJA,EAAMiB,4BAA4Bd,SAAST,KAAWC,IAAQS,EAAYJ,IAE/E,CAEA,SAASc,EAA0BJ,EAAkBV,GACnD,OAAAe,OAAAC,OAAAD,OAAAC,OAAA,GACKN,GAAO,CACVV,KAAIe,OAAAC,OAAAD,OAAAC,OAAA,GACChB,GAAI,CACPkB,KAAM,MAGZ,C,SAEgBC,EACdC,EACAC,GAEA,OAAOD,IAAS,MAATA,SAAS,SAATA,EAAWE,QAAO,SAACC,GACxB,GAAIA,EAAKC,aAAe,MAAQD,EAAKC,aAAetB,UAAW,CAC7D,OAAOmB,EAAelB,SAAS,K,CAGjC,OAAOkB,EAAelB,SAASoB,EAAKC,W,GAExC,C,SAEgBC,IACN,IAAAC,EAAc5B,EAAgBC,MAAK2B,UACnC,IAAAC,EAAkBC,EAAc7B,MAAK4B,cACrC,IAAApC,EAAwBL,EAAea,MAAMV,gBAAeE,oBAEpE,IAAMsC,EAAWC,EAAYH,GAAeD,IAAS,MAATA,SAAS,SAATA,EAAWK,mBAAoB,IAE3E,MAAO,CAAExC,oBAAmBA,EAAEsC,SAAQA,EACxC,C,SAEgBG,EAAsBC,GACpC/C,EAAegD,IAAI,kBAAmBD,EAAM5C,gBAC9C,CAEA,SAAS8C,IACC,IAAA9C,EAAoBH,EAAea,MAAKV,gBAChD,IAAM+C,EAAiB/C,EAAgBE,oBAEvC,OAAO6C,EAAiB,EAAI,eAAiB,OAC/C,C,SAEgBC,EAAiBC,EAAcC,GAC7C,OAAQ,MACN,KAAKA,IAAkB,EACrB,MAAO,GAAAC,OAAGF,GACZ,KAAKC,EAAgB,EACnB,MAAO,GAAAC,OAAGF,EAAI,WAChB,QACE,MAAO,GAAAE,OAAGF,GAEhB,C,SAEgBG,EAAwBC,GACtC,IAAMC,EAAqD,CACzDC,SAAUT,GAGZ,IAAMU,EAAcF,EAAqBD,GAEzC,UAAWG,IAAgB,WAAY,OAAO,KAE9C,OAAOA,GACT,C"}